import{_ as e}from"../index-044285d2.js";import{b as s,a as t}from"./organization-9bed3593.js";import{g as i}from"./tag-13936295.js";import{aU as l,ai as a,o,c as d,a as r,V as c,$ as p,_ as n,U as m,Y as u,Z as h,K as g,a9 as f,T as b,X as j,bl as v,bj as S}from"./@vue-e400fd81.js";import{_ as D}from"./quill-image-resize-module-c051113e.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const _={name:"select-member",components:{SelectDept:l((()=>e((()=>import("./SelectDept-7a07b4de.js")),["assets/js/SelectDept-7a07b4de.js","assets/js/organization-9bed3593.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/css/SelectDept-20dcc6f1.css"]))),SelectWeUser:l((()=>e((()=>import("./SelectUser-4f774a37.js")),["assets/js/SelectUser-4f774a37.js","assets/js/organization-9bed3593.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/css/SelectUser-2cf81cee.css"]))),SelectPost:l((()=>e((()=>import("./SelectPost-d0ccd09d.js")),["assets/js/SelectPost-d0ccd09d.js","assets/js/organization-9bed3593.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/css/SelectPost-b15bb44b.css"])))},props:{initData:{type:Object,default:{userIds:[],deptIds:[],posts:[],customerTag:[]}},userWithout:{type:Boolean,default:!1},accountType:{type:[String,Number],default:1},isDetail:{type:Boolean,default:!1}},data:()=>({selectMember:!1,selectDept:!1,selectedUserList:[],dialogVisibleSelectUser:!1,selectedDeptList:[],dialogVisibleSelectDept:!1,dialogVisibleSelectPost:!1,dialogVisibleSelectTag:!1,selectedTagList:[],selectedPostList:[],form:{userIds:[],deptIds:[],posts:[],customerTag:[]}}),watch:{initData:{deep:!0,immediate:!0,handler(e,s){this.initData&&(this.form=JSON.parse(JSON.stringify(this.initData)),this.form&&(this.setEditUser(),this.setEditDept(),this.setEditTag()))}}},methods:{validateFn(){return!!(this.form.userIds&&this.form.userIds.length||this.form.posts&&this.form.posts.length||this.form.deptIds&&this.form.deptIds.length)||(this.msgError("请选择发送范围的条件！"),!1)},selectedPost(e){this.selectedPostList=e,this.form.posts=e,this.changeFn()},selectedUser(e){this.selectedUserList=e,this.form.userIds=e.map((e=>e.userId)),this.changeFn()},selectedDept(e){this.selectedDeptList=e,this.form.deptIds=e.map((e=>e.deptId)),this.changeFn()},submitSelectTag(e){this.selectedTagList=e,this.form.customerTag=e.map((e=>e.tagId)),this.changeFn()},changeFn(){this.$emit("update",this.form)},setEditUser(){this.form.userIds&&this.form.userIds.length&&(this.selectedUserList=[],s().then((({data:e})=>{this.form.userIds.forEach((s=>{let t=e.findIndex((e=>e.weUserId===s));-1!=t&&(e[t].userId=s,e[t].name=e[t].userName,this.selectedUserList.push(e[t]))}))})))},setEditDept(){this.form.deptIds&&this.form.deptIds.length&&(this.selectedDeptList=[],t().then((({data:e})=>{this.form.deptIds.forEach((s=>{let t=e.findIndex((e=>e.deptId===s));this.selectedDeptList.push(e[t])}))}))),this.form.posts&&this.form.posts.length&&(this.selectedPostList=this.form.posts)},setEditTag(){this.form.customerTag&&this.form.customerTag.length&&(this.selectedTagList=[],i({groupTagType:1}).then((({rows:e})=>{this.form.customerTag.forEach((s=>{e.forEach((e=>{let t=e.weTags.findIndex((e=>e.tagId===s));void 0!==e.weTags[t]&&this.selectedTagList.push(e.weTags[t])}))}))})))}},created(){}},L=e=>(v("data-v-a4908767"),e=e(),S(),e),T={class:"select_content"},I={class:"flex"},U=L((()=>r("div",{class:"lable_text"},"选择成员来源：",-1))),V={class:"select_unit"},y={key:0},P={key:1,class:"tips"},k={class:"select_unit"},E={key:0},x={key:1,class:"tips"},w={class:"flex"},z=L((()=>r("div",{class:"lable_text"},null,-1))),O={class:"select_unit"},F={key:0},q={key:1,class:"tips"},N={class:"flex mt10"},A=L((()=>r("div",{class:"lable_text"},"选择客户标签：",-1))),C={class:"select_unit"},B={key:0},J={key:1,class:"tips"};const R=D(_,[["render",function(e,s,t,i,l,v){const S=a("el-button"),D=a("el-tag"),_=a("SelectDept"),L=a("SelectPost"),R=a("SelectWeUser"),W=a("SelectTag");return o(),d("div",null,[r("div",T,[r("div",I,[U,r("div",null,[r("div",V,[c(n(S,{onClick:s[0]||(s[0]=e=>l.dialogVisibleSelectDept=!0)},{default:m((()=>[u(h(l.selectedDeptList.length?"修改":"选择")+"部门范围 ",1)])),_:1},512),[[p,!t.isDetail]]),l.selectedDeptList.length>0?(o(),d("div",y,[(o(!0),d(g,null,f(l.selectedDeptList,((e,s)=>(o(),b(D,{size:"small",key:s},{default:m((()=>[u(h(e.deptName),1)])),_:2},1024)))),128))])):t.isDetail?(o(),d("span",P,"未选择标签")):j("",!0)]),r("div",k,[c(n(S,{onClick:s[1]||(s[1]=e=>l.dialogVisibleSelectPost=!0)},{default:m((()=>[u(h(l.selectedPostList.length?"修改":"选择")+"岗位 ",1)])),_:1},512),[[p,!t.isDetail]]),l.selectedPostList.length>0?(o(),d("div",E,[(o(!0),d(g,null,f(l.selectedPostList,((e,s)=>(o(),b(D,{size:"small",key:s},{default:m((()=>[u(h(e),1)])),_:2},1024)))),128))])):t.isDetail?(o(),d("span",x,"未选择标签")):j("",!0)])])]),r("div",w,[z,r("div",O,[c(n(S,{onClick:s[2]||(s[2]=e=>l.dialogVisibleSelectUser=!0)},{default:m((()=>[u(h(l.selectedUserList.length?"修改":"选择")+"员工 ",1)])),_:1},512),[[p,!t.isDetail]]),l.selectedUserList.length>0?(o(),d("div",F,[(o(!0),d(g,null,f(l.selectedUserList,((e,s)=>(o(),b(D,{size:"small",key:s},{default:m((()=>[u(h(e.name),1)])),_:2},1024)))),128))])):t.isDetail?(o(),d("span",q,"未选择标签")):j("",!0)])]),r("div",N,[A,r("div",C,[c(n(S,{plain:"",onClick:s[3]||(s[3]=e=>l.dialogVisibleSelectTag=!0)},{default:m((()=>[u(h(l.selectedTagList.length?"修改":"选择")+"标签 ",1)])),_:1},512),[[p,!t.isDetail]]),l.selectedTagList.length>0?(o(),d("div",B,[(o(!0),d(g,null,f(l.selectedTagList,((e,s)=>(o(),b(D,{sizi:"mini",key:s},{default:m((()=>[u(h(e.name),1)])),_:2},1024)))),128))])):t.isDetail?(o(),d("span",J,"未选择标签")):j("",!0)])]),n(_,{defaultValues:l.selectedDeptList,visible:l.dialogVisibleSelectDept,"onUpdate:visible":s[4]||(s[4]=e=>l.dialogVisibleSelectDept=e),title:"选择部门",onSuccess:v.selectedDept},null,8,["defaultValues","visible","onSuccess"]),n(L,{defaultValues:l.selectedPostList,visible:l.dialogVisibleSelectPost,"onUpdate:visible":s[5]||(s[5]=e=>l.dialogVisibleSelectPost=e),title:"选择岗位",onSuccess:v.selectedPost},null,8,["defaultValues","visible","onSuccess"]),n(R,{defaultValues:l.selectedUserList,visible:l.dialogVisibleSelectUser,"onUpdate:visible":s[6]||(s[6]=e=>l.dialogVisibleSelectUser=e),title:"选择使用员工",isOnlyLeaf:!0,onSuccess:v.selectedUser},null,8,["defaultValues","visible","onSuccess"]),n(W,{visible:l.dialogVisibleSelectTag,"onUpdate:visible":s[7]||(s[7]=e=>l.dialogVisibleSelectTag=e),selected:l.selectedTagList,onSuccess:v.submitSelectTag},null,8,["visible","selected","onSuccess"])])])}],["__scopeId","data-v-a4908767"]]);export{R as default};
