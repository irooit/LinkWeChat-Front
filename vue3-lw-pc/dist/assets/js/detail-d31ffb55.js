import{g as e,a as t}from"./common-07456f0f.js";import a from"./PreviewInPhone-9ed75a0f.js";import{a as i}from"./index-0bf429ac.js";import l from"./ChartBar-39a01942.js";import o from"./ChartLine-b009fc4d.js";import r from"./SearchTitle-ceb204ee.js";import s from"./AddOrEditMaterialDialog-00cd185a.js";import{_ as d}from"./quill-image-resize-module-c051113e.js";import{ai as n,aq as m,o as p,c as h,a as u,Z as c,X as g,_ as f,U as y,Y as v,T as w,V as b,bl as j,bj as x}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./echarts-8e7b9cd7.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"./lodash.merge-f1a4e0c2.js";import"./moment-8163541f.js";const T={components:{SearchTitle:r,ChartLine:o,ChartBar:l,PreviewInPhone:a,AddOrEditMaterialDialog:s},data:()=>({dialogVisible:!1,mobForm:{},form:{},legend:["发送次数","查看次数","查看人数"],xdata:[],series:[],activeName:"first",cardData:[{title:"发送总次数 ",value:0,noArrow:!0},{title:"查看总次数",value:0},{title:"查看总人数",value:0},{title:"今日发送次数",value:0},{title:"今日查看次数",value:0},{title:"今日查看人数",value:0}],total:0,query:{pageSize:10,pageNum:1,detailsType:1},tableList:[],loading:!1,type:""}),mounted(){},created(){this.type=this.$route.query.type,this.getDeatil()},watch:{},methods:{H5Url:e=>window.lwConfig.DOMAIN_MOBILE+"/#/metrialDetail?materiaId="+e,filType(e){if(e){let t=JSON.parse(JSON.stringify(e));t=t.split(".");let a=t[t.length-1];return"pdf"===a?"pdf":"doc"===a||"docx"===a?"word":"ppt"===a||"pptx"===a||"pps"===a||"pptsx"===a?"ppt":""}},saveInfo(){"12"===this.type?this.$router.push({path:"articleAdd",query:{type:this.type,id:this.$route.query.id}}):"5"===this.type?this.$router.push({path:"posterAdd",query:{type:this.type,id:this.$route.query.id,detail:!0}}):this.dialogVisible=!0},getDeatil(){this.loading=!0,i({mediaType:this.type,materialId:this.$route.query.id}).then((({rows:e,total:t})=>{this.form=e[0],this.mobForm=[],this.mobForm.push(this.form),this.loading=!1})).catch((()=>{this.loading=!1}))},getTableData(e){this.query.contentId=this.$route.query.id,this.query.beginTime=e.beginTime,this.query.endTime=e.endTime,this.getTableChangeSize()},getLineData(t){t.contentId=this.$route.query.id,t.moduleType=1,this.legend=["发送次数","查看次数","查看人数"],e(t).then((e=>{this.cardData[0].value=e.data.sendTotalNum,this.cardData[1].value=e.data.viewTotalNum,this.cardData[2].value=e.data.viewByTotalNum,this.cardData[3].value=e.data.sendTodayNum,this.cardData[4].value=e.data.viewTotalTodayNum,this.cardData[5].value=e.data.viewByTotalTodayNum,this.xdata=[],this.series=[];let t=[],a=[],i=[];e.data&&e.data.contentAxisVoList.length&&(e.data.contentAxisVoList.forEach((e=>{this.xdata.push(e.dateStr),t.push(e.sendNum),a.push(e.viewNum),i.push(e.viewByNum)})),this.series=[t,a,i])}))},getTableChangeSize(){this.loading=!0,"second"===this.activeName?(this.query.detailsType=2,this.query.resourceType=1):(this.query.detailsType=1,this.query.resourceType=1),t(this.query).then((e=>{this.tableList=e.rows,this.total=Number(e.total),this.loading=!1}))},goDetail(e){let{externalUserid:t,firstUserId:a}=e;this.$router.push({name:window.lwConfig.CUSTOMER_DETAIL_ROUTE_NAME,query:{externalUserid:t,userId:a}})}}},q=e=>(j("data-v-c07eeb98"),e=e(),x(),e),N={class:"flex"},U={style:{width:"calc(100% - 425px)","padding-right":"var(--card-margin)"}},D={class:"g-card"},S={class:"fxbw mb10"},k={class:"flex"},C={class:"title"},_={class:"group"},I={key:0,class:"group groupred"},z={key:0,class:"cp flex"},L={class:"ml10"},V={style:{"text-align":"left","over-flow":"hidden","margin-bottom":"20px"}},A=["href"],E={key:1,class:"cp flex"},O={class:"ml10"},B={style:{"text-align":"left","over-flow":"hidden","margin-bottom":"20px"}},H=["href"],$={key:2,class:"cp flex"},M={class:"ml10"},P={style:{"text-align":"left","over-flow":"hidden","margin-bottom":"20px"}},F=["href"],J={key:3,class:"cp flex"},G={class:"ml10"},R={style:{"text-align":"left","over-flow":"hidden","margin-bottom":"20px"}},K=["href"],W={class:"g-card"},X=q((()=>u("div",{class:"g-card-title"},"数据趋势",-1))),Y={class:"g-card mt10"},Z=q((()=>u("div",{class:"g-card-title"}," 数据明细 ",-1))),Q={key:0},ee={key:0},te={class:"g-card",style:{width:"425px","margin-top":"0"}};const ae=d(T,[["render",function(e,t,a,i,l,o){const r=n("el-button"),s=n("AddOrEditMaterialDialog"),d=n("el-image"),j=n("svg-icon"),x=n("CardGroupIndex"),T=n("search-title"),q=n("chart-line"),ae=n("el-table-column"),ie=n("el-table"),le=n("pagination"),oe=n("el-tab-pane"),re=n("el-tabs"),se=n("PreviewInPhone"),de=m("loading");return p(),h("div",null,[u("div",N,[u("div",U,[u("div",D,[u("div",S,[u("div",k,[u("div",C,c(l.form.materialName),1),u("div",_,c("1"===l.form.categoryId?"默认分组":l.form.categoryName),1),"5"===l.type?(p(),h("div",I,c("1"===l.form.type?"通用海报":"裂变海报"),1)):g("",!0)]),f(r,{text:"",onClick:o.saveInfo},{default:y((()=>[v("编辑")])),_:1},8,["onClick"]),f(s,{type:l.type,data:l.form,title:"编辑",modelValue:l.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>l.dialogVisible=e),onSuccess:t[1]||(t[1]=e=>o.getDeatil())},null,8,["type","data","modelValue"])]),"2"===l.type?(p(),h("div",z,[f(d,{style:{width:"200px",height:"200px",flex:"none"},src:l.form.coverUrl,fit:"fill"},null,8,["src"]),u("div",L,[u("div",V,c(l.form.digest&&l.form.digest.toString()),1),u("a",{style:{color:"var(--color)"},href:o.H5Url(l.form.id),target:"_blank"},c(o.H5Url(l.form.id)),9,A)])])):g("",!0),"3"===l.type?(p(),h("div",E,[l.form.materialUrl?(p(),w(j,{key:0,class:"icon-style",icon:l.form.materialUrl?o.filType(l.form.materialUrl):""},null,8,["icon"])):g("",!0),u("div",O,[u("div",B,c(l.form.digest&&l.form.digest.toString()),1),u("a",{style:{color:"var(--color)"},href:o.H5Url(l.form.id),target:"_blank"},c(o.H5Url(l.form.id)),9,H)])])):g("",!0),"12"===l.type?(p(),h("div",$,[l.form.coverUrl?(p(),w(d,{key:0,style:{width:"200px",height:"200px",flex:"none"},src:l.form.coverUrl,fit:"fill"},null,8,["src"])):(p(),w(j,{key:1,class:"icon-style",icon:"article"})),u("div",M,[u("div",P,c(l.form.digest&&l.form.digest.toString()),1),u("a",{style:{color:"var(--color)"},href:o.H5Url(l.form.id),target:"_blank"},c(o.H5Url(l.form.id)),9,F)])])):g("",!0),"5"===l.type?(p(),h("div",J,[f(d,{style:{width:"200px",height:"200px",flex:"none"},src:l.form.materialUrl,fit:"fill"},null,8,["src"]),u("div",G,[u("div",R,c(l.form.digest&&l.form.digest.toString()),1),u("a",{style:{color:"var(--color)"},href:o.H5Url(l.form.id),target:"_blank"},c(o.H5Url(l.form.id)),9,K)])])):g("",!0)]),u("div",W,[X,f(x,{data:l.cardData},null,8,["data"]),f(T,{onSearch:o.getLineData},null,8,["onSearch"]),f(q,{style:{height:"300px"},legend:l.legend,xData:l.xdata,series:l.series},null,8,["legend","xData","series"])]),u("div",Y,[Z,f(re,{modelValue:l.activeName,"onUpdate:modelValue":t[8]||(t[8]=e=>l.activeName=e)},{default:y((()=>[f(oe,{label:"发送明细",name:"first"},{default:y((()=>["first"===l.activeName?(p(),h("div",Q,[f(T,{showToday:!0,onSearch:o.getTableData},null,8,["onSearch"]),b((p(),w(ie,{data:l.tableList,style:{width:"100%"}},{default:y((()=>[f(ae,{label:"发送员工",align:"center","min-width":"100",prop:"sendBy","show-overflow-tooltip":""}),f(ae,{label:"发送次数",align:"center","min-width":"100",prop:"sendTotalNum","show-overflow-tooltip":""})])),_:1},8,["data"])),[[de,l.loading]]),f(le,{total:l.total,page:l.query.pageNum,"onUpdate:page":t[2]||(t[2]=e=>l.query.pageNum=e),limit:l.query.pageSize,"onUpdate:limit":t[3]||(t[3]=e=>l.query.pageSize=e),onPagination:t[4]||(t[4]=e=>o.getTableChangeSize())},null,8,["total","page","limit"])])):g("",!0)])),_:1}),f(oe,{label:"查看明细",name:"second"},{default:y((()=>["second"===l.activeName?(p(),h("div",ee,[f(T,{showToday:!0,onSearch:o.getTableData},null,8,["onSearch"]),b((p(),w(ie,{data:l.tableList,style:{width:"100%"}},{default:y((()=>[f(ae,{label:"查看用户",align:"center","min-width":"100",prop:"viewBy","show-overflow-tooltip":""}),f(ae,{label:"是否是企业客户",align:"center","min-width":"100",prop:"isCustomer","show-overflow-tooltip":""},{default:y((e=>[v(c(e.row.isCustomer?"是":"否"),1)])),_:1}),f(ae,{label:"查看次数",align:"center","min-width":"100",prop:"viewTotalNum","show-overflow-tooltip":""}),f(ae,{label:"查看时长",align:"center","min-width":"100",prop:"viewDurationCpt","show-overflow-tooltip":""}),f(ae,{label:"操作",align:"center"},{default:y((e=>[e.row.isCustomer?(p(),w(r,{key:0,text:"",onClick:t=>o.goDetail(e.row)},{default:y((()=>[v("客户详情")])),_:2},1032,["onClick"])):g("",!0)])),_:1})])),_:1},8,["data"])),[[de,l.loading]]),f(le,{total:l.total,page:l.query.pageNum,"onUpdate:page":t[5]||(t[5]=e=>l.query.pageNum=e),limit:l.query.pageSize,"onUpdate:limit":t[6]||(t[6]=e=>l.query.pageSize=e),onPagination:t[7]||(t[7]=e=>o.getTableChangeSize())},null,8,["total","page","limit"])])):g("",!0)])),_:1})])),_:1},8,["modelValue"])])]),u("div",te,[f(se,{list:l.mobForm},null,8,["list"])])])])}],["__scopeId","data-v-c07eeb98"]]);export{ae as default};
