import{r as e}from"../index-044285d2.js";import{_ as l}from"./quill-image-resize-module-c051113e.js";import{n as t,ai as a,aq as r,o,T as u,U as d,V as i,_ as m,c as s,K as n,a9 as p,Y as c,X as f,a as g,bl as h,bj as y}from"./@vue-e400fd81.js";window.lwConfig.services.wecom;const b=window.lwConfig.services.wecom+"/substitute/customer/order";function F(){return e({url:b+"/catalogue"})}function V(l){return e({url:b+"/catalogue",method:"post",data:l})}function _(l){return e({url:b+"/catalogue",method:"put",data:l})}function v(l){return e({url:b+"/catalogue/"+l,method:"delete"})}function q(l){return e({url:b+"/catalogue/move",method:"put",data:l})}function w(l){return e({url:b+"/property",params:l})}function k(l){return e({url:b+"/property/"+l,method:"delete"})}function I(l){return e({url:b+"/property",method:"delete",params:{ids:l}})}function x(l){return e({url:b+"/property",method:"post",data:l})}function U(l){return e({url:b+"/property",method:"put",data:l})}function C(l){return e({url:b+"/property/move",method:"put",data:l})}const T={props:{modelValue:{type:Boolean,default:!1},catalogueId:{type:String,default:""},editId:{type:String,default:""}},watch:{editId:{handler(e){t((()=>{this.$refs.ruleForm.resetFields()})),e?this.getDetail(e):this.ruleForm={type:0,money:1,required:1,multipleChoice:0,more:0,toTime:0}}}},data:()=>({loading:!1,ruleForm:{},rules:{name:[{required:!0,message:"请输入字段名称",trigger:"blur"}],type:[{required:!0,message:"请选择字段类型",trigger:"change"}],money:[{required:!0,message:"请选择",trigger:"change"}],required:[{required:!0,message:"请选择",trigger:"change"}],multipleChoice:[{required:!0,message:"请选择",trigger:"change"}],more:[{required:!0,message:"请选择",trigger:"change"}],toTime:[{required:!0,message:"请选择",trigger:"change"}],expound:[{required:!0,message:"请输入字段说明",trigger:"blur"}],value:[{required:!0,message:"请输入字段值",trigger:"blur"}]},typeList:[]}),mounted(){this.getTypeList()},methods:{getDetail(l){l&&(this.loading=!0,function(l){return e({url:b+"/property/"+l})}(l).then((e=>{this.ruleForm=e.data})).finally((()=>{this.loading=!1})))},submit(){this.$refs.ruleForm.validate((e=>{e&&(this.ruleForm.catalogueId=this.catalogueId,this.editId&&(this.ruleForm.id=this.editId,delete this.ruleForm.typeStr),this.loading=!0,(this.editId?U:x)(this.ruleForm).then((e=>{this.msgSuccess(e.msg),this.dialogVisible=!1,this.$emit("success"),this.$emit("update:modelValue",!1)})).finally((()=>{this.loading=!1})))}))},getTypeList(){e({url:b+"/property/type"}).then((e=>{this.typeList=[],Object.keys(e.data).forEach((e=>{let l={key:+e,value:""};this.typeList.push(l)})),Object.values(e.data).forEach(((e,l)=>{this.typeList[l].value=e}))}))}}},j=e=>(h("data-v-b231dd94"),e=e(),y(),e),L=j((()=>g("div",{class:"tips"},"金额需精确到小数点后两位",-1))),S=j((()=>g("div",{class:"tips"},"金额需精确到小数点后两位",-1))),$={slot:"footer",class:"dialog-footer fr"};const O=l(T,[["render",function(e,l,t,h,y,b){const F=a("el-input"),V=a("el-form-item"),_=a("el-option"),v=a("el-select"),q=a("el-radio"),w=a("el-radio-group"),k=a("el-form"),I=a("el-button"),x=a("el-dialog"),U=r("loading");return o(),u(x,{modelValue:t.modelValue,"onUpdate:modelValue":l[10]||(l[10]=l=>e.$emit("update:modelValue",l)),title:(t.editId?"编辑":"新建")+"字段",width:"30%"},{default:d((()=>[i((o(),u(k,{model:y.ruleForm,rules:y.rules,ref:"ruleForm","label-width":"120px",class:"demo-ruleForm"},{default:d((()=>[m(V,{label:"字段名称：",prop:"name"},{default:d((()=>[m(F,{modelValue:y.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>y.ruleForm.name=e),placeholder:"请输入字段名称",maxlength:"10","show-word-limit":"",disabled:y.ruleForm.fixed||!!t.editId},null,8,["modelValue","disabled"])])),_:1}),m(V,{label:"字段类型：",prop:"type"},{default:d((()=>[m(v,{modelValue:y.ruleForm.type,"onUpdate:modelValue":l[1]||(l[1]=e=>y.ruleForm.type=e),disabled:y.ruleForm.fixed||!!t.editId},{default:d((()=>[(o(!0),s(n,null,p(y.typeList,((e,l)=>(o(),u(_,{label:e.value,value:e.key,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),6==y.ruleForm.type?(o(),u(V,{key:0,label:"是否是金额：",prop:"money"},{default:d((()=>[m(w,{modelValue:y.ruleForm.money,"onUpdate:modelValue":l[2]||(l[2]=e=>y.ruleForm.money=e)},{default:d((()=>[m(q,{label:1},{default:d((()=>[c("是")])),_:1}),m(q,{label:0},{default:d((()=>[c("否")])),_:1})])),_:1},8,["modelValue"]),L])),_:1})):f("",!0),3==y.ruleForm.type?(o(),u(V,{key:1,label:"是否精确到时间：",prop:"toTime"},{default:d((()=>[m(w,{modelValue:y.ruleForm.toTime,"onUpdate:modelValue":l[3]||(l[3]=e=>y.ruleForm.toTime=e)},{default:d((()=>[m(q,{label:1},{default:d((()=>[c("是")])),_:1}),m(q,{label:0},{default:d((()=>[c("否")])),_:1})])),_:1},8,["modelValue"]),S])),_:1})):f("",!0),[2,4,5].includes(y.ruleForm.type)?(o(),u(V,{key:2,label:"是否多选：",prop:"multipleChoice"},{default:d((()=>[m(w,{modelValue:y.ruleForm.multipleChoice,"onUpdate:modelValue":l[4]||(l[4]=e=>y.ruleForm.multipleChoice=e)},{default:d((()=>[m(q,{label:1},{default:d((()=>[c("是")])),_:1}),m(q,{label:0},{default:d((()=>[c("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):f("",!0),7==y.ruleForm.type?(o(),u(V,{key:3,label:"是否支持多个：",prop:"more"},{default:d((()=>[m(w,{modelValue:y.ruleForm.more,"onUpdate:modelValue":l[5]||(l[5]=e=>y.ruleForm.more=e)},{default:d((()=>[m(q,{label:1},{default:d((()=>[c("是")])),_:1}),m(q,{label:0},{default:d((()=>[c("否")])),_:1})])),_:1},8,["modelValue"])])),_:1})):f("",!0),m(V,{label:"是否必填：",prop:"required"},{default:d((()=>[m(w,{modelValue:y.ruleForm.required,"onUpdate:modelValue":l[6]||(l[6]=e=>y.ruleForm.required=e),disabled:!!t.editId},{default:d((()=>[m(q,{label:1},{default:d((()=>[c("是")])),_:1}),m(q,{label:0},{default:d((()=>[c("否")])),_:1})])),_:1},8,["modelValue","disabled"])])),_:1}),[0,1,3,6].includes(y.ruleForm.type)?(o(),u(V,{key:4,label:"字段说明：",prop:"expound"},{default:d((()=>[m(F,{modelValue:y.ruleForm.expound,"onUpdate:modelValue":l[7]||(l[7]=e=>y.ruleForm.expound=e),placeholder:"请输入字段说明",maxlength:"20","show-word-limit":""},null,8,["modelValue"])])),_:1})):f("",!0),2==y.ruleForm.type?(o(),u(V,{key:5,label:"字段值：",prop:"value"},{default:d((()=>[m(F,{modelValue:y.ruleForm.value,"onUpdate:modelValue":l[8]||(l[8]=e=>y.ruleForm.value=e),placeholder:"请输入选项，多个选项用英文逗号隔开",type:"textarea",rows:4},null,8,["modelValue"])])),_:1})):f("",!0)])),_:1},8,["model","rules"])),[[U,y.loading]]),g("span",$,[m(I,{onClick:l[9]||(l[9]=l=>e.$emit("update:modelValue",!1))},{default:d((()=>[c("取 消")])),_:1}),m(I,{type:"primary",onClick:b.submit},{default:d((()=>[c("确 定")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","title"])}],["__scopeId","data-v-b231dd94"]]),z=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{O as A,w as a,V as b,v as c,z as d,I as f,F as g,C as l,q as m,k as r,_ as u};
