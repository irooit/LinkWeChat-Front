import{a as e}from"./api-afde1919.js";import t from"./PicTitContent-8b500b6d.js";import{ai as i,aq as l,o as s,c as a,_ as o,U as r,Y as p,X as d,T as m,a as u,V as n,$ as c}from"./@vue-e400fd81.js";import{_ as h}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const j={components:{PicTitle:t},props:{visible:{type:Boolean,default:!1},title:{type:String,default:"选择海报"},selected:{type:Array,default:()=>[]}},data:()=>({isInit:!0,loading:!0,query:{pageNum:1,pageSize:10,title:""},list:[],total:0,radio:"",dialogVisible:!1}),watch:{selected:{deep:!0,handler(e){this.setSelected()}},list:{deep:!0,handler(e){this.setSelected()}}},computed:{Pvisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},created(){this.getList()},mounted(){},methods:{resetForm(){this.$refs.queryForm.resetFields(),this.isInit=!0,this.getList(1)},search(){this.isInit=!1,this.query.pageNum=1,this.getList()},getList(t){t&&(this.query.pageNum=t),this.loading=!0,e(this.query).then((({rows:e,total:t})=>{this.list=e,this.radio="",this.list.forEach((e=>{e.coverUrl=e.materialUrl})),this.total=+t,this.loading=!1})).catch((()=>{this.loading=!1}))},submit(){this.radio?(this.Pvisible=!1,this.$emit("success",this.radio)):this.msgError("请选择一项！")},setSelected(){this.selected.length&&this.list.forEach((e=>{e.id==this.selected[0].id&&(this.radio=e)}))}}},g={key:0,style:{padding:"10px 0"}},f={key:1,class:"empty"},y={style:{"margin-top":"30px"}};const b=h(j,[["render",function(e,t,h,j,b,v){const q=i("el-input"),_=i("el-form-item"),k=i("el-button"),w=i("el-form"),V=i("el-radio"),x=i("el-table-column"),P=i("PicTitle"),U=i("el-table"),I=i("pagination"),z=i("el-col"),C=i("el-row"),S=i("el-dialog"),L=l("loading");return s(),a("div",null,[o(S,{title:h.title,modelValue:v.Pvisible,"onUpdate:modelValue":t[9]||(t[9]=e=>v.Pvisible=e),width:"800px","append-to-body":"","close-on-click-modal":!1},{footer:r((()=>[b.list.length||!b.isInit?(s(),a("div",g,[o(k,{onClick:t[7]||(t[7]=e=>v.Pvisible=!1)},{default:r((()=>[p("取 消")])),_:1}),o(k,{type:"primary",onClick:v.submit},{default:r((()=>[p("确 定")])),_:1},8,["onClick"])])):d("",!0)])),default:r((()=>[b.list.length||!b.isInit?(s(),m(C,{key:0,type:"flex",justify:"space-between",style:{"max-height":"500px"}},{default:r((()=>[o(z,{style:{"margin-top":"0px"}},{default:r((()=>[u("div",null,[o(w,{ref:"queryForm",model:b.query,inline:!0,"label-width":""},{default:r((()=>[o(_,{label:"海报标题",prop:"title"},{default:r((()=>[o(q,{clearable:"",modelValue:b.query.title,"onUpdate:modelValue":t[0]||(t[0]=e=>b.query.title=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(_,{label:""},{default:r((()=>[o(k,{type:"primary",onClick:t[1]||(t[1]=e=>v.search())},{default:r((()=>[p("查询")])),_:1}),o(k,{onClick:t[2]||(t[2]=e=>v.resetForm())},{default:r((()=>[p("重置")])),_:1})])),_:1})])),_:1},8,["model"]),n((s(),m(U,{data:b.list},{default:r((()=>[o(x,{width:"30"},{default:r((({row:e})=>[o(V,{modelValue:b.radio,"onUpdate:modelValue":t[3]||(t[3]=e=>b.radio=e),label:e},null,8,["modelValue","label"])])),_:1}),o(x,{label:"素材"},{default:r((({row:e})=>[o(P,{row:e},null,8,["row"])])),_:1})])),_:1},8,["data"])),[[L,b.loading]]),n(o(I,{total:b.total,page:b.query.pageNum,"onUpdate:page":t[4]||(t[4]=e=>b.query.pageNum=e),limit:b.query.pageSize,"onUpdate:limit":t[5]||(t[5]=e=>b.query.pageSize=e),onPagination:t[6]||(t[6]=e=>v.getList())},null,8,["total","page","limit"]),[[c,b.total>0]])])])),_:1})])),_:1})):d("",!0),!b.list.length&&b.isInit?(s(),a("div",f,[u("div",null,[p(" 暂无海报，点击下方按钮立即创建 "),u("div",y,[o(k,{type:"primary",onClick:t[8]||(t[8]=t=>e.$router.push("/content/martial/trackMaterial/list"))},{default:r((()=>[p("去新建")])),_:1})])])])):d("",!0)])),_:1},8,["title","modelValue"])])}],["__scopeId","data-v-7accfed7"]]);export{b as default};
