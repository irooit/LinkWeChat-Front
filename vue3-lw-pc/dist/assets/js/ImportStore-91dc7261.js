import{D as e}from"../index-044285d2.js";import{u as o,d as i}from"./store-1f3cfa19.js";import{_ as s}from"./quill-image-resize-module-c051113e.js";import{ai as t,aq as a,o as l,c as r,_ as d,U as p,a as n,Y as m,V as c,T as u,bl as j,bj as f}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const h={name:"import-store",data:()=>({headers:window.lwConfig.headers,submitLoading:!1,actionUrl:"",file:""}),props:{visible:{type:Boolean,default:!1}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}}},methods:{handlerExceed(){this.msgError("上传文件个数最大为1，请选择拖拽一份文件或删除已存在文件！")},submitImport(){if(!this.file)return this.msgInfo("请先上传文件！"),!1;o(e({file:this.file})).then((e=>{200===e.code&&(this.msgSuccess(e.data),this.dialogVisible=!1,this.$emit("update"))}))},handleRemove(){},setFileData(e,o){this.file=e.raw},downloadFn(){i().then((e=>{if(null!=e){let o=new Blob([e],{type:"application/vnd.ms-excel"}),i=window.URL.createObjectURL(o);const s=document.createElement("a");s.href=i,s.download="门店模板.xlsx",s.click(),URL.revokeObjectURL(i)}}))}},created(){}},x=e=>(j("data-v-0489ca9c"),e=e(),f(),e),v={class:"download_template"},b=x((()=>n("span",null,"请下载门店模板，按格式修改后导入",-1))),g={class:"upload_content"},w={style:{"font-size":"12px"}},y=x((()=>n("p",{style:{margin:"3px 0"}},"仅支持xls、xlsx格式文件",-1))),_=x((()=>n("div",{class:"tip"},[n("div",{class:"title"},"填写说明"),n("div",{style:{"margin-bottom":"3px"}},"1、门店名称、所属地区、门店地址必填；"),n("div",{style:{"margin-bottom":"3px"}},"2、门店名称不可重复，重复则自动过滤；"),n("div",null,"3、所属地区请务必按照“xxx省xxx市xxx区/县”格式填写。")],-1))),k={class:"dialog-footer"};const U=s(h,[["render",function(e,o,i,s,j,f){const h=t("el-button"),x=t("el-icon-upload"),U=t("el-upload"),V=t("el-dialog"),L=a("loading");return l(),r("div",null,[d(V,{width:"auto","close-on-click-modal":!1,"show-close":!1,title:"批量导入",modelValue:f.dialogVisible,"onUpdate:modelValue":o[1]||(o[1]=e=>f.dialogVisible=e)},{footer:p((()=>[n("span",k,[d(h,{onClick:o[0]||(o[0]=e=>{f.dialogVisible=!1,j.file=""})},{default:p((()=>[m("取 消")])),_:1}),c((l(),u(h,{type:"primary",onClick:f.submitImport},{default:p((()=>[m("确 定")])),_:1},8,["onClick"])),[[L,j.submitLoading]])])])),default:p((()=>[n("div",v,[b,d(h,{text:"",plain:"",onClick:f.downloadFn},{default:p((()=>[m("下载模板")])),_:1},8,["onClick"])]),n("div",g,[d(U,{drag:"",accept:".xls, .xlsx",action:j.actionUrl,limit:1,headers:j.headers,ref:"upload","on-remove":f.handleRemove,"on-change":f.setFileData,"auto-upload":!1,"on-exceed":f.handlerExceed},{default:p((()=>[d(x,{class:"el-icon-upload"}),n("div",w,[m(" 将文件拖拽到此区域 "),y,d(h,{type:"primary",plain:""},{default:p((()=>[m("上传文件")])),_:1})])])),_:1},8,["action","headers","on-remove","on-change","on-exceed"])]),_])),_:1},8,["modelValue"])])}],["__scopeId","data-v-0489ca9c"]]);export{U as default};
