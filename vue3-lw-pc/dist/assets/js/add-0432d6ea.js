import{c as e,g as s,e as t,f as l}from"./staff-48996164.js";import{S as o}from"./index-618cff16.js";import{A as r}from"./AddMaterial-51d9aa5c.js";import a from"./memberList-96dd08f0.js";import{_ as i}from"./quill-image-resize-module-c051113e.js";import{ai as d,o as m,c as p,a as n,_ as u,U as c,T as f,K as h,a9 as g,Y as b,X as y,Z as S,bl as U,bj as I}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./tag-13936295.js";import"./index-0bf429ac.js";import"./PreviewInPhone-9ed75a0f.js";import"./scriptCenter-9e8c6ca2.js";import"./modleCenter-5112f339.js";import"./DragTable-97e90e96.js";import"./sortablejs-b0ad9b27.js";import"./MessageContentForm-5a22ed37.js";import"./PicTitContent-8b500b6d.js";import"./PosterAdd-51b39872.js";import"./fabric-8da0df30.js";import"./poster-241340a9.js";import"./liveCodeTable-73b404a8.js";import"./group-16414119.js";import"./pullNews-68e01d94.js";import"./TemplateLibrary-f59d0076.js";import"./welcome-6ff4c53e.js";const C={components:{MemeberList:a,SelectMaterial:o,AddMaterial:r},data:()=>({operationIndex:null,materialData:{templateInfo:"",materialMsgList:[]},active:0,baseRules:{qrName:[{required:!0,message:"请输入活码名称",trigger:"blur"}],qrGroupId:[{required:!0,message:"请选择分组",trigger:"blur"}]},form:{qrName:"",qrGroupId:"",qrAutoAdd:1,weEmpleCodeTags:[],qrWelcomeOpen:1,qrType:1,qrRuleType:1,qrRuleMode:1,openSpareUser:0,isExclusive:0,weEmpleCodeUseScops:[],weSpareUseScops:[],empleCodeRosterDto:[{type:0,weEmpleCodeUseScops:[],weSpareUseScops:[],weekday:[1,2,3,4,5,6,7],qrRuleType:2,startDate:"00:00",endDate:"23:59"}]},codeRules:{qrType:[{required:!0,message:"请选择",trigger:"blur"}],qrRuleType:[{required:!0,message:"请选择",trigger:"blur"}],qrRuleMode:[{required:!0,message:"请选择",trigger:"blur"}],openSpareUser:[{required:!1,message:"请选择",trigger:"blur"}],weEmpleCodeUseScops:[{required:!0,message:"请选择",trigger:"blur",validator:(e,s,t)=>{0==s.length?t(new Error("请选择")):t()}}],weSpareUseScops:[{required:!1,trigger:"blur"}]},isInsertClientName:!0,dialogVisibleSelectUser:!1,dialogVisibleSelectSpareUser:!1,dialogVisibleSelectTag:!1,dialogVisibleSelectMaterial:!1,dialogVisibleSelectWel:!1,codeCategoryList:[],selectedUserList:[],selectedSpareUserList:[],selectedTagList:[],timeConflict:!1}),created(){let e=this.$route.query.id,s=this.$route.query.groupId;s&&(this.form.qrGroupId=s),this.getCodeCategoryList(),e&&this.getDetail(e)},methods:{getList(e){this.form.weEmpleCodeUseScops=e},checkStartEnd(e,s){this.timeConflict=!1,this.operationIndex=s,this.allTimeConflict()&&this.form.empleCodeRosterDto[this.operationIndex].weekday.length&&(this.form.empleCodeRosterDto[this.operationIndex].endDate||this.form.empleCodeRosterDto[this.operationIndex].startDate)&&this.someTimeConflict()},someTimeConflict(){let e=[],s=[],t=this.form.empleCodeRosterDto[this.operationIndex].weEmpleCodeUseScops.map((e=>({userId:e.businessId,name:e.businessName})));this.form.empleCodeRosterDto.forEach(((e,t)=>{e.weEmpleCodeUseScops.map(((e,l)=>{t!=this.operationIndex&&s.push({userId:e.businessId,name:e.businessName,index:t,week:[],goto1:!0,goto2:!0})}))})),t.map((t=>{s.map((s=>{t.userId===s.userId&&e.push(s)}))}));let l=this.form.empleCodeRosterDto[this.operationIndex].weekday;e.forEach((e=>{const s=this.form.empleCodeRosterDto[e.index].weekday;for(var t=0;t<s.length;t++)-1!=l.indexOf(s[t])&&e.week.push(s[t])})),e.forEach((e=>{if(e.week.length){let s=this.form.empleCodeRosterDto[e.index].startDate,t=this.form.empleCodeRosterDto[e.index].endDate;s&&t&&(this.form.empleCodeRosterDto[this.operationIndex].startDate&&(e.goto1=this.checkAuditTime(s,t,this.form.empleCodeRosterDto[this.operationIndex].startDate)),this.form.empleCodeRosterDto[this.operationIndex].endDate&&(e.goto2=this.checkAuditTime(s,t,this.form.empleCodeRosterDto[this.operationIndex].endDate)))}}));let o="";e.forEach((e=>{if(!e.goto1||!e.goto2){let s=e.week.map((e=>7===e?"日":e));o+="员工"+e.name+"在周"+s.join("、")+"时间存在冲突;"}})),o?(this.timeConflict=!0,this.msgError(o)):this.timeConflict=!1},allTimeConflict(){if(0===this.operationIndex)return!0;let e=this.form.empleCodeRosterDto[this.operationIndex].weEmpleCodeUseScops.map((e=>({userId:e.businessId,name:e.businessName}))),s=this.form.empleCodeRosterDto[0].weEmpleCodeUseScops.map((e=>({userId:e.businessId,name:e.businessName}))),t=[];if(e.map((e=>{s.map((s=>{e.userId===s.userId&&t.push(e)}))})),t.length){let e=t.map(((e,s)=>e.name)).join(",");return this.msgError("员工 "+e+" 已是全天在线，时间存在冲突！"),this.timeConflict=!0,!1}return this.timeConflict=!1,!0},checkAuditTime(e,s,t){let l=e.split(":");if(2!=l.length)return!1;let o=s.split(":");if(2!=o.length)return!1;let r=t.split(":");if(2!=r.length)return!1;let a=new Date,i=new Date,d=new Date;return a.setHours(l[0]),a.setMinutes(l[1]),i.setHours(o[0]),i.setMinutes(o[1]),d.setHours(r[0]),d.setMinutes(r[1]),!(d.getTime()-a.getTime()>=0&&d.getTime()-i.getTime()<=0)},cancelFn(){this.$router.back()},getWelData(e){this.submit(e)},changeType(e){1===e&&(this.form.qrRuleType=1)},nextStep(e){let s="";1==e?s="baseForm":2==e&&(s="codeForm"),this.$refs[s].validate((s=>{if(s)if(2===e)if(2===this.form.qrRuleType){let s=!0,t=!0,l=!0;this.form.empleCodeRosterDto.forEach((e=>{e.weEmpleCodeUseScops.length||(s=!1),e.weekday.length||(t=!1),e.startDate&&e.endDate||(l=!1)})),s?t?l?this.timeConflict?this.msgError("排班存在冲突！"):this.active=e:this.msgError("请选择活码排班每项的在线时间！"):this.msgError("活码排班每项工作周期至少勾选一项！"):this.msgError("活码排班每项至少选择一名员工！")}else this.active=e;else this.active=e}))},getDetail(s){e(s).then((e=>{var s,t;let l=JSON.parse(JSON.stringify(e.data));if(Object.assign(this.form,l,{qrName:l.name,qrGroupId:l.groupId,qrAutoAdd:l.autoAdd,weEmpleCodeTags:l.qrTags}),this.form.qrType=l.type,this.form.qrRuleType=l.ruleType,this.form.qrRuleMode=l.ruleMode,this.form.openSpareUser=l.openSpareUser,this.form.isExclusive=l.isExclusive,1===l.ruleType){let e=[],s=[];l.qrUserInfos[0].weQrUserList.forEach((t=>{if(0===t.isSpareUser){let s={scopeId:l.qrUserInfos[0].scopeId,businessId:t.userId,businessName:t.userName,businessNumber:t.schedulingNum};e.push(s)}else{let e={scopeId:l.qrUserInfos[0].scopeId,businessId:t.userId,businessName:t.userName};s.push(e)}})),this.form.weEmpleCodeUseScops=e,this.form.weSpareUseScops=s}else{let e=[];l.qrUserInfos.forEach((s=>{let t={type:s.type,startDate:s.beginTime,endDate:s.endTime,weekday:s.workCycle?s.workCycle.split(",").map((e=>parseInt(e,0))):[],scopeId:s.scopeId,weEmpleCodeUseScops:s.weQrUserList.map((e=>({businessId:e.userId,businessName:e.userName})))};e.push(t)})),this.form.empleCodeRosterDto=e}this.materialData={templateInfo:(null==(t=null==(s=l.qrAttachments)?void 0:s[0])?void 0:t.content)||"",attachments:l.qrAttachments||[]}}))},getCodeCategoryList(){s({mediaType:6}).then((e=>{this.codeCategoryList=e.data}))},selectedUser(e){let s={userIds:[],departmentIds:[]};const t=e.map((e=>(e.userId&&s.userIds.push(e.userId),e.id&&s.departmentIds.push(e.id),{businessId:e.userId||e.id,businessName:e.name,businessIdType:e.userId?2:1,businessNumber:1})));s.userIds+="",s.departmentIds+="",1==this.form.qrRuleType?this.form.weEmpleCodeUseScops=t:(this.form.empleCodeRosterDto[this.selectedRosterIndex].weEmpleCodeUseScops=t,this.checkStartEnd(null,this.selectedRosterIndex))},selectedSpareUser(e){let s={spareUserIds:[],departmentIds:[]};const t=e.map((e=>(e.userId&&s.spareUserIds.push(e.userId),e.id&&s.departmentIds.push(e.id),{businessId:e.userId||e.id,businessName:e.name,businessIdType:e.userId?2:1})));s.spareUserIds+="",s.departmentIds+="",1==this.form.qrRuleType?this.form.weSpareUseScops=t:(this.form.empleCodeRosterDto[this.selectedRosterIndex].weSpareUseScops=t,this.checkStartEnd(null,this.selectedRosterIndex))},onSelectUser(e){var s,t;if(this.selectedUserList=[],2==this.form.qrRuleType){this.selectedRosterIndex=e;let s=[];s=this.form.empleCodeRosterDto[this.selectedRosterIndex].weEmpleCodeUseScops.map((e=>({userId:e.businessId,name:e.businessName}))),this.selectedUserList=s}else{let e=[];e=null==(t=null==(s=this.form.weEmpleCodeUseScops)?void 0:s.map)?void 0:t.call(s,(e=>({userId:e.businessId,name:e.businessName}))),this.selectedUserList=e}this.dialogVisibleSelectUser=!0},onSelectSpareUser(e){if(this.selectedSpareUserList=[],2==this.form.qrRuleType){this.selectedRosterIndex=e;let s=[];s=this.form.empleCodeRosterDto[this.selectedRosterIndex].weSpareUseScops.map((e=>({userId:e.businessId,name:e.businessName}))),this.selectedSpareUserList=s}else{let e=[];e=this.form.weSpareUseScops.map((e=>({userId:e.businessId,name:e.businessName}))),this.selectedSpareUserList=e}this.dialogVisibleSelectSpareUser=!0},onAddRoster(){this.form.empleCodeRosterDto.push({weEmpleCodeUseScops:[],weekday:[],type:1,startDate:"",endDate:""})},onRemoveRoster(e){this.timeConflict=!1,this.form.empleCodeRosterDto.splice(e,1)},onRosterTimeChange(e,s){const[t,l]=e;this.form.empleCodeRosterDto[s].startDate=t,this.form.empleCodeRosterDto[s].endDate=l,this.form.empleCodeRosterDto[s].time=e},selectedFn(){this.form.weEmpleCodeTags&&(this.selectedTagList=this.form.weEmpleCodeTags.map((e=>({tagId:e.tagId,name:e.tagName})))),this.dialogVisibleSelectTag=!0},submitSelectTag(e){this.form.weEmpleCodeTags=e.map((e=>({tagId:e.tagId,tagName:e.name})))},resetData(e){let s=[];return e&&e.length&&e.forEach((e=>{if("0"===e.msgType){let t={msgType:"image",picUrl:e.materialUrl};s.push(t)}else if("8"===e.msgType){let t={msgType:"link",title:e.materialName,linkUrl:e.materialUrl};s.push(t)}else if("9"===e.msgType){let t={msgType:"miniprogram",appId:e.digest,title:e.materialName,picUrl:e.coverUrl,linkUrl:e.materialUrl};s.push(t)}})),s},submit(e){var s,o,r,a,i,d,m,p;let n={attachments:[]};if(e){let s=e.attachments;n={attachments:[{content:e.templateInfo,msgType:"text"}]},n.attachments.push(...s)}if(1===this.form.qrRuleType){let e=[];null==(o=null==(s=this.form.weEmpleCodeUseScops)?void 0:s.forEach)||o.call(s,(s=>{let t={userId:s.businessId,schedulingNum:s.businessNumber};e.push(t)}));let t={type:0,scopeId:this.form.weEmpleCodeUseScops[0].scopeId?this.form.weEmpleCodeUseScops[0].scopeId:"",userIds:null==(a=null==(r=this.form.weEmpleCodeUseScops)?void 0:r.map)?void 0:a.call(r,(e=>e.businessId)),spareUserIds:null==(d=null==(i=this.form.weSpareUseScops)?void 0:i.map)?void 0:d.call(i,(e=>e.businessId)),qrUserInfosDetail:e};this.form.qrUserInfos=[t]}else this.form.qrUserInfos=[],null==(p=null==(m=this.form.empleCodeRosterDto)?void 0:m.forEach)||p.call(m,(e=>{let s=[];e.weEmpleCodeUseScops.forEach((e=>{let t={userId:e.businessId,schedulingNum:0};s.push(t)}));let t={scopeId:e.scopeId?e.scopeId:"",type:e.type,beginTime:e.startDate,endTime:e.endDate,userIds:e.weEmpleCodeUseScops.map((e=>e.businessId)),workCycle:e.weekday,qrUserInfosDetail:s};this.form.qrUserInfos.push(t)}));this.form.qrTags=this.form.weEmpleCodeTags.map((e=>e.tagId));let u=Object.assign({},this.form,n);delete u.weEmpleCodeTags,delete u.weEmpleCodeUseScops,delete u.empleCodeRosterDto,this.form.id&&(u.qrId=this.form.id,u.configId=this.form.configId),this.$store.loading=!0,(this.form.id?t:l)(u).then((({data:e})=>{this.msgSuccess("操作成功"),this.$router.back()})).finally((()=>{this.$store.loading=!1}))}}},q=e=>(U("data-v-346b8c2b"),e=e(),I(),e),v={class:"g-card"},T={class:"g-card"},w=q((()=>n("div",{class:"g-tip"},"开启后，客户添加该企业微信时，无需好友验证，将会自动添加成功",-1))),k=q((()=>n("div",{class:"g-tip"},"添加成功后，该客户将会自动打上选中的标签",-1))),R={class:"g-tip"},D={key:0},E={key:1},_=q((()=>n("div",null,"根据二维码的优先级顺序，平均展示给访问用户。",-1))),j=q((()=>n("div",null,"二维码访问人数达到访问上限后，自动切换至下一个二维码。",-1))),V=q((()=>n("div",null,"用户扫描二维码后，将在上线的员工中随机一个进行展示。",-1))),x={key:0},N=q((()=>n("div",{class:"g-tip"},"单人活码只能选择一个员工，多人活码支持选择多个员工",-1))),L={key:1},A={key:0},M=q((()=>n("div",{class:"g-tip"},"员工当日添加用户数达每日上限后添加至备用员工。若如关闭，则自动循环下一个上限",-1))),F=q((()=>n("div",{class:"g-tip"},"开启后，相同客户会优先添加到同一个员工。",-1))),O={style:{display:"flex","justify-content":"flex-end"}},W={class:"mt20"},P={class:"g-card overhide"},$=q((()=>n("div",{class:"g-card-title"},"欢迎语设置",-1))),G={key:0,class:"bfc-p"};const z=i(C,[["render",function(e,s,t,l,o,r){const a=d("el-step"),i=d("el-steps"),U=d("el-input"),I=d("el-form-item"),C=d("el-option"),q=d("el-select"),z=d("el-switch"),Q=d("el-button"),H=d("TagEllipsis"),J=d("el-form"),K=d("el-radio"),Z=d("el-radio-group"),B=d("el-icon-QuestionFilled"),X=d("el-popover"),Y=d("el-tag"),ee=d("MemeberList"),se=d("el-checkbox"),te=d("el-checkbox-group"),le=d("el-time-select"),oe=d("el-card"),re=d("AddMaterial"),ae=d("SelectTag"),ie=d("SelectUser");return m(),p("div",null,[n("div",v,[u(i,{active:o.active,"align-center":"","finish-status":"success"},{default:c((()=>[u(a,{title:"基础信息"}),u(a,{title:"活码员工"}),u(a,{title:"欢迎语"})])),_:1},8,["active"])]),n("div",T,[0==o.active?(m(),f(J,{key:0,ref:"baseForm",rules:o.baseRules,model:o.form,"label-position":"right","label-width":"100px"},{default:c((()=>[u(I,{label:"活码名称",prop:"qrName"},{default:c((()=>[u(U,{modelValue:o.form.qrName,"onUpdate:modelValue":s[0]||(s[0]=e=>o.form.qrName=e),maxlength:"15","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),u(I,{label:"活码分组",prop:"qrGroupId"},{default:c((()=>[u(q,{modelValue:o.form.qrGroupId,"onUpdate:modelValue":s[1]||(s[1]=e=>o.form.qrGroupId=e)},{default:c((()=>[(m(!0),p(h,null,g(o.codeCategoryList,(e=>(m(),f(C,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(I,{label:"自动通过好友"},{default:c((()=>[u(z,{modelValue:o.form.qrAutoAdd,"onUpdate:modelValue":s[2]||(s[2]=e=>o.form.qrAutoAdd=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),w])),_:1}),u(I,{label:"新客标签"},{default:c((()=>[u(Q,{type:"primary",onClick:r.selectedFn},{default:c((()=>[b("选择标签")])),_:1},8,["onClick"]),k,u(H,{list:o.form.weEmpleCodeTags,limit:"10",defaultProps:"tagName"},null,8,["list"])])),_:1}),u(I,null,{default:c((()=>[u(Q,{plain:"",onClick:r.cancelFn},{default:c((()=>[b("取消")])),_:1},8,["onClick"]),u(Q,{type:"primary",onClick:s[3]||(s[3]=e=>r.nextStep(o.active+1))},{default:c((()=>[b("下一步")])),_:1})])),_:1})])),_:1},8,["rules","model"])):y("",!0),1==o.active?(m(),f(J,{key:1,ref:"codeForm",rules:o.codeRules,model:o.form,"label-position":"right","label-width":"100px"},{default:c((()=>[u(I,{label:"活码类型",prop:"qrType"},{default:c((()=>[u(Z,{modelValue:o.form.qrType,"onUpdate:modelValue":s[4]||(s[4]=e=>o.form.qrType=e),onChange:r.changeType},{default:c((()=>[u(K,{label:1},{default:c((()=>[b("单人")])),_:1}),u(K,{label:2},{default:c((()=>[b("多人")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),u(I,{label:"排班类型",prop:"qrRuleType"},{default:c((()=>[u(Z,{modelValue:o.form.qrRuleType,"onUpdate:modelValue":s[5]||(s[5]=e=>o.form.qrRuleType=e)},{default:c((()=>[u(K,{label:1},{default:c((()=>[b("全天在线")])),_:1}),u(K,{label:2,disabled:1===o.form.qrType},{default:c((()=>[b("自动排班")])),_:1},8,["disabled"])])),_:1},8,["modelValue"]),n("div",R,[1==o.form.qrRuleType?(m(),p("span",D,"多人全天在线时随机分配，单人活码不支持排班")):2==o.form.qrRuleType?(m(),p("span",E," 选择自动排班时，默认生成一条全天在线规则，不可删除，保证有员工全天在线 ")):y("",!0)])])),_:1}),2==o.form.qrType&&1==o.form.qrRuleType?(m(),f(I,{key:0,label:"排班方式",prop:"qrRuleMode"},{default:c((()=>[u(Z,{modelValue:o.form.qrRuleMode,"onUpdate:modelValue":s[6]||(s[6]=e=>o.form.qrRuleMode=e)},{default:c((()=>[u(K,{label:1},{default:c((()=>[u(X,{placement:"top",trigger:"hover"},{reference:c((()=>[n("span",null,[b(" 轮询 "),u(B,{class:"el-icon-QuestionFilled"})])])),default:c((()=>[_])),_:1})])),_:1}),u(K,{label:2},{default:c((()=>[u(X,{placement:"top",trigger:"hover"},{reference:c((()=>[n("span",null,[b(" 顺序 "),u(B,{class:"el-icon-QuestionFilled"})])])),default:c((()=>[j])),_:1})])),_:1}),u(K,{label:3},{default:c((()=>[u(X,{placement:"top",trigger:"hover"},{reference:c((()=>[n("span",null,[b(" 随机 "),u(B,{class:"el-icon-QuestionFilled"})])])),default:c((()=>[V])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})):y("",!0),1==o.form.qrRuleType?(m(),f(I,{key:1,label:"活码员工",prop:"weEmpleCodeUseScops"},{default:c((()=>[o.form.weEmpleCodeUseScops.length>0&&1==o.form.qrType?(m(),p("div",x,[(m(!0),p(h,null,g(o.form.weEmpleCodeUseScops,((e,s)=>(m(),f(Y,{key:s},{default:c((()=>[b(S(e.businessName),1)])),_:2},1024)))),128))])):y("",!0),u(Q,{type:"primary",plain:"",onClick:r.onSelectUser},{default:c((()=>{var e;return[b(S((null==(e=o.form.weEmpleCodeUseScops)?void 0:e.length)?"修改":"选择")+"员工 ",1)]})),_:1},8,["onClick"]),N,o.form.weEmpleCodeUseScops.length>0&&2==o.form.qrType?(m(),p("div",L,[u(ee,{list:o.form.weEmpleCodeUseScops,onUpdate:r.getList},null,8,["list","onUpdate"])])):y("",!0)])),_:1})):y("",!0),2==o.form.qrType&&1==o.form.qrRuleType?(m(),f(I,{key:2,label:"备用员工",prop:"weSpareUseScops"},{default:c((()=>[o.form.weSpareUseScops.length>0?(m(),p("div",A,[(m(!0),p(h,null,g(o.form.weSpareUseScops,((e,s)=>(m(),f(Y,{key:s},{default:c((()=>[b(S(e.businessName),1)])),_:2},1024)))),128))])):y("",!0),u(Q,{type:"primary",plain:"",onClick:r.onSelectSpareUser},{default:c((()=>[b(S(o.form.weSpareUseScops.length?"修改":"选择")+"备用员工 ",1)])),_:1},8,["onClick"])])),_:1})):y("",!0),2==o.form.qrType&&1==o.form.qrRuleType?(m(),f(I,{key:3,label:"开启备用员工",prop:"openSpareUser"},{default:c((()=>[u(z,{modelValue:o.form.openSpareUser,"onUpdate:modelValue":s[7]||(s[7]=e=>o.form.openSpareUser=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),M])),_:1})):y("",!0),2==o.form.qrType&&1==o.form.qrRuleType?(m(),f(I,{key:4,label:"添加同一员工",prop:"openSpareUser"},{default:c((()=>[u(z,{modelValue:o.form.isExclusive,"onUpdate:modelValue":s[8]||(s[8]=e=>o.form.isExclusive=e),"active-value":1,"inactive-value":0},null,8,["modelValue"]),F])),_:1})):y("",!0),2==o.form.qrRuleType?(m(),f(I,{key:5,label:"活码排班",prop:"empleCodeRosterDto"},{default:c((()=>[(m(!0),p(h,null,g(o.form.empleCodeRosterDto,((e,s)=>(m(),f(oe,{key:e.id,class:"box-card roster-card"},{default:c((()=>[n("div",O,[0!==s?(m(),f(Q,{key:0,type:"text",icon:"el-icon-delete",onClick:e=>r.onRemoveRoster(s)},{default:c((()=>[b(" 删除 ")])),_:2},1032,["onClick"])):y("",!0)]),u(I,{label:"排班员工"},{default:c((()=>[(m(!0),p(h,null,g(e.weEmpleCodeUseScops,((e,s)=>(m(),f(Y,{key:s},{default:c((()=>[b(S(e.businessName),1)])),_:2},1024)))),128)),u(Q,{style:{"margin-left":"10px"},type:"primary",plain:"",onClick:e=>r.onSelectUser(s)},{default:c((()=>[b(S(e.weEmpleCodeUseScops.length?"修改":"选择")+"员工 ",1)])),_:2},1032,["onClick"])])),_:2},1024),u(I,{label:"工作周期"},{default:c((()=>[u(te,{modelValue:e.weekday,"onUpdate:modelValue":s=>e.weekday=s,onChange:e=>r.checkStartEnd(e,s)},{default:c((()=>[u(se,{label:1,disabled:0===s},{default:c((()=>[b("周一")])),_:2},1032,["disabled"]),u(se,{label:2,disabled:0===s},{default:c((()=>[b("周二")])),_:2},1032,["disabled"]),u(se,{label:3,disabled:0===s},{default:c((()=>[b("周三")])),_:2},1032,["disabled"]),u(se,{label:4,disabled:0===s},{default:c((()=>[b("周四")])),_:2},1032,["disabled"]),u(se,{label:5,disabled:0===s},{default:c((()=>[b("周五")])),_:2},1032,["disabled"]),u(se,{label:6,disabled:0===s},{default:c((()=>[b("周六")])),_:2},1032,["disabled"]),u(se,{label:7,disabled:0===s},{default:c((()=>[b("周日")])),_:2},1032,["disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024),u(I,{label:"在线时间"},{default:c((()=>[u(le,{style:{width:"40%"},modelValue:e.startDate,"onUpdate:modelValue":s=>e.startDate=s,disabled:0===s,start:"00:00",end:"23:59",step:"00:30","max-time":e.endDate,onChange:e=>r.checkStartEnd(e,s),placeholder:"任意时间点"},null,8,["modelValue","onUpdate:modelValue","disabled","max-time","onChange"]),b(" - "),u(le,{style:{width:"40%"},start:"00:00",end:"23:59",step:"00:30","min-time":e.startDate,onChange:e=>r.checkStartEnd(e,s),modelValue:e.endDate,"onUpdate:modelValue":s=>e.endDate=s,disabled:0===s,placeholder:"任意时间点"},null,8,["min-time","onChange","modelValue","onUpdate:modelValue","disabled"])])),_:2},1024)])),_:2},1024)))),128)),n("div",W,[u(Q,{type:"primary",plain:"",onClick:r.onAddRoster},{default:c((()=>[b("添加工作周期")])),_:1},8,["onClick"])])])),_:1})):y("",!0),u(I,null,{default:c((()=>[u(Q,{onClick:s[9]||(s[9]=e=>o.active--)},{default:c((()=>[b("上一步")])),_:1}),u(Q,{type:"primary",onClick:s[10]||(s[10]=e=>r.nextStep(o.active+1))},{default:c((()=>[b("下一步")])),_:1})])),_:1})])),_:1},8,["rules","model"])):y("",!0),2==o.active?(m(),p(h,{key:2},[n("div",P,[$,u(J,{"label-position":"right","label-width":"100px"},{default:c((()=>[u(I,{style:{"margin-bottom":"10px"},label:"欢迎语类型"},{default:c((()=>[u(Z,{modelValue:o.form.qrWelcomeOpen,"onUpdate:modelValue":s[13]||(s[13]=e=>o.form.qrWelcomeOpen=e)},{default:c((()=>[u(K,{label:1},{default:c((()=>[b("不发送欢迎语")])),_:1}),u(K,{label:2},{default:c((()=>[b(" 活码欢迎语 "),2==o.form.qrWelcomeOpen?(m(),p("div",G,[u(se,{modelValue:o.form.qrPriorityUserWelcome,"onUpdate:modelValue":s[12]||(s[12]=e=>o.form.qrPriorityUserWelcome=e),"true-label":0,"false-label":1},{default:c((()=>[b(" 如果员工有员工欢迎语，则优先发送员工欢迎语 "),u(Q,{text:"",size:"default",onClick:s[11]||(s[11]=s=>e.$router.push({name:"templateWelAdd",query:{tplType:2}}))},{default:c((()=>[b(" 去设置 ")])),_:1})])),_:1},8,["modelValue"])])):y("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),1==o.form.qrWelcomeOpen?(m(),p(h,{key:0},[u(Q,{onClick:s[14]||(s[14]=e=>o.active--)},{default:c((()=>[b("上一步")])),_:1}),u(Q,{type:"primary",size:"default",onClick:s[15]||(s[15]=e=>r.submit())},{default:c((()=>[b("确定")])),_:1})],64)):(m(),f(re,{key:1,moduleType:4,otherType:1,onUpdate:s[16]||(s[16]=e=>o.active=1),onSubmit:r.getWelData,baseData:o.materialData,isTransData:"",showModle:!0},null,8,["onSubmit","baseData"]))],64)):y("",!0)]),u(ae,{visible:o.dialogVisibleSelectTag,"onUpdate:visible":s[17]||(s[17]=e=>o.dialogVisibleSelectTag=e),selected:o.selectedTagList,onSuccess:r.submitSelectTag},null,8,["visible","selected","onSuccess"]),(m(),f(ie,{key:o.form.qrType,defaultValues:o.selectedUserList,visible:o.dialogVisibleSelectUser,"onUpdate:visible":s[18]||(s[18]=e=>o.dialogVisibleSelectUser=e),title:"选择使用员工",isOnlyLeaf:!0,isSigleSelect:1==o.form.qrType,onSuccess:r.selectedUser},null,8,["defaultValues","visible","isSigleSelect","onSuccess"])),(m(),f(ie,{key:o.form.qrType+"-only",defaultValues:o.selectedSpareUserList,visible:o.dialogVisibleSelectSpareUser,"onUpdate:visible":s[19]||(s[19]=e=>o.dialogVisibleSelectSpareUser=e),title:"选择使用备用员工",isOnlyLeaf:!0,isSigleSelect:1==o.form.qrType,onSuccess:r.selectedSpareUser},null,8,["defaultValues","visible","isSigleSelect","onSuccess"]))])}],["__scopeId","data-v-346b8c2b"]]);export{z as default};
