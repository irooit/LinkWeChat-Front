import{_ as e}from"../index-044285d2.js";import{_ as t}from"./quill-image-resize-module-c051113e.js";import{d as a,V as s,c as i,T as r,U as o,X as l,a as n,Z as d,O as u,ad as p,ae as m,K as y,_ as h,P as c,aU as g,ai as j,aq as q,o as f,Y as b}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const v=a({components:{ChartLine:g((()=>e((()=>import("./ChartLine-b009fc4d.js")),["assets/js/ChartLine-b009fc4d.js","assets/js/echarts-8e7b9cd7.js","assets/js/tslib-a4e99503.js","assets/js/zrender-da4e2cf7.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/js/lodash.merge-f1a4e0c2.js","assets/css/ChartLine-9d5ca891.css"]))),ChartBar:g((()=>e((()=>import("./ChartBar-39a01942.js")),["assets/js/ChartBar-39a01942.js","assets/js/echarts-8e7b9cd7.js","assets/js/tslib-a4e99503.js","assets/js/zrender-da4e2cf7.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/js/lodash.merge-f1a4e0c2.js","assets/css/ChartBar-e0d67a11.css"]))),SearchTitle:g((()=>e((()=>import("./SearchTitle-ceb204ee.js")),["assets/js/SearchTitle-ceb204ee.js","assets/js/moment-8163541f.js","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/js/@vue-e400fd81.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/css/SearchTitle-44a42461.css"])))},props:{title:{},type:{type:String,default:"table"},params:{type:Object,default:()=>({})},request:{type:Function},isCreateRequest:{type:Boolean,default:!0},isTimeQuery:{type:Boolean},dealQueryFun:{type:Function,default:null},dealDataFun:{type:Function,default:null},dataKey:{type:String,default:"id"},requestExport:{type:Function,default:null},exportFileName:{type:String},legend:{type:[Array,String],default:null},option:{type:Object,default:null}},data:()=>({loading:!1,query:{pageNum:1,pageSize:10},data:[],xData:[],total:0,selectedIds:[]}),computed:{},watch:{},created(){this.isCreateRequest&&!this.isTimeQuery&&this.getList()},mounted(){},methods:{getList(e){this.loading=!0,"table"==this.type&&e&&(this.query.pageNum=e),Object.assign(this.query,this.params),this.dealQueryFun&&this.dealQueryFun(this.query);let t=JSON.parse(JSON.stringify(this.query));return t.dateRange?(t.beginTime=t.dateRange[0],t.endTime=t.dateRange[1]):this.isTimeQuery||(delete t.beginTime,delete t.endTime),delete t.dateRange,this.request(t).then((e=>{let{rows:t,total:a,data:s}=e,i=s||t;"table"==this.type?(this.dealDataFun&&this.dealDataFun(i,e),this.data=i,this.total=+a):this.dealDataFun&&this.dealDataFun(i,this.data,this.xData,e)})).catch((e=>{})).finally((()=>{this.loading=!1}))},reset(e){this.$refs[e].resetFields(),this.$emit("reset")},remove(e,t){var a,s;if(!e)return this.msgError("无可用接口服务");let i=t||(null==(s=null==(a=this.selectedIds)?void 0:a.join)?void 0:s.call(a,","));if(!i)return this.msgError("请选择需要删除的数据");this.$confirm().then((()=>(this.loading=!0,e(i).then((e=>{this.msgSuccess("删除成功"),this.getList()}))))).catch((e=>{})).finally((()=>{this.loading=!1}))},download(e,t,a="是否确认下载",s="zip"){e&&t&&this.$confirm(a).then((()=>{var t,a;return e(null==(a=null==(t=this.selectedIds)?void 0:t.join)?void 0:a.call(t,","))})).then((e=>{this.downloadBlob(e,t,s)})).catch((function(){}))},goRoute(e="aev",t){this.$router.push({path:e,query:"string"==typeof t?{id:t}:t})}}}),_={key:0,class:"g-card-title"},x={key:1,class:"RequestChartTable-operation"};const F=t(v,[["render",function(e,t,a,g,v,F){const D=j("SearchResetButton"),S=j("el-form"),T=j("SearchTitle"),$=j("el-button"),R=j("ChartLine"),C=j("ChartBar"),E=j("el-table-column"),L=j("el-table"),k=j("pagination"),I=q("loading");return s((f(),i("div",{class:c(["RequestChartTable",e.$slots.query||"g-card"])},[e.$slots.query?(f(),r(S,{key:0,model:e.query,ref:"queryForm",inline:"",class:"top-search"},{default:o((()=>[u(e.$slots,"query",p(m({query:e.query})),void 0,!0),h(D,{onSearch:t[0]||(t[0]=t=>e.getList(1)),onReset:t[1]||(t[1]=t=>e.reset("queryForm"))})])),_:3},8,["model"])):l("",!0),n("div",{class:c(e.$slots.query&&"g-card")},[e.title?(f(),i("div",_,d(e.title),1)):l("",!0),e.requestExport||e.isTimeQuery||e.$slots.queryMiddle||e.$slots.operation?(f(),i("div",x,[e.isTimeQuery?(f(),r(T,{key:0,style:{display:"inline-flex"},onSearch:t[2]||(t[2]=t=>(Object.assign(e.query,t),e.getList(1)))})):l("",!0),e.$slots.queryMiddle?(f(),r(S,{key:1,model:e.query,ref:"queryFormMiddle",inline:"",class:"query-wrap"},{default:o((()=>[u(e.$slots,"queryMiddle",p(m({query:e.query})),void 0,!0),h(D,{onSearch:t[3]||(t[3]=t=>e.getList(1)),onReset:t[4]||(t[4]=t=>e.reset("queryFormMiddle"))})])),_:3},8,["model"])):l("",!0),u(e.$slots,"operation",p(m({selectedIds:e.selectedIds})),void 0,!0),e.requestExport?(f(),r($,{key:2,class:"export fr",type:"primary",onClick:t[5]||(t[5]=t=>e.$exportData(e.requestExport.bind(null,e.query),e.exportFileName))},{default:o((()=>[b(" 导出 Excel ")])),_:1})):l("",!0)])):l("",!0),"lineChart"==e.type?(f(),r(R,{key:2,xData:e.xData,legend:e.legend,series:e.data,option:e.option},null,8,["xData","legend","series","option"])):"barChart".includes(e.type)?(f(),r(C,{key:3,xData:e.xData,series:e.data,option:e.option},null,8,["xData","series","option"])):"table"==e.type?(f(),i(y,{key:4},[u(e.$slots,"default",{data:e.data},void 0,!0),e.$slots.table?(f(),r(L,{key:0,data:e.data,onSelectionChange:t[6]||(t[6]=t=>e.selectedIds=t.map((t=>t[e.dataKey])))},{default:o((()=>[h(E,{type:"selection",width:"50",align:"center"}),u(e.$slots,"table",{},void 0,!0)])),_:3},8,["data"])):l("",!0),h(k,{style:{"margin-bottom":"-20px"},total:e.total,page:e.query.pageNum,"onUpdate:page":t[7]||(t[7]=t=>e.query.pageNum=t),limit:e.query.pageSize,"onUpdate:limit":t[8]||(t[8]=t=>e.query.pageSize=t),onPagination:t[9]||(t[9]=t=>e.getList())},null,8,["total","page","limit"])],64)):l("",!0)],2)],2)),[[I,e.loading]])}],["__scopeId","data-v-a7bdc531"]]);export{F as default};
