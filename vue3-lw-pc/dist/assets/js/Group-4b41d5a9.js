import{a as e,b as a,c as l}from"./sendRecord-284280d0.js";import{ai as t,aq as i,o,c as r,_ as s,U as d,a as p,K as n,a9 as u,T as g,Y as m,Z as c,R as h,V as y,$ as b}from"./@vue-e400fd81.js";import{_ as f}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const j={key:0,class:"tag-place"},q={class:"g-card"};const v=f({components:{},data:()=>({query:{pageNum:1,pageSize:10,userId:"",groupName:"",redEnvelopeType:"",beginTime:"",endTime:""},dateRange:[],total:0,list:[],multiSelect:[],loading:!1,dictStatusType:Object.freeze({0:"全部类型",1:"普通红包",2:"拼手气红包"}),dialogVisible:!1,cardData:[],dialog:{query:{pageNum:1,pageSize:10,chatId:""},loading:!1,total:0,list:[]},dialogVisibleSelectUser:!1,queryUser:[]}),watch:{},created(){this.getList()},methods:{getList(a){this.dateRange?[this.query.beginTime,this.query.endTime]=this.dateRange:(this.query.beginTime="",this.query.endTime=""),a&&(this.query.pageNum=a),this.loading=!0,e(this.query).then((({rows:e,total:a})=>{this.list=e,this.total=+a,this.loading=!1})).catch((()=>{this.loading=!1}))},resetQuery(){this.dateRange=[],this.queryUser=[],this.$refs.queryForm.resetFields(),this.getList(1)},exportData(){this.$confirm("确认导出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.loading=!0,a(this.query)))).then((e=>{this.download(e.msg)})).catch((e=>{})).finally((()=>{this.loading=!1}))},handleSelectionChange(e){this.multiSelect=e},view(e){let a=[{title:"群主",value:e.groupLeaderName,noArrow:!0},{title:"领取人数",value:e.receiveNum,noArrow:!0},{title:"剩余红包个数",value:e.surplusNum,noArrow:!0}];this.cardData=a,this.dialogVisible=!0,this.dialog.query.chatId=e.chatId,this.dialog.query.orderNo=e.orderNo,this.getListGroupUser(1)},getListGroupUser(e){e&&(this.dialog.query.pageNum=e),this.dialog.loading=!0,l(this.dialog.query).then((({rows:e,total:a})=>{this.dialog.list=e,this.dialog.total=+a,this.dialog.loading=!1})).catch((()=>{this.dialog.loading=!1}))}}},[["render",function(e,a,l,f,v,U){const V=t("el-tag"),_=t("el-form-item"),N=t("el-input"),w=t("el-option"),S=t("el-select"),T=t("el-date-picker"),k=t("el-button"),C=t("el-form"),z=t("el-table-column"),E=t("el-table"),x=t("pagination"),I=t("SelectUser"),L=t("CardGroupIndex"),D=t("el-dialog"),R=i("loading");return o(),r("div",null,[s(C,{inline:"","label-position":"right",model:v.query,"label-width":"",ref:"queryForm",class:"top-search"},{default:d((()=>[s(_,{label:"发放员工",prop:"userId"},{default:d((()=>[p("div",{class:"tag-input",onClick:a[0]||(a[0]=e=>v.dialogVisibleSelectUser=!0)},[v.queryUser.length?(o(!0),r(n,{key:1},u(v.queryUser,((e,a)=>(o(),g(V,{key:a},{default:d((()=>[m(c(e.name),1)])),_:2},1024)))),128)):(o(),r("span",j,"请选择"))])])),_:1}),s(_,{label:"领取客户群",prop:"groupName"},{default:d((()=>[s(N,{clearable:"",modelValue:v.query.groupName,"onUpdate:modelValue":a[1]||(a[1]=e=>v.query.groupName=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),s(_,{label:"全部类型",prop:"redEnvelopeType"},{default:d((()=>[s(S,{clearable:"",modelValue:v.query.redEnvelopeType,"onUpdate:modelValue":a[2]||(a[2]=e=>v.query.redEnvelopeType=e),placeholder:"请选择"},{default:d((()=>[(o(!0),r(n,null,u(v.dictStatusType,((e,a)=>(o(),g(w,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(_,{label:"发放时间"},{default:d((()=>[s(T,h({clearable:"",modelValue:v.dateRange,"onUpdate:modelValue":a[3]||(a[3]=e=>v.dateRange=e),"value-format":"YYYY-MM-DD",type:"daterange"},e.pickerOptions,{"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"}),null,16,["modelValue"])])),_:1}),s(_,{label:""},{default:d((()=>[s(k,{type:"primary",onClick:a[4]||(a[4]=e=>U.getList(1))},{default:d((()=>[m("查询")])),_:1}),s(k,{onClick:a[5]||(a[5]=e=>U.resetQuery())},{default:d((()=>[m("重置")])),_:1})])),_:1}),s(_,{style:{float:"right"}},{default:d((()=>[s(k,{type:"primary",onClick:a[6]||(a[6]=e=>U.exportData())},{default:d((()=>[m("导出Excel")])),_:1})])),_:1})])),_:1},8,["model"]),p("div",q,[y((o(),g(E,{data:v.list,onSelectionChange:U.handleSelectionChange},{default:d((()=>[s(z,{label:"发放员工",align:"center",prop:"userName","show-overflow-tooltip":!0}),s(z,{label:"领取客户群",align:"center",prop:"groupName",width:"120"}),s(z,{label:"红包类型",align:"center",prop:"redEnvelopeType"},{default:d((({row:e})=>[p("div",null,c(v.dictStatusType[e.redEnvelopeType]),1)])),_:1}),s(z,{label:"红包个数",align:"center",prop:"redEnvelopeNum"}),s(z,{label:"红包金额（元）",align:"center",prop:"redEnvelopeMoney"}),s(z,{label:"发放时间",align:"center",prop:"createTime"}),s(z,{label:"领取详情",align:"center"},{default:d((e=>[s(k,{text:"",onClick:a=>U.view(e.row)},{default:d((()=>[m("领取详情")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[R,v.loading]]),y(s(x,{total:v.total,page:v.query.pageNum,"onUpdate:page":a[7]||(a[7]=e=>v.query.pageNum=e),limit:v.query.pageSize,"onUpdate:limit":a[8]||(a[8]=e=>v.query.pageSize=e),onPagination:a[9]||(a[9]=e=>U.getList())},null,8,["total","page","limit"]),[[b,v.total>0]])]),s(I,{visible:v.dialogVisibleSelectUser,"onUpdate:visible":a[10]||(a[10]=e=>v.dialogVisibleSelectUser=e),title:"选择添加人",defaultValues:v.queryUser,onSuccess:a[11]||(a[11]=e=>{v.queryUser=e,v.query.userId=e.map((e=>e.userId)).join()})},null,8,["visible","defaultValues"]),s(D,{title:"领取详情",modelValue:v.dialogVisible,"onUpdate:modelValue":a[16]||(a[16]=e=>v.dialogVisible=e),width:""},{footer:d((()=>[p("div",null,[s(k,{type:"primary",onClick:a[15]||(a[15]=e=>v.dialogVisible=!1)},{default:d((()=>[m("确 定")])),_:1})])])),default:d((()=>[p("div",null,[s(L,{data:v.cardData},null,8,["data"]),y((o(),g(E,{data:v.dialog.list},{default:d((()=>[s(z,{label:"领取客户",align:"center",width:"120",prop:"customerName"}),s(z,{label:"领取金额（元）",align:"center",prop:"redEnvelopeMoney"}),s(z,{label:"领取时间",align:"center",prop:"createTime"}),s(z,{label:"交易订单号",align:"center",prop:"orderNo"})])),_:1},8,["data"])),[[R,v.dialog.loading]]),s(x,{total:v.dialog.total,page:v.dialog.query.pageNum,"onUpdate:page":a[12]||(a[12]=e=>v.dialog.query.pageNum=e),limit:v.dialog.query.pageSize,"onUpdate:limit":a[13]||(a[13]=e=>v.dialog.query.pageSize=e),onPagination:a[14]||(a[14]=e=>U.getListGroupUser())},null,8,["total","page","limit"])])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-6e2baf9f"]]);export{v as default};
