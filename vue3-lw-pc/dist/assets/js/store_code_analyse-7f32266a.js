import t from"./ChartBar-39a01942.js";import e from"./ChartLine-b009fc4d.js";import a from"./SearchTitleInStore-f74b0845.js";import{m as r,t as o,i,v as l,w as s}from"./store-1f3cfa19.js";import{a6 as n}from"../index-044285d2.js";import{_ as p}from"./quill-image-resize-module-c051113e.js";import{ai as d,aq as m,o as u,c as h,_ as c,a as b,V as g,T as j,U as v,Y as w}from"./@vue-e400fd81.js";import"./echarts-8e7b9cd7.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"./lodash.merge-f1a4e0c2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./moment-8163541f.js";const f={name:"store-code-statistics",components:{SearchTitle:a,ChartLine:e,ChartBar:t},data:()=>({exportLoading:!1,barLegend:["门店"],legend:["点击/扫码次数","进群客户数","退群客户数"],xdata:[],series:[],cardData:[{title:"点击/扫码总次数",tips:"进入门店群码页面的总人数（去重）",value:0,noArrow:!0},{title:"进群总客户数",tips:"成功添加门店客户群的客户数（去重）",value:0,noArrow:!0},{title:"退群总客户数",tips:"退出门店客户群的客户数（去重）",value:0,noArrow:!0},{title:"今日点击/扫码次数",tips:"今日进入门店群码页面的总人数（去重）",value:0,title1:"较前日",value1:0},{title:"今日进群客户数",tips:"今日成功添加门店客户群的客户数（去重）",value:0,title1:"较前日",value1:0},{title:"今日退群客户数",tips:"今日退出门店客户群的客户数（去重）",value:0,title1:"较前日",value1:0}],total:0,query:{pageSize:10,pageNum:1},tableList:[],loading:!1,searchData:{},bar:[],value:[],tableSearch:{}}),methods:{exportFn(){this.$confirm("确认导出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.exportLoading=!0,r(Object.assign({},this.query,this.tableSearch))))).then((t=>{n(t.data)})).catch((t=>{})).finally((()=>{this.exportLoading=!1}))},getTabTotalFn(){o().then((t=>{this.cardData[0].value=t.data.totalStoreGroupScannNumber,this.cardData[1].value=t.data.totalJoinGroupMemberNumber,this.cardData[2].value=t.data.totalExitGroupMemberNumber,this.cardData[3].value=t.data.tdStoreGroupScannNumber,this.cardData[3].value1=t.data.ydStoreGroupScannNumber,this.cardData[4].value=t.data.tdJoinGroupMemberNumber,this.cardData[4].value1=t.data.ydJoinGroupMemberNumber,this.cardData[5].value=t.data.tdExitGroupMemberNumber,this.cardData[5].value1=t.data.ydExitGroupMemberNumber}))},getLineData(t){i(t).then((t=>{this.xdata=[],this.series=[];let e=[],a=[],r=[];t.data&&t.data.length&&(t.data.forEach((t=>{this.xdata.push(t.dataTime),e.push(t.totalStoreGroupScannNumber),a.push(t.totalJoinGroupMemberNumber),r.push(t.totalExitGroupMemberNumber)})),this.series=[e,a,r])}))},getTop10Fn(t){l(t).then((t=>{t.data&&t.data.length&&(this.bar=[],this.value=[],t.data.forEach((t=>{this.bar.push(t.storeName),this.value.push(t.customerNumber)})))}))},getTableChangeSize(){this.loading=!0,s(Object.assign({},this.query,this.tableSearch)).then((t=>{this.tableList=t.rows,this.total=Number(t.total),this.loading=!1}))},getTableFn(t){this.loading=!0,this.tableSearch=t,s(Object.assign({},this.query,t)).then((t=>{this.tableList=t.rows,this.total=Number(t.total),this.loading=!1}))}},created(){this.getTabTotalFn()}},x={class:"g-card"},S=b("div",{class:"g-card-title"},"数据趋势",-1),N={class:"g-card"},y=b("div",{class:"g-card-title"},"门店新增客户Top10",-1),G={class:"g-card"},D=b("div",{class:"g-card-title"},"数据报表",-1),T={class:"mid-action"};const q=p(f,[["render",function(t,e,a,r,o,i){const l=d("CardGroupIndex"),s=d("search-title"),n=d("chart-line"),p=d("chart-bar"),f=d("el-button"),q=d("el-table-column"),L=d("el-table"),M=d("pagination"),C=m("loading");return u(),h("div",null,[c(l,{data:o.cardData},null,8,["data"]),b("div",x,[S,c(s,{showMore:!0,onSearch:i.getLineData},null,8,["onSearch"]),c(n,{style:{height:"300px"},legend:o.legend,xData:o.xdata,series:o.series},null,8,["legend","xData","series"])]),b("div",N,[y,c(s,{onSearch:i.getTop10Fn},null,8,["onSearch"]),c(p,{style:{height:"300px"},xData:o.bar,series:o.value,legend:o.barLegend},null,8,["xData","series","legend"])]),b("div",G,[D,b("div",T,[c(s,{showMore:!0,onSearch:i.getTableFn},null,8,["onSearch"]),g((u(),j(f,{type:"primary",onClick:i.exportFn},{default:v((()=>[w("导出Excel")])),_:1},8,["onClick"])),[[C,o.exportLoading]])]),g((u(),j(L,{data:o.tableList,style:{width:"100%"}},{default:v((()=>[c(q,{label:"日期",align:"center","min-width":"100",prop:"createTime","show-overflow-tooltip":""}),c(q,{label:"所属地区",align:"center","min-width":"100",prop:"area","show-overflow-tooltip":""}),c(q,{label:"门店名称",align:"center",prop:"storeName","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"点击/扫码总次数",align:"center",prop:"totalStoreGroupScannNumber","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"进群总客户数",align:"center",prop:"totalJoinGroupMemberNumber","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"退群总客户数",align:"center",prop:"totalExitGroupMemberNumber","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"今日点击/扫码总次数",align:"center",prop:"tdStoreGroupScannNumber","min-width":"120","show-overflow-tooltip":""}),c(q,{label:"今日进群客户数",align:"center",prop:"tdJoinGroupMemberNumber","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"今日退群客户数",align:"center",prop:"tdExitGroupMemberNumber","min-width":"100","show-overflow-tooltip":""}),c(q,{label:"操作",align:"center",fixed:"right",width:"180"},{default:v((({row:e})=>[c(f,{text:"",onClick:a=>t.$router.push({path:"detail",query:{id:e.storeCodeId}})},{default:v((()=>[w(" 详情 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[C,o.loading]]),c(M,{total:o.total,page:o.query.pageNum,"onUpdate:page":e[0]||(e[0]=t=>o.query.pageNum=t),limit:o.query.pageSize,"onUpdate:limit":e[1]||(e[1]=t=>o.query.pageSize=t),onPagination:e[2]||(e[2]=t=>i.getTableChangeSize())},null,8,["total","page","limit"])])])}]]);export{q as default};
