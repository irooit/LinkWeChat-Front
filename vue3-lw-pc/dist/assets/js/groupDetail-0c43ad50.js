import{Z as e}from"../index-044285d2.js";import{a,b as t,m as s}from"./group-e56f61ac.js";import{ai as i,aq as l,V as o,o as r,c as p,a as d,_ as n,Z as m,Y as g,T as u,X as c,U as h,$ as v,bl as y,bj as j}from"./@vue-e400fd81.js";import{_ as f}from"./quill-image-resize-module-c051113e.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const b={components:{},data:()=>({loading:!1,ids:[],multiple:!0,total:0,list:[],group:{},query:{pageNum:1,pageSize:10,chatId:void 0,name:void 0,delFlag:0},dictJoinGroupType:e,dialogVisible:!1,selectedTag:[],tagDialogType:{}}),created(){this.query.chatId=this.$route.query.chatId,this.getDetail(),this.getList()},methods:{getDetail(){a(this.query.chatId).then((({data:e})=>{e.tagIds&&(e.tagIds=e.tagIds.split(","),e.tags=e.tags.split(",")),this.group=e}))},getList(e){e&&(this.query.pageNum=e),this.loading=!1,t(this.query).then((e=>{this.list=e.rows,this.total=+e.total,this.loading=!1}))},resetForm(e){this.$refs.queryForm.resetFields(),this.getList(1)},handleSelectionChange(e){this.ids=e.map((e=>e.operId)),this.multiple=!e.length},makeTag(){let e=this.group;this.tagDialogType.type="";let a=[];e.tags&&e.tagIds&&(a=e.tags.map(((a,t)=>({name:a,tagName:a,tagId:e.tagIds[t]})))),this.selectedTag=a,this.dialogVisible=!0},submitSelectTag(e){this.loading=!0,s({chatId:this.query.chatId,tagIds:e.map((e=>e.tagId))}).then((e=>{200==e.code&&(this.loading=!1,this.getDetail(),this.msgSuccess("操作成功"))})).finally((()=>{this.loading=!1,this.dialogVisible=!1}))}}},q=e=>(y("data-v-02e973ab"),e=e(),j(),e),T={class:"flex"},I={class:"left g-card"},S={class:"flex aic"},k={class:"info-wrap"},x={style:{"margin-bottom":"15px","font-weight":"500"}},_={class:"info"},w=q((()=>d("span",{class:""},"创建时间：",-1))),N={class:"info",style:{flex:"1"}},V=q((()=>d("span",{class:""},"客群标签：",-1))),z={style:{display:"inline-block"}},D={class:"flex aic ac overview"},C={class:"value"},L=q((()=>d("div",{class:"key"},"群主",-1))),F=q((()=>d("span",{class:"line"},null,-1))),U={class:"value"},J=q((()=>d("div",{class:"key"},"群总人数",-1))),M=q((()=>d("span",{class:"line"},null,-1))),$={class:"value"},E=q((()=>d("div",{class:"key"},"客户总数",-1))),G=q((()=>d("span",{class:"line"},null,-1))),P={class:"value"},Z=q((()=>d("div",{class:"key"},"今日进群数",-1))),A={class:"g-card right",style:{margin:"0 0 0 var(--card-margin)"}},B=q((()=>d("div",{class:"g-title g-title-sub"},"群公告",-1))),K={style:{padding:"0 20px 20px"}},O={class:"g-card"};const X=f(b,[["render",function(e,a,t,s,y,j){const f=i("el-avatar"),b=i("TagEllipsis"),q=i("el-button"),X=i("el-input"),Y=i("el-form-item"),H=i("el-form"),Q=i("el-table-column"),R=i("el-table"),W=i("pagination"),ee=i("SelectTag"),ae=l("hasPermi"),te=l("loading");return o((r(),p("div",null,[d("div",T,[d("div",I,[d("div",S,[n(f,{size:50,style:{flex:"none"},src:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}),d("div",k,[d("div",x,m(y.group.groupName),1),d("div",_,[w,g(" "+m(y.group.createTime),1)]),d("div",N,[V,d("div",z,[y.group.tags?(r(),u(b,{key:0,list:y.group.tags,limit:"8"},null,8,["list"])):c("",!0)]),o((r(),u(q,{text:"",class:"ml10",onClick:a[0]||(a[0]=e=>j.makeTag())},{default:h((()=>[g(" 编辑标签 ")])),_:1})),[[ae,["customerManage/customer:makeTag"]]])])])]),d("div",D,[d("div",null,[d("div",C,m(y.group.groupLeaderName),1),L]),F,d("div",null,[d("div",U,m(y.group.memberNum||0),1),J]),M,d("div",null,[d("div",$,m(y.group.customerNum||0),1),E]),G,d("div",null,[d("div",P,m(y.group.toDayMemberNum||0),1),Z])])]),d("div",A,[B,d("div",K,m(y.group.notice||"未设置"),1)])]),n(H,{ref:"queryForm",inline:!0,model:y.query,"label-width":"70px",class:"top-search mt20"},{default:h((()=>[n(Y,{label:"成员名称",prop:"name"},{default:h((()=>[n(X,{modelValue:y.query.name,"onUpdate:modelValue":a[1]||(a[1]=e=>y.query.name=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1}),n(Y,{label:""},{default:h((()=>[n(q,{style:{"margin-left":"10px"},type:"primary",onClick:a[2]||(a[2]=e=>j.getList(1))},{default:h((()=>[g("查询")])),_:1}),n(q,{onClick:a[3]||(a[3]=e=>j.resetForm())},{default:h((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"]),d("div",O,[n(R,{data:y.list,onSelectionChange:j.handleSelectionChange},{default:h((()=>[n(Q,{width:"55"}),n(Q,{label:"群成员",prop:"name"},{default:h((e=>[g(m(e.row.name),1)])),_:1}),n(Q,{label:"进群时间",prop:"joinTime"}),n(Q,{label:"进群方式",prop:"joinScene"},{default:h((e=>[d("span",null,m(y.dictJoinGroupType[e.row.joinScene]),1)])),_:1})])),_:1},8,["data","onSelectionChange"]),o(n(W,{total:y.total,page:y.query.pageNum,"onUpdate:page":a[4]||(a[4]=e=>y.query.pageNum=e),limit:y.query.pageSize,"onUpdate:limit":a[5]||(a[5]=e=>y.query.pageSize=e),onPagination:a[6]||(a[6]=e=>j.getList())},null,8,["total","page","limit"]),[[v,y.total>0]])]),n(ee,{ref:"selectTag",type:"2",visible:y.dialogVisible,"onUpdate:visible":a[7]||(a[7]=e=>y.dialogVisible=e),title:y.tagDialogType.title,selected:y.selectedTag,onSuccess:j.submitSelectTag},null,8,["visible","title","selected","onSuccess"])])),[[te,y.loading]])}],["__scopeId","data-v-02e973ab"]]);export{X as default};
