import{h as e}from"./moment-8163541f.js";import{i as t,j as l,k as i}from"./circle-2faa2a32.js";import{_ as a}from"./quill-image-resize-module-c051113e.js";import{ai as o,aq as s,o as r,c as n,_ as p,U as d,Y as m,a as u,Z as c,V as h,T as y,K as g,a9 as f,X as b}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const v={class:"g-card"},j={class:"mid-action"},w={key:0,class:"desc"},T={key:1,class:"desc"},k=["src"],x={key:2},Y={style:{display:"inline-block","margin-right":"10px"}},_=["src"],D={style:{display:"inline-block","margin-right":"10px"}},q={style:{width:"100px",height:"100px"}},C={class:"img_list"},S={class:"dialog-footer"};const V=a({name:"friend-index",components:{},data:()=>({value1:[],dialogVisible:!1,userArray:[],name:"",query:{pageSize:10,pageNum:1,beginTime:"",endTime:"",creator:"",type:1},loading:!1,tableData:[],total:0,lastSyncTime:"",detailDialogVisible:!1,detail:{}}),methods:{setTimeChange(t){t?(this.query.beginTime=e(t[0]).format("YYYY-MM-DD"),this.query.endTime=e(t[1]).format("YYYY-MM-DD")):(this.query.beginTime="",this.query.endTime="")},detailFn(e){this.detailDialogVisible=!0,t(e).then((e=>{200===e.code&&(this.detail=e.data)}))},syncFn(){l({filterType:1}).then((e=>{200===e.code&&(this.msgSuccess(e.msg),this.getList(1))}))},getSelectUser(e){this.userArray=e,this.query.creator=this.userArray.map((function(e,t){return e.userId})).join(","),this.name=this.userArray.map((function(e,t){return e.name})).join(",")},resetQuery(){this.name="",this.query={pageSize:10,pageNum:1,beginTime:"",endTime:"",creator:"",type:1},this.userArray=[],this.value1=[],this.getList(1)},getList(e){e&&(this.query.pageNum=e),this.loading=!0,i(this.query).then((e=>{this.tableData=e.rows,this.lastSyncTime=e.lastSyncTime,this.total=Number(e.total),this.loading=!1})).catch((()=>{this.loading=!1}))}},mounted(){},created(){this.value1[1]=e(new Date).format("YYYY-MM-DD"),this.value1[0]=e(new Date).subtract(1,"months").format("YYYY-MM-DD"),this.query.beginTime=e(this.value1[0]).format("YYYY-MM-DD"),this.query.endTime=e(this.value1[1]).format("YYYY-MM-DD"),this.getList()}},[["render",function(e,t,l,i,a,V){const M=o("el-input"),U=o("el-form-item"),N=o("el-date-picker"),z=o("el-button"),A=o("el-form"),L=o("ButtonSync"),F=o("el-image"),I=o("el-table-column"),B=o("el-table"),K=o("pagination"),Q=o("SelectUser"),E=o("el-tag"),G=o("el-dialog"),J=s("loading");return r(),n("div",null,[p(A,{model:a.query,"label-position":"left",ref:"queryForm",inline:!0,"label-width":"",class:"top-search"},{default:d((()=>[p(U,{label:"选择创建人"},{default:d((()=>[p(M,{"model-value":a.name,readonly:"",onClick:t[0]||(t[0]=e=>a.dialogVisible=!0),placeholder:"请选择员工"},null,8,["model-value"])])),_:1}),p(U,{label:"时间范围"},{default:d((()=>[p(N,{clearable:"",modelValue:a.value1,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value1=e),format:"YYYY-MM-DD",onChange:V.setTimeChange,type:"daterange","range-separator":"——","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue","onChange"])])),_:1}),p(U,{"label-width":"0"},{default:d((()=>[p(z,{type:"primary",onClick:t[2]||(t[2]=e=>V.getList(1))},{default:d((()=>[m("查询")])),_:1}),p(z,{onClick:V.resetQuery},{default:d((()=>[m("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),u("div",v,[u("div",j,[p(L,{lastSyncTime:a.lastSyncTime,onClick:V.syncFn},{default:d((()=>[m("同步朋友圈")])),_:1},8,["lastSyncTime","onClick"]),a.lastSyncTime?(r(),n("div",w,"最近同步："+c(a.lastSyncTime),1)):(r(),n("div",T,"暂无记录，请手动点击同步"))]),h((r(),y(B,{ref:"table",data:a.tableData},{default:d((()=>[p(I,{"show-overflow-tooltip":"",prop:"content",label:"朋友圈内容"},{default:d((({row:e})=>["image"===e.contentType?(r(),y(F,{key:0,src:e.content,fit:"fill","preview-src-list":[e.content],style:{width:"100px",height:"100px"}},null,8,["src","preview-src-list"])):"video"===e.contentType?(r(),n("video",{key:1,style:{width:"100px",height:"100px"},src:e.content},null,8,k)):(r(),n("div",x,c(e.content),1))])),_:1}),p(I,{"show-overflow-tooltip":"",prop:"contentType",label:"类型"},{default:d((({row:e})=>[u("div",null,c("image"===e.contentType?"图片":"text"===e.contentType?"文本":"video"===e.contentType?"视频":"图文"),1)])),_:1}),p(I,{"show-overflow-tooltip":"",prop:"creator",label:"创建人"}),p(I,{"show-overflow-tooltip":"",prop:"createTime",width:"170px",label:"创建时间"}),p(I,{"show-overflow-tooltip":"",prop:"pointNum",label:"点赞数"}),p(I,{"show-overflow-tooltip":"",prop:"commentNum",label:"评论数"}),p(I,{label:"操作",align:"center",width:"100"},{default:d((({row:e})=>[p(z,{text:"",onClick:t=>V.detailFn(e.id)},{default:d((()=>[m("详情")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[J,a.loading]]),p(K,{total:a.total,page:a.query.pageNum,"onUpdate:page":t[3]||(t[3]=e=>a.query.pageNum=e),limit:a.query.pageSize,"onUpdate:limit":t[4]||(t[4]=e=>a.query.pageSize=e),onPagination:t[5]||(t[5]=e=>V.getList())},null,8,["total","page","limit"])]),p(Q,{visible:a.dialogVisible,"onUpdate:visible":t[6]||(t[6]=e=>a.dialogVisible=e),title:"组织架构",defaultValues:a.userArray,onSuccess:V.getSelectUser},null,8,["visible","defaultValues","onSuccess"]),p(G,{title:"详情",modelValue:a.detailDialogVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>a.detailDialogVisible=e),width:"40%"},{default:d((()=>[p(A,{"label-position":"right","label-width":"100px"},{footer:d((()=>[u("span",S,[p(z,{onClick:t[7]||(t[7]=e=>a.detailDialogVisible=!1)},{default:d((()=>[m("取 消")])),_:1}),p(z,{type:"primary",onClick:t[8]||(t[8]=e=>a.detailDialogVisible=!1)},{default:d((()=>[m("确 定")])),_:1})])])),default:d((()=>[(r(!0),n(g,null,f(a.detail.otherContent,((e,t)=>(r(),n(g,{key:t},["text"===e.annexType?(r(),y(U,{key:0,label:"内容："},{default:d((()=>[m(c(e.other),1)])),_:2},1024)):b("",!0),"video"===e.annexType?(r(),y(U,{key:1,label:" "},{default:d((()=>[u("div",Y,[u("video",{style:{width:"200px",height:"200px"},src:e.annexUrl,controls:""},null,8,_)])])),_:2},1024)):b("",!0),"link"===e.annexType?(r(),y(U,{key:2,label:" "},{default:d((()=>[u("div",D,[u("span",q,c(e.annexUrl),1)])])),_:2},1024)):b("",!0)],64)))),128)),p(U,{label:" "},{default:d((()=>[u("div",C,[(r(!0),n(g,null,f(a.detail.otherContent,((e,t)=>(r(),n("div",null,["image"===e.annexType?(r(),y(F,{key:0,class:"item",style:{width:"100px",height:"100px"},"preview-src-list":[e.annexUrl],src:e.annexUrl},null,8,["preview-src-list","src"])):b("",!0)])))),256))])])),_:1}),a.detail.pointCustomerName?(r(),y(U,{key:0,label:"点赞客户："},{default:d((()=>[(r(!0),n(g,null,f(a.detail.pointCustomerName.split(","),((e,t)=>(r(),y(E,{key:t},{default:d((()=>[m(c(e),1)])),_:2},1024)))),128))])),_:1})):b("",!0),a.detail.momentCustomerName?(r(),y(U,{key:1,label:"评论客户："},{default:d((()=>[(r(!0),n(g,null,f(a.detail.momentCustomerName.split(","),((e,t)=>(r(),y(E,{key:t},{default:d((()=>[m(c(e),1)])),_:2},1024)))),128))])),_:1})):b("",!0)])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-e73a7787"]]);export{V as default};
