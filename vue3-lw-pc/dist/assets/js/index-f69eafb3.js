import e from"./ChartBar-39a01942.js";import t from"./ChartLine-b009fc4d.js";import a from"./TimeSearchTitle-1df23228.js";import{l as i,m as o,n as s,o as l,p as r,q as n}from"./commodityManage-9fcb714b.js";import{d}from"../index-044285d2.js";import{_ as p}from"./quill-image-resize-module-c051113e.js";import{ai as m,aq as c,o as h,c as g,_ as u,a as b,V as v,T as j,U as w,Z as f,Y as T,bl as y,bj as x}from"./@vue-e400fd81.js";import"./echarts-8e7b9cd7.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"./lodash.merge-f1a4e0c2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./moment-8163541f.js";const D={name:"commodity-statistics",components:{SearchTitle:a,ChartLine:t,ChartBar:e},data:()=>({exportLoading:!1,legend:["订单总额(元)","退款总额(元)","净收入(元)"],xdata:[],series:[],cardData:[{title:"订单总数",tips:"所有商品全部的订单总数",value:0,noArrow:!0},{title:"订单总额(元)",tips:"所有商品全部的订单总额，精确到两位小数点",value:0},{title:"退款总额(元)",tips:"所有商品全部的退款总额，精确到两位小数点",value:0},{title:"净收入(元)",tips:"订单总额-退款总额，精确到两位小数点",value:0},{title:"今日订单总数",tips:"今日所有商品全部的订单总数",value:0,title1:"较昨日",value1:0},{title:"今日订单总额(元)",tips:"今日所有商品全部的订单总额，精确到两位小数点",value:0,title1:"较昨日",value1:0},{title:"今日退款总额(元)",tips:"今日所有商品全部的退款总额，精确到两位小数点",value:0,title1:"较昨日",value1:0},{title:"今日净收入(元)",tips:"今日订单总额-退款总额，精确到两位小数点",value:0,title1:"较昨日",value1:0}],total:0,query:{pageSize:10,pageNum:1},tableList:[],loading:!1,goodsTableLoading:!1,goodsTableList:[],memberTableLoading:!1,memberTableList:[],tableSearch:{}}),methods:{exportFn(){this.$confirm("确认导出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.exportLoading=!0,i(Object.assign({},this.tableSearch))))).then((e=>{if(!e)return;const t=new Blob([e],{type:"application/vnd.ms-excel"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,"商品分析");else{const e=URL.createObjectURL(t),a=document.createElement("a");a.style.display="none",a.href=e,a.download=d(new Date,"YYYY-MM-DD")+"_商品分析.xlsx",a.click(),URL.revokeObjectURL(a.href)}})).catch((e=>{})).finally((()=>{this.exportLoading=!1}))},getSceneTotalFn(){o().then((e=>{this.cardData[0].value=e.data.orderNum,this.cardData[1].value=e.data.totalFee,this.cardData[2].value=e.data.refundFee,this.cardData[3].value=e.data.netIncome,this.cardData[4].value=e.data.todayOrderNum,this.cardData[4].value1=e.data.orderNumComparedToYes,this.cardData[5].value=e.data.todayTotalFee,this.cardData[5].value1=e.data.totalFeeComparedToYes,this.cardData[6].value=e.data.todayRefundFee,this.cardData[6].value1=e.data.refundFeeComparedToYes,this.cardData[7].value=e.data.todayNetIncome,this.cardData[7].value1=e.data.netIncomeComparedToYes}))},getLineData(e){s({type:"customization",startDate:e.beginTime,endDate:e.endTime}).then((e=>{this.xdata=[],this.series=[];let t=[],a=[],i=[];this.xdata=e.data.xAxis.data,t=e.data.series[0].data,a=e.data.series[1].data,i=e.data.series[2].data,this.series=[t,a,i]}))},getGoodsTop5Fn(e){this.goodsTableLoading=!0,l({type:"customization",startDate:e.beginTime,endDate:e.endTime}).then((e=>{this.goodsTableList=e.data,this.goodsTableLoading=!1}))},getMemebersTop5Fn(e){this.memberTableLoading=!0,r({type:"customization",startDate:e.beginTime,endDate:e.endTime}).then((e=>{this.memberTableList=e.data,this.memberTableLoading=!1}))},getTableChangeSize(){this.loading=!0,n(Object.assign({},this.query,this.tableSearch)).then((e=>{this.tableList=e.rows,this.total=Number(e.total),this.loading=!1}))},getTableFn(e){this.loading=!0;let t={type:"customization",startDate:e.beginTime,endDate:e.endTime};this.tableSearch=t,n(Object.assign({},this.query,t)).then((e=>{this.tableList=e.rows,this.total=Number(e.total),this.loading=!1}))}},created(){this.$store.setBusininessDesc("\n\t\t\t     <div>全部商品及订单数据总览与数据分析。</div>\n\t\t\t   "),this.getSceneTotalFn()}},L=e=>(y("data-v-5b6bf2cd"),e=e(),x(),e),S={class:"g-card",style:{"margin-top":"0"}},F=L((()=>b("div",{class:"g-card-title"},"数据趋势",-1))),q={class:"column flex mt20"},z={class:"column-item g-card mr20"},C=L((()=>b("div",{class:"g-card-title"},"商品订单top5",-1))),N={style:{display:"flex"}},_={class:"limit_span"},B={class:"column-item"},O={class:"g-card"},U=L((()=>b("div",{class:"g-card-title"},"员工订单top5",-1))),Y={class:"g-card"},I=L((()=>b("div",{class:"g-card-title"},"数据报表",-1))),k={class:"mid-action"};const M=p(D,[["render",function(e,t,a,i,o,s){const l=m("CardGroupIndex"),r=m("search-title"),n=m("chart-line"),d=m("el-image"),p=m("el-table-column"),y=m("el-table"),x=m("el-button"),D=m("pagination"),L=c("loading");return h(),g("div",null,[u(l,{data:o.cardData},null,8,["data"]),b("div",S,[F,u(r,{onSearch:s.getLineData},null,8,["onSearch"]),u(n,{style:{height:"300px"},legend:o.legend,xData:o.xdata,series:o.series},null,8,["legend","xData","series"])]),b("div",q,[b("div",z,[C,u(r,{onSearch:s.getGoodsTop5Fn},null,8,["onSearch"]),v((h(),j(y,{data:o.goodsTableList,style:{width:"100%"}},{default:w((()=>[u(p,{label:"商品",align:"center",width:"200",prop:"xtime","show-overflow-tooltip":""},{default:w((({row:e})=>[b("div",N,[u(d,{style:{width:"50px",height:"50px","margin-right":"5px","flex-shrink":"0"},src:e.picture},null,8,["src"]),b("span",_,f(e.productDesc),1)])])),_:1}),u(p,{label:"订单总数",align:"center",prop:"orderNum","show-overflow-tooltip":""}),u(p,{label:"订单总额（元）",align:"center",prop:"totalFee","show-overflow-tooltip":""}),u(p,{label:"净收入（元）",align:"center",prop:"netIncome","show-overflow-tooltip":""})])),_:1},8,["data"])),[[L,o.goodsTableLoading]])]),b("div",B,[b("div",O,[U,u(r,{onSearch:s.getMemebersTop5Fn},null,8,["onSearch"]),v((h(),j(y,{data:o.memberTableList,style:{width:"100%"}},{default:w((()=>[u(p,{label:"员工",align:"center","min-width":"100",prop:"weUserName","show-overflow-tooltip":""}),u(p,{label:"订单总数",align:"center",prop:"orderNum","show-overflow-tooltip":""}),u(p,{label:"订单总额（元）",align:"center",prop:"totalFee","show-overflow-tooltip":""})])),_:1},8,["data"])),[[L,o.memberTableLoading]])])])]),b("div",Y,[I,b("div",k,[u(r,{showScene:!0,onSearch:s.getTableFn},null,8,["onSearch"]),v((h(),j(x,{type:"primary",onClick:s.exportFn},{default:w((()=>[T("导出Excel")])),_:1},8,["onClick"])),[[L,o.exportLoading]])]),v((h(),j(y,{data:o.tableList,style:{width:"100%"}},{default:w((()=>[u(p,{label:"日期",align:"center","min-width":"100",prop:"dateStr","show-overflow-tooltip":""}),u(p,{label:"订单总数",align:"center","min-width":"100",prop:"orderNum","show-overflow-tooltip":""}),u(p,{label:"订单总额（元）",align:"center",prop:"totalFee","min-width":"100","show-overflow-tooltip":""}),u(p,{label:"退款总额（元）",align:"center",prop:"refundFee","min-width":"100","show-overflow-tooltip":""}),u(p,{label:"净收入（元）",align:"center",prop:"netIncome","min-width":"100","show-overflow-tooltip":""})])),_:1},8,["data"])),[[L,o.loading]]),u(D,{total:o.total,page:o.query.pageNum,"onUpdate:page":t[0]||(t[0]=e=>o.query.pageNum=e),limit:o.query.pageSize,"onUpdate:limit":t[1]||(t[1]=e=>o.query.pageSize=e),onPagination:t[2]||(t[2]=e=>s.getTableChangeSize())},null,8,["total","page","limit"])])])}],["__scopeId","data-v-5b6bf2cd"]]);export{M as default};
