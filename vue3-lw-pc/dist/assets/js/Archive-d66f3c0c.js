import{i as t}from"./echarts-8e7b9cd7.js";import{z as e}from"../index-044285d2.js";import{m as a}from"./lodash.merge-f1a4e0c2.js";import{_ as s}from"./quill-image-resize-module-c051113e.js";import{ai as i,o,c as r,a as n,_ as l,U as p,bl as m,bj as d}from"./@vue-e400fd81.js";import u from"./TabContent-fa0fcd82.js";import{g as c,a as h}from"./conversationAnalysis-436e658e.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./group-e56f61ac.js";const g={ref:"chart",class:"chart-pie chart",key:"1"},j={class:"chart-pie chart",key:"2"},v={class:"cc"};const f={name:"",components:{TabContent:u,ChartPie:s({name:"ChartPie",components:{},props:{legend:{type:Array,default:()=>["新增客户"]},series:{type:Array,default:()=>[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]},option:{type:Object,default:null}},data:()=>({}),computed:{},watch:{series:{deep:!0,handler(){this.drawChart()}}},created(){},mounted(){this.drawChart()},methods:{drawChart(){var s;if(!(null==(s=this.series)?void 0:s.length))return;this.myChart=t(this.$refs.chart);let i={color:e,tooltip:{trigger:"item"},legend:{x:"center",y:"88%",type:"scroll",icon:"circle",itemWidth:8,itemHeight:8,tooltip:{show:!0},textStyle:{color:"#36363A",fontSize:12,lineHeight:14}},grid:{left:"3%",right:"3%",bottom:"20px",top:"30px",containLabel:!0},series:{type:"pie",radius:"50%",data:this.series,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}};this.option&&a(i,this.option),i&&this.myChart.setOption(i),new ResizeObserver((t=>{this.myChart.resize()})).observe(this.$refs.chart)}}},[["render",function(t,e,a,s,p,m){var d;const u=i("Empty");return(null==(d=a.series)?void 0:d.length)?(o(),r("div",g,null,512)):(o(),r("div",j,[n("div",v,[l(u)])]))}],["__scopeId","data-v-96201870"]])},data:()=>({loading:!1,query:{pageNum:void 0,pageSize:void 0},cardData:[],pieData:{},total:0,list:[]}),computed:{},watch:{},created(){this.getAnalysisArchive(),this.getList()},mounted(){},methods:{getAnalysisArchive(){this.loading=!0,c().then((({data:t})=>{t||(t={}),this.cardData=[{title:"开启会话存档员工",value:t.openUserCnt},{title:"未开启会话存档员工",value:t.notOpenUserCnt},{title:"已同意会话存档客户",value:t.openCustomerCnt},{title:"未同意会话存档客户",value:t.notOpenCustomerCnt}],this.pieData.staff=[{name:"开启",value:t.openUserCnt/(t.openUserCnt+t.notOpenUserCnt||1)*100},{name:"未开启",value:t.notOpenUserCnt/(t.openUserCnt+t.notOpenUserCnt||1)*100}],this.pieData.customer=[{name:"已同意",value:t.openCustomerCnt/(t.openCustomerCnt+t.notopenCustomerCnt||1)*100},{name:"未同意",value:t.notOpenCustomerCnt/(t.openCustomerCnt+t.notOpenCustomerCnt||1)*100}]})).catch((t=>{})).finally((()=>{this.loading=!1}))},getList(){this.loading=!0,h(this.query).then((({rows:t,total:e})=>{this.list=t,this.total=Number(e)})).catch((t=>{})).finally((()=>{this.loading=!1}))}}},C=t=>(m("data-v-4a21044d"),t=t(),d(),t),y={class:"g-card"},b=C((()=>n("div",{class:"g-card-title"},"数据占比",-1))),w=C((()=>n("div",{class:"ac"},"会话存档员工开启情况统计",-1))),U=C((()=>n("div",{class:"ac"},"会话存档客户同意情况统计",-1))),z={class:"g-card"},O=C((()=>n("div",{class:"g-card-title"},"会话存档同意明细",-1)));const q=s(f,[["render",function(t,e,a,s,m,d){const u=i("CardGroupIndex"),c=i("ChartPie"),h=i("el-col"),g=i("el-row"),j=i("el-table-column"),v=i("el-table"),f=i("pagination");return o(),r("div",null,[l(u,{data:m.cardData},null,8,["data"]),n("div",y,[b,l(g,{gutter:10},{default:p((()=>[l(h,{span:12},{default:p((()=>[l(c,{series:m.pieData.staff,option:{series:{tooltip:{valueFormatter:t=>t+"%"}}}},null,8,["series","option"]),w])),_:1}),l(h,{span:12},{default:p((()=>[l(c,{series:m.pieData.customer,option:{series:{tooltip:{valueFormatter:t=>t+"%"}}}},null,8,["series","option"]),U])),_:1})])),_:1})]),n("div",z,[O,l(v,{data:m.list,style:{width:"100%"}},{default:p((()=>[l(j,{align:"center",prop:"userName",label:"存档员工"}),l(j,{align:"center",prop:"customerName",label:"客户"}),l(j,{align:"center",prop:"openChatTime",label:"同意时间"})])),_:1},8,["data"]),l(f,{total:m.total,page:m.query.pageNum,"onUpdate:page":e[0]||(e[0]=t=>m.query.pageNum=t),limit:m.query.pageSize,"onUpdate:limit":e[1]||(e[1]=t=>m.query.pageSize=t),onPagination:e[2]||(e[2]=t=>d.getList())},null,8,["total","page","limit"])])])}],["__scopeId","data-v-4a21044d"]]);export{q as default};
