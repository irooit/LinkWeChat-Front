import t from"./chatList-cf9d0aa9.js";import{g as e}from"./content-6f300c2d.js";import{V as a}from"./ChatContent-f938bb33.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import{F as s,B as o}from"../index-044285d2.js";import{_ as i}from"./quill-image-resize-module-c051113e.js";import{ai as r,aq as l,V as p,o as n,c as m,a as c,K as d,T as u,U as h,_ as f,Y as g,Z as j,X as y}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./benz-amr-recorder-259e7c16.js";const b={class:"chatListClassTab"},w={class:"list"},_={key:0},v={key:1};const C=i({name:"",components:{chatList:t,Voice:a},props:{queryChat:{type:Object,default:()=>({})},type:{type:[String,Number],default:0}},data:()=>({loading:!1,currentPage:1,list:[],total:0}),computed:{},watch:{queryChat(){this.getList(1)},type(){this.getList(1)}},created(){this.getList(1)},mounted(){},methods:{setDate:(t,e)=>s(e,o(t)),getList(t){this.loading=!0;let a={msgType:"all"==this.type?"":this.type,pageSize:"10",orderByColumn:"t.msg_time",isAsc:"desc"};t&&(a.pageNum=this.currentPage=t),Object.assign(a,this.queryChat),e(a).then((t=>{this.total=~~t.total,this.list=t.rows,this.loading=!1})).catch((t=>{this.loading=!1}))},filterSize(t){return t?t<e(1)?t+" B":t<e(2)?(t/e(1)).toFixed(2)+" KB":t<e(3)?(t/e(2)).toFixed(2)+" MB":t<e(4)?(t/e(3)).toFixed(2)+" GB":(t/e(4)).toFixed(2)+" TB":"";function e(t){return Math.pow(1024,t)}},downloadFile(t){this.$confirm("是否确认下载该文件?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((e=>{this.downloadNet(JSON.parse(t.contact).attachment,JSON.parse(t.contact).filename)})).catch((function(){}))}}},[["render",function(t,e,a,s,o,i){const C=r("chatList"),k=r("el-table-column"),q=r("el-button"),T=r("el-table"),x=r("voice"),S=r("el-empty"),z=r("el-pagination"),B=l("loading");return p((n(),m("div",b,[c("div",w,[o.list.length?(n(),m(d,{key:0},["all,image,video,link,".includes(a.type)?(n(),u(C,{key:0,queryChat:a.queryChat,data:o.list},null,8,["queryChat","data"])):"file"==a.type?(n(),u(T,{key:1,data:o.list,stripe:"",style:{width:"100%"},"header-cell-style":{background:"#fff"}},{default:h((()=>[f(k,{label:"名称"},{default:h((({row:t})=>[g(j(JSON.parse(t.contact).filename),1)])),_:1}),f(k,{label:"大小"},{default:h((({row:t})=>[g(j(i.filterSize(JSON.parse(t.contact).filesize)),1)])),_:1}),f(k,{label:"来源"},{default:h((({row:t})=>[g(j(t.name),1)])),_:1}),f(k,{prop:"name",label:"发送时间"},{default:h((({row:t})=>[g(j(t.msgTime),1)])),_:1}),f(k,{prop:"action",label:"操作"},{default:h((({row:t})=>[f(q,{text:"",onClick:e=>i.downloadFile(t)},{default:h((()=>[g("下载")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):"voice,meeting_voice_call".includes(a.type)?(n(),u(T,{key:2,data:o.list,stripe:"","header-cell-style":{background:"#fff"}},{default:h((()=>[f(k,{prop:"date",label:"发起人"},{default:h((({row:t})=>[g(j(t.name),1)])),_:1}),f(k,{prop:"name",label:"通话时间"},{default:h((({row:t})=>[g(j(t.msgTime),1)])),_:1}),f(k,{prop:"address",label:"时长","min-width":"50"},{default:h((({row:t})=>["voice"==t.msgType?(n(),m("span",_,j(JSON.parse(t.contact).play_length)+"s",1)):(n(),m("span",v,j(i.setDate(JSON.parse(t.contact).endtime,t.msgTime)),1))])),_:1}),f(k,{prop:"msgType",label:"类型"},{default:h((({row:t})=>[g(j("voice"===t.msgType?"语音消息":"语音通话"),1)])),_:1}),f(k,{prop:"address","min-width":"80",label:"操作"},{default:h((({row:t})=>[f(x,{amrUrl:JSON.parse(t.contact).attachment},null,8,["amrUrl"])])),_:1})])),_:1},8,["data"])):y("",!0)],64)):(n(),u(S,{key:1,"image-size":100}))]),o.total?(n(),u(z,{key:0,layout:"prev, pager, next","current-page":o.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>o.currentPage=t),onCurrentChange:i.getList,total:o.total},null,8,["current-page","onCurrentChange","total"])):y("",!0)])),[[B,o.loading]])}],["__scopeId","data-v-afab6984"]]);export{C as default};
