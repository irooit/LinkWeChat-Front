import{g as e}from"./enterpriseId-1d1ed446.js";import{r as t,i,j as l}from"./api-3d61a394.js";import{ai as a,aq as s,o,c as n,_ as r,U as d,Y as p,a as m,T as c,Z as u,P as h,V as g,$ as f,bl as y,bj as j}from"./@vue-e400fd81.js";import{_ as k}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const v={components:{},data:()=>({query:{pageNum:1,pageSize:10,linkName:""},selected:[],loading:!1,list:[],total:0,customerLinkMargin:0,showAnimate:!1}),watch:{},mounted(){},created(){this.getListFn(),this.$store.setBusininessDesc("\n        <div>唯一可以从全域添加好友的官方链路</div>\n      "),this.getData()},destroyed(){},methods:{getData(){e().then((e=>{this.customerLinkMargin=Number(e.data.customerLinkMargin)}))},refreshFn(){this.showAnimate=!0,t().then((e=>{200==e.code&&(this.getData(),this.msgSuccess("操作成功")),this.showAnimate=!1}))},copyFn(e){const t=document.createElement("input");t.style.cssText="opacity: 0;",t.type="text",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),this.$message({message:"复制成功",type:"success"})},getListFn(){const e=Object.assign({},this.query);this.loading=!0,i(e).then((e=>{200===e.code&&(this.list=e.rows,this.total=parseInt(e.total)),this.loading=!1})).catch((()=>{this.loading=!1}))},handleSearch(){this.query.pageNum=1,this.getListFn()},resetQuery(){this.$refs.queryForm.resetFields(),this.$nextTick((()=>{this.handleSearch()}))},handleRemove(e,t){if("mult"===e&&!this.selected.length)return void this.msgInfo("请选择要删除项！");const i=t||this.selected.join(",");this.$confirm("是否确认删除当前获客链接？删除后链接立即停用，该操作不可撤销，请谨慎操作。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l(i).then((e=>{200===e.code&&this.getListFn()}))})).catch((()=>{}))},handleSelectionChange(e){this.selected=e.map((e=>e.id))}}},b=e=>(y("data-v-839b3374"),e=e(),j(),e),_={class:"g-card"},C={class:"mid-action"},q={style:{display:"flex","align-items":"end"}},x=b((()=>m("div",null,"最多创建3000个链接。",-1))),F={style:{"margin-left":"10px","font-size":"12px"}},w={style:{"font-size":"20px"}},S=b((()=>m("div",null,"企微官方的获客长链接，可直接使用",-1))),L=b((()=>m("div",null,"系统生成的获客短链，满足短链场景",-1)));const U=k(v,[["render",function(e,t,i,l,y,j){const k=a("el-input"),v=a("el-form-item"),b=a("el-button"),U=a("el-form"),N=a("el-popover"),z=a("el-icon-Refresh"),$=a("el-table-column"),I=a("el-icon-QuestionFilled"),M=a("el-table"),T=a("pagination"),A=s("loading");return o(),n("div",null,[r(U,{ref:"queryForm",model:y.query,inline:"",class:"top-search","label-position":"left"},{default:d((()=>[r(v,{label:"链接名称",prop:"linkName"},{default:d((()=>[r(k,{modelValue:y.query.linkName,"onUpdate:modelValue":t[0]||(t[0]=e=>y.query.linkName=e),placeholder:"请输入链接名称"},null,8,["modelValue"])])),_:1}),r(v,{label:""},{default:d((()=>[r(b,{type:"primary",onClick:j.handleSearch},{default:d((()=>[p("查询")])),_:1},8,["onClick"]),r(b,{onClick:j.resetQuery},{default:d((()=>[p("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),m("div",_,[m("div",C,[m("div",q,[y.customerLinkMargin?(o(),c(b,{key:0,type:"primary",onClick:t[1]||(t[1]=t=>e.$router.push("./add"))},{default:d((()=>[p("新建链接")])),_:1})):(o(),c(N,{key:1,placement:"top",trigger:"hover"},{reference:d((()=>[m("div",null,[r(b,{type:"primary",disabled:""},{default:d((()=>[p("新建链接")])),_:1})])])),default:d((()=>[x])),_:1})),m("span",F,[p("剩余可用量 "),m("span",w,[p(u(y.customerLinkMargin)+" ",1),m("span",{class:h(["refresh",{rotate360:y.showAnimate}]),onClick:t[2]||(t[2]=(...e)=>j.refreshFn&&j.refreshFn(...e))},[r(z,{class:"el-icon-refresh"})],2)])])]),r(b,{type:"primary",plain:"",disabled:0===y.selected.length,onClick:t[3]||(t[3]=e=>j.handleRemove("mult"))},{default:d((()=>[p("批量删除")])),_:1},8,["disabled"])]),g((o(),c(M,{data:y.list,onSelectionChange:j.handleSelectionChange},{default:d((()=>[r($,{type:"selection",width:"55",align:"center"}),r($,{prop:"linkName",label:"链接名称",align:"center"}),r($,{prop:"linkUrl",label:"获客链接",align:"center",minWidth:"130"},{header:d((()=>[r(N,{placement:"top",trigger:"hover"},{reference:d((()=>[m("div",null,[p(" 获客链接 "),r(I,{class:"el-icon-QuestionFilled"})])])),default:d((()=>[S])),_:1})])),default:d((({row:e})=>[m("div",null,[p(u(e.linkUrl)+" ",1),r(b,{text:"",onClick:t=>j.copyFn(e.linkUrl)},{default:d((()=>[p("复制")])),_:2},1032,["onClick"])])])),_:1}),r($,{prop:"linkShortUrl",label:"获客短链",align:"center",minWidth:"130"},{header:d((()=>[r(N,{placement:"top",trigger:"hover"},{reference:d((()=>[m("div",null,[p(" 获客短链 "),r(I,{class:"el-icon-QuestionFilled"})])])),default:d((()=>[L])),_:1})])),default:d((({row:e})=>[m("div",null,[p(u(e.linkShortUrl)+" ",1),r(b,{text:"",onClick:t=>j.copyFn(e.linkShortUrl)},{default:d((()=>[p("复制")])),_:2},1032,["onClick"])])])),_:1}),r($,{prop:"updateTime",label:"最近更新",align:"center",width:"160"}),r($,{label:"操作",align:"center",width:"200",fixed:"right"},{default:d((({row:t})=>[r(b,{text:"",onClick:i=>e.$router.push({path:"detail",query:{linkId:t.linkId,id:t.id}})},{default:d((()=>[p(" 详情统计 ")])),_:2},1032,["onClick"]),r(b,{text:"",onClick:i=>e.$router.push({path:"add",query:{id:t.id}})},{default:d((()=>[p(" 编辑 ")])),_:2},1032,["onClick"]),r(b,{text:"",onClick:e=>j.handleRemove("single",t.id)},{default:d((()=>[p("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[A,y.loading]]),g(r(T,{total:y.total,page:y.query.pageNum,"onUpdate:page":t[4]||(t[4]=e=>y.query.pageNum=e),limit:y.query.pageSize,"onUpdate:limit":t[5]||(t[5]=e=>y.query.pageSize=e),onPagination:j.getListFn},null,8,["total","page","limit","onPagination"]),[[f,y.total>0]])])])}],["__scopeId","data-v-839b3374"]]);export{U as default};
