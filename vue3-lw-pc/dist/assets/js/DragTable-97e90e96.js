import{S as e}from"./sortablejs-b0ad9b27.js";import{_ as t}from"./quill-image-resize-module-c051113e.js";import{ai as a,o as l,c as s,_ as i,U as n,T as d,X as o,a as c,Z as r,Y as p,bl as y,bj as m}from"./@vue-e400fd81.js";const g={props:{tableData2:{type:Array,default:[]},dargAble:{type:Boolean,default:!1},isDeatail:{type:Boolean,default:!1}},data:()=>({tableData:[]}),watch:{tableData2:{handler(e){this.tableData=JSON.parse(JSON.stringify(e)),this.tableData.forEach(((e,t)=>{e.delId=t}))},immediate:!0,deep:!0}},mounted(){this.dargAble&&this.dragSort()},methods:{preview(e){window.open(window.lwConfig.PRIVIEW_PATH+e.id+"&otherModle="+!0,"_blank")},filType(e){let t=JSON.parse(JSON.stringify(e));t=t.split(".");let a=t[t.length-1];return"pdf"===a?"pdf":["doc","docx"].includes(a)?"word":["ppt","pptx","pps","pptsx"].includes(a)?"ppt":""},edit(e){this.$emit("getEdit",e)},remove(e){this.tableData=this.tableData.filter((t=>t.delId!=e)),this.$emit("setData",this.tableData)},coverContent:(e,t)=>(e&&e.length>t&&(e=e.substr(0,t)+"..."),e),deltype(e){switch(e){case"4":return"文本";case"0":return"图片";case"9":return"图文";case"11":return"小程序";case"12":return"文章";case"2":return"视频";case"3":return"文件";case"5":return"海报";case"19":return"外链"}},dragSort(){const t=this.$refs.singleTable.$el.querySelectorAll(".el-table__body-wrapper  table > tbody")[0];this.sortable=e.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:e=>{const t=this.tableData.splice(e.oldIndex,1)[0];this.tableData.splice(e.newIndex,0,t),this.$emit("setData",this.tableData);let a,l;this.tableData[e.newIndex].id;a=this.tableData[e.newIndex-1]?this.tableData[e.newIndex-1].id:"",l=this.tableData[e.newIndex+1]?this.tableData[e.newIndex+1].id:""}})}}},u={class:"title"},b={key:0},f=["innerHTML"],h={class:"twosplice"},v={key:1},w={key:2,style:{display:"flex"}},k={key:1,class:"icon-style"},_={class:"twosplice distStyle"},T={key:3,style:{display:"flex"}},x={key:1,class:"icon-style"},D={class:"twosplice distStyle"},C={key:4},U={key:5,style:{display:"flex"}},I={key:1,class:"icon-style"},S={class:"twosplice distStyle"},z={key:6,style:{display:"flex"}},N={class:"twosplice distStyle"},A={key:7,style:{display:"flex"}},$={key:0,class:"icon-style"},j={class:"twosplice distStyle"},O={key:8,style:{display:"flex"}},E={class:"twosplice distStyle"},J=["href"],H=["href"],L=(e=>(y("data-v-36089ef6"),e=e(),m(),e))((()=>c("span",null,"预览",-1)));const M=t(g,[["render",function(e,t,y,m,g,M){const P=a("svg-icon"),q=a("el-table-column"),B=a("el-tooltip"),F=a("el-image"),R=a("el-button"),V=a("el-table");return l(),s("div",null,[i(V,{data:g.tableData,ref:"singleTable","highlight-current-row":"","row-key":"id",class:"load_table"},{default:n((()=>[y.dargAble?(l(),d(q,{key:0,label:"",width:"50",align:"left"},{default:n((()=>[i(P,{icon:"dragIcon"})])),_:1})):o("",!0),i(q,{prop:"name",label:"素材",align:"left"},{default:n((({row:e})=>[i(B,{content:e.materialName,placement:"top",disabled:!e.materialName||e.materialName.length<12},{default:n((()=>[c("span",u,r(M.coverContent(e.materialName,12)),1)])),_:2},1032,["content","disabled"]),"4"===e.mediaType?(l(),s("div",b,[i(B,{placement:"top",disabled:!e.content||e.content.length<50},{content:n((()=>[c("p",{style:{"white-space":"pre-line"},innerHTML:e.content},null,8,f)])),default:n((()=>[c("span",h,r(M.coverContent(e.content,50)),1)])),_:2},1032,["disabled"])])):o("",!0),"0"===e.mediaType?(l(),s("div",v,[i(F,{src:e.materialUrl,fit:"contain",class:"imgsize"},null,8,["src"])])):o("",!0),"9"===e.mediaType?(l(),s("div",w,[e.coverUrl?(l(),d(F,{key:0,src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])):(l(),s("div",k,[i(P,{class:"icon-style",icon:"imgText"})])),i(B,{content:e.content,placement:"top",disabled:!e.content||e.content.length<50},{default:n((()=>[c("span",_,r(M.coverContent(e.content,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"19"===e.mediaType?(l(),s("div",T,[e.coverUrl?(l(),d(F,{key:0,src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])):(l(),s("div",x,[i(P,{class:"icon-style",icon:"outLine"})])),i(B,{content:e.content,placement:"top",disabled:!e.content||e.content.length<50},{default:n((()=>[c("span",D,r(M.coverContent(e.content,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"11"===e.mediaType?(l(),s("div",C,[i(F,{src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])])):o("",!0),"12"===e.mediaType?(l(),s("div",U,[e.coverUrl?(l(),d(F,{key:0,src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])):(l(),s("div",I,[i(P,{class:"icon-style",icon:"article"})])),i(B,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[c("span",S,r(M.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"2"===e.mediaType?(l(),s("div",z,[i(F,{src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"]),i(B,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[c("span",N,r(M.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"3"===e.mediaType?(l(),s("div",A,[e.materialUrl?(l(),s("div",$,[i(P,{class:"icon-style",icon:e.materialUrl?M.filType(e.materialUrl):""},null,8,["icon"])])):o("",!0),i(B,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[c("span",j,r(M.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"5"===e.mediaType?(l(),s("div",O,[i(F,{src:e.materialUrl,fit:"contain",class:"imgsize"},null,8,["src"]),i(B,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[c("span",E,r(M.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0)])),_:1}),i(q,{prop:"mediaType",width:"",label:"类型",align:"center"},{default:n((({row:e})=>[c("div",null,r(M.deltype(e.mediaType)),1)])),_:1}),i(q,{prop:"height",label:"操作",align:"center"},{default:n((t=>[["2","5","9"].includes(t.row.mediaType)?(l(),d(R,{key:0,text:""},{default:n((()=>[c("a",{href:t.row.materialUrl,target:"_blank"},"预览",8,J)])),_:2},1024)):o("",!0),"3"==t.row.mediaType?(l(),d(R,{key:1,text:""},{default:n((()=>[c("a",{href:e.$previewFile(t.row.materialUrl),target:"_blank"},"预览",8,H)])),_:2},1024)):o("",!0),"12"==t.row.mediaType?(l(),d(R,{key:2,text:"",onClick:e=>M.preview(t.row)},{default:n((()=>[L])),_:2},1032,["onClick"])):o("",!0),1!=t.row.moduleType?(l(),d(R,{key:3,text:"",onClick:e=>M.edit(t.row)},{default:n((()=>[p("编辑")])),_:2},1032,["onClick"])):o("",!0),y.isDeatail?o("",!0):(l(),d(R,{key:4,text:"",onClick:e=>M.remove(t.row.delId)},{default:n((()=>[p("移除")])),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"])])}],["__scopeId","data-v-36089ef6"]]);export{M as D};
