import e from"./SearchTitle-ceb204ee.js";import"../index-044285d2.js";import t from"./ChartLine-b009fc4d.js";import{e as a,f as i,h as r,i as l,j as s,k as o}from"./store-1f3cfa19.js";import{_ as d}from"./quill-image-resize-module-c051113e.js";import{ai as n,o as u,c as m,a as p,Y as c,_ as g,U as b,Z as h,T as v,X as f,R as j,K as x,a9 as y,bl as T,bj as N}from"./@vue-e400fd81.js";import"./moment-8163541f.js";import"./quill-c6b3d2fb.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./echarts-8e7b9cd7.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"./lodash.merge-f1a4e0c2.js";window.lwConfig.services.wecom;const _="/assets/svg/help-a1f436ce.svg",S={name:"store-analyse",components:{ChartLine:t,SearchTitle:e},data:()=>({activeName:"first",xdata:[],series:[],legend:["点击/扫码次数","新增客户数"],xdata1:[],series1:[],legend1:["点击/扫码次数","进群客户数","退群客户数"],query:{beginTime:"",endTime:"",storeCodeId:""},data:{totalShopGuideScannNumber:0,tdShopGuideScannNumber:0,customerTotalNumber:0,ydCustomerNumber:0,totalStoreGroupScannNumber:0,tdStoreGroupScannNumber:0,totalJoinGroupMemberNumber:0,tdJoinGroupMemberNumber:0,totalExitGroupMemberNumber:0,tdExitGroupMemberNumber:0},getDataDetailExport:a,getCustomerToGroupList:i,externalUserid:"",dialogVisible:!1,dictAddStatus:{0:"未进群",1:"已进群"}}),created(){this.query.storeCodeId=this.$route.query.id,this.initData()},methods:{initData(){r(this.query.storeCodeId).then((e=>{200===e.code&&(this.data=e.data)}))},getLineDataSecond(e){this.query.beginTime=e.beginTime,this.query.endTime=e.endTime,l(this.query).then((e=>{this.xdata1=[],this.series1=[];let t=[],a=[],i=[];e.data&&e.data.length&&(e.data.forEach((e=>{this.xdata1.push(e.dataTime),t.push(e.totalStoreGroupScannNumber),a.push(e.totalJoinGroupMemberNumber),i.push(e.totalExitGroupMemberNumber)})),this.series1=[t,a,i])}))},getLineDataFirst(e){this.query.beginTime=e.beginTime,this.query.endTime=e.endTime,s(this.query).then((e=>{this.xdata=[],this.series=[];let t=[],a=[];e.data&&e.data.length&&(e.data.forEach((e=>{this.xdata.push(e.dataTime),t.push(e.totalShopGuideScannNumber),a.push(e.customerTotalNumber)})),this.series=[t,a])}))},getDataDetail(e){return e.storeCodeId=this.$route.query.id,e.dateRangeAddTime?(e.startAddTime=e.dateRangeAddTime[0],e.endAddTime=e.dateRangeAddTime[1]):(delete e.startAddTime,delete e.endAddTime),delete e.dateRangeAddTime,e.dateRangeJoinTime?(e.startJoinTime=e.dateRangeJoinTime[0],e.endJoinTime=e.dateRangeJoinTime[1]):(delete e.startJoinTime,delete e.endJoinTime),delete e.dateRangeJoinTime,o(e)}}},q=e=>(T("data-v-a718f191"),e=e(),N(),e),G={style:{display:"flex"}},D={class:"g-card",style:{flex:"0.4"}},C=q((()=>p("div",{class:"title"},"门店导购码",-1))),V={class:"header_content"},U={class:"unit"},J={class:"title"},R=q((()=>p("div",{style:{"margin-left":"8px",cursor:"pointer"}},[p("img",{src:_,alt:""})],-1))),A=q((()=>p("div",null,"进入门店导购码页面的总人数（去重）",-1))),E={class:"value"},M={class:"sub_content"},k=q((()=>p("span",null,"今日",-1))),w={style:{"font-size":"14px"}},I={class:"unit"},L={class:"title"},z=q((()=>p("div",{style:{"margin-left":"8px",cursor:"pointer"}},[p("img",{src:_,alt:""})],-1))),$=q((()=>p("div",null,"成功添加门店导购的客户数（去重）",-1))),O={class:"value"},Y={class:"sub_content"},F=q((()=>p("span",null,"今日",-1))),K={style:{"font-size":"14px"}},B={class:"g-card",style:{flex:"0.6","margin-top":"0","margin-left":"20px"}},X=q((()=>p("div",{class:"title"},"门店群活码",-1))),Z={class:"header_content"},H={class:"unit"},P={class:"title"},Q=q((()=>p("div",{style:{"margin-left":"8px",cursor:"pointer"}},[p("img",{src:_,alt:""})],-1))),W=q((()=>p("div",null,"进入门店导购码页面的总人数（去重）",-1))),ee={class:"value"},te={class:"sub_content"},ae=q((()=>p("span",null,"今日",-1))),ie={style:{"font-size":"14px"}},re={class:"unit"},le={class:"title"},se=q((()=>p("div",{style:{"margin-left":"8px",cursor:"pointer"}},[p("img",{src:_,alt:""})],-1))),oe=q((()=>p("div",null,"成功添加门店客户群的客户数（去重）",-1))),de={class:"value"},ne={class:"sub_content"},ue=q((()=>p("span",null,"今日",-1))),me={style:{"font-size":"14px"}},pe={class:"unit"},ce={class:"title"},ge=q((()=>p("div",{style:{"margin-left":"8px",cursor:"pointer"}},[p("img",{src:_,alt:""})],-1))),be=q((()=>p("div",null,"退出门店客户群的客户数（去重）",-1))),he={class:"value"},ve={class:"sub_content"},fe=q((()=>p("span",null,"今日",-1))),je={style:{"font-size":"14px"}},xe={class:"g-card"},ye=q((()=>p("div",{class:"g-card-title"},"数据概览",-1))),Te={class:"data-content"},Ne={class:"chart-content"},_e=["onClick"];const Se=d(S,[["render",function(e,t,a,i,r,l){const s=n("el-popover"),o=n("el-tab-pane"),d=n("el-tabs"),T=n("search-title"),N=n("chart-line"),_=n("el-input"),S=n("el-form-item"),q=n("el-date-picker"),Se=n("el-option"),qe=n("el-select"),Ge=n("el-table-column"),De=n("el-button"),Ce=n("el-table"),Ve=n("RequestChartTable"),Ue=n("el-dialog");return u(),m("div",null,[p("div",G,[p("div",D,[C,p("div",V,[p("div",U,[p("div",J,[c(" 点击/扫码总次数 "),g(s,{placement:"top",trigger:"hover"},{reference:b((()=>[R])),default:b((()=>[A])),_:1})]),p("div",E,h(r.data.totalShopGuideScannNumber||"-"),1),p("div",M,[k,p("span",w,h(r.data.tdShopGuideScannNumber||"-"),1)])]),p("div",I,[p("div",L,[c(" 新增客户总人数 "),g(s,{placement:"top",trigger:"hover"},{reference:b((()=>[z])),default:b((()=>[$])),_:1})]),p("div",O,h(r.data.customerTotalNumber||"-"),1),p("div",Y,[F,p("span",K,h(r.data.ydCustomerNumber||"-"),1)])])])]),p("div",B,[X,p("div",Z,[p("div",H,[p("div",P,[c(" 点击/扫码总次数 "),g(s,{placement:"top",trigger:"hover"},{reference:b((()=>[Q])),default:b((()=>[W])),_:1})]),p("div",ee,h(r.data.totalStoreGroupScannNumber||"-"),1),p("div",te,[ae,p("span",ie,h(r.data.tdStoreGroupScannNumber||"-"),1)])]),p("div",re,[p("div",le,[c(" 进群总客户数 "),g(s,{placement:"top",trigger:"hover"},{reference:b((()=>[se])),default:b((()=>[oe])),_:1})]),p("div",de,h(r.data.totalJoinGroupMemberNumber||"-"),1),p("div",ne,[ue,p("span",me,h(r.data.tdJoinGroupMemberNumber||"-"),1)])]),p("div",pe,[p("div",ce,[c(" 退群总客户数 "),g(s,{placement:"top",trigger:"hover"},{reference:b((()=>[ge])),default:b((()=>[be])),_:1})]),p("div",he,h(r.data.totalExitGroupMemberNumber||"-"),1),p("div",ve,[fe,p("span",je,h(r.data.tdExitGroupMemberNumber||"-"),1)])])])])]),p("div",xe,[ye,p("div",Te,[g(d,{modelValue:r.activeName,"onUpdate:modelValue":t[0]||(t[0]=e=>r.activeName=e)},{default:b((()=>[g(o,{label:"门店导购码",name:"first"}),g(o,{label:"门店群活码",name:"second"})])),_:1},8,["modelValue"]),p("div",Ne,["first"===r.activeName?(u(),v(T,{key:"11",onSearch:l.getLineDataFirst},null,8,["onSearch"])):f("",!0),"second"===r.activeName?(u(),v(T,{key:"22",onSearch:l.getLineDataSecond},null,8,["onSearch"])):f("",!0),"first"===r.activeName?(u(),v(N,{key:"444",style:{height:"300px"},legend:r.legend,xData:r.xdata,series:r.series},null,8,["legend","xData","series"])):f("",!0),"second"===r.activeName?(u(),v(N,{key:"333",style:{height:"300px"},legend:r.legend1,xData:r.xdata1,series:r.series1},null,8,["legend","xData","series"])):f("",!0)])])]),g(Ve,{title:"数据明细",ref:"importRecord",request:l.getDataDetail,requestExport:t=>(t.storeCodeId=e.$route.query.id,r.getDataDetailExport(t)),exportFileName:"门店活码数据明细导出.xls"},{queryMiddle:b((({query:t})=>[g(S,{label:"",prop:"customerName"},{default:b((()=>[g(_,{modelValue:t.customerName,"onUpdate:modelValue":e=>t.customerName=e,placeholder:"请输入客户名称"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),g(S,{label:""},{default:b((()=>[g(q,j({modelValue:t.dateRangeAddTime,"onUpdate:modelValue":e=>t.dateRangeAddTime=e,"value-format":"YYYY-MM-DD",type:"daterange"},e.pickerOptions,{"range-separator":"-","start-placeholder":"添加开始","end-placeholder":"结束日期",align:"right"}),null,16,["modelValue","onUpdate:modelValue"])])),_:2},1024),g(S,{label:"",prop:"isJoinGroup"},{default:b((()=>[g(qe,{modelValue:t.isJoinGroup,"onUpdate:modelValue":e=>t.isJoinGroup=e,placeholder:"请选择是否进群"},{default:b((()=>[(u(!0),m(x,null,y(r.dictAddStatus,((e,t)=>(u(),v(Se,{key:t,label:e,value:t},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),default:b((({data:t})=>[g(Ce,{data:t},{default:b((()=>[g(Ge,{align:"center",prop:"customerName",label:"客户名称"}),g(Ge,{align:"center",prop:"addUserId",label:"添加员工"}),g(Ge,{align:"center",prop:"addTime",label:"添加时间"}),g(Ge,{align:"center",prop:"isJoinGroup",label:"是否进群"},{default:b((({row:e})=>[c(h(r.dictAddStatus[e.isJoinGroup]),1)])),_:1}),g(Ge,{align:"center",prop:"groupName",label:"进入客群"},{default:b((({row:t})=>[p("div",{class:"g-color cp",onClick:a=>{var i;r.externalUserid=t.externalUserid,r.dialogVisible=!0,null==(i=e.$refs.RequestChartTableDialog)||i.getList()}},h(t.joinGroupNumber),9,_e)])),_:1}),g(Ge,{label:"操作",align:"center"},{default:b((({row:t})=>[g(De,{text:"",onClick:a=>e.$router.push({name:e.lwConfig.CUSTOMER_DETAIL_ROUTE_NAME,query:{externalUserid:t.externalUserid,userId:t.addUserId}})},{default:b((()=>[c(" 客户详情 ")])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])),_:1},8,["request","requestExport"]),g(Ue,{title:"进入客群",modelValue:r.dialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>r.dialogVisible=e),"close-on-click-modal":!1},{default:b((()=>[g(Ve,{ref:"RequestChartTableDialog",style:{padding:"0 0 20px 0"},params:{storeCodeId:e.$route.query.id,externalUserid:r.externalUserid},request:r.getCustomerToGroupList},{default:b((({data:e})=>[g(Ce,{data:e},{default:b((()=>[g(Ge,{label:"客群名称",align:"center",prop:"groupName"}),g(Ge,{align:"center",prop:"joinTime",label:"进群时间"},{default:b((({row:e})=>[c(h(e.joinTime||"—"),1)])),_:1})])),_:2},1032,["data"])])),_:1},8,["params","request"])])),_:1},8,["modelValue"])])}],["__scopeId","data-v-a718f191"]]);export{Se as default};
