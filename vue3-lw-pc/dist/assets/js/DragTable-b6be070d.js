import{S as e}from"./sortablejs-b0ad9b27.js";import{_ as t}from"./quill-image-resize-module-c051113e.js";import{ai as a,o as l,c as s,_ as i,U as n,T as d,X as o,a as r,Z as c,Y as p,bl as m,bj as y}from"./@vue-e400fd81.js";import"./quill-c6b3d2fb.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const u={props:{tableData2:{type:Array,default:[]},dargAble:{type:Boolean,default:!1},isDetail:{type:Boolean,default:!1}},data:()=>({tableData:[]}),watch:{tableData2:{handler(e){this.tableData=JSON.parse(JSON.stringify(e))},immediate:!0,deep:!0}},mounted(){this.dargAble&&this.dragSort()},methods:{preview(e){window.open(window.lwConfig.PRIVIEW_PATH+e.id+"&otherModle="+!0,"_blank")},filType(e){let t=JSON.parse(JSON.stringify(e));t=t.split(".");let a=t[t.length-1];return"pdf"===a?"pdf":["doc","docx"].includes(a)?"word":["ppt","pptx","pps","pptsx"].includes(a)?"ppt":""},edit(e){this.$emit("getEdit",e)},remove(e){this.tableData=this.tableData.filter((t=>t.id!=e)),this.$emit("setData",this.tableData)},coverContent:(e,t)=>(e&&e.length>t&&(e=e.substr(0,t)+"..."),e),deltype(e){switch(e){case"4":return"文本";case"0":return"图片";case"9":return"图文";case"11":return"小程序";case"12":return"文章";case"2":return"视频";case"3":return"文件";case"5":return"海报";case"19":return"外链"}},dragSort(){const t=this.$refs.singleTable.$el.querySelectorAll(".el-table__body-wrapper table > tbody")[0];this.sortable=e.create(t,{ghostClass:"sortable-ghost",setData:function(e){e.setData("Text","")},onEnd:e=>{const t=this.tableData.splice(e.oldIndex,1)[0];this.tableData.splice(e.newIndex,0,t),this.$emit("setData",this.tableData),this.tableData[e.newIndex].id,this.tableData[e.newIndex-1]&&this.tableData[e.newIndex-1].id,this.tableData[e.newIndex+1]&&this.tableData[e.newIndex+1].id}})}}},b={class:"title"},f={key:0},g=["innerHTML"],h={class:"twosplice"},w={key:1},v={key:2,style:{display:"flex"}},k={key:1,class:"icon-style"},_={class:"twosplice distStyle"},x={key:3},T={key:4,style:{display:"flex"}},D={key:1,class:"icon-style"},C={class:"twosplice distStyle"},U={key:5,style:{display:"flex"}},j={class:"twosplice distStyle"},S={key:6,style:{display:"flex"}},I={key:0,class:"icon-style"},N={class:"twosplice distStyle"},z={key:7,style:{display:"flex"}},A={class:"twosplice distStyle"},$=["href"],q=["href"],O=(e=>(m("data-v-f3b2de67"),e=e(),y(),e))((()=>r("span",null,"预览",-1)));const E=t(u,[["render",function(e,t,m,y,u,E){const J=a("svg-icon"),H=a("el-table-column"),M=a("el-tooltip"),P=a("el-image"),B=a("el-button"),L=a("el-table");return l(),s("div",null,[i(L,{data:u.tableData,ref:"singleTable","highlight-current-row":"","row-key":"id",class:"load_table"},{default:n((()=>[m.dargAble?(l(),d(H,{key:0,label:"",width:"50",align:"left"},{default:n((()=>[i(J,{icon:"dragIcon"})])),_:1})):o("",!0),i(H,{prop:"name",label:"素材",align:"left"},{default:n((({row:e})=>[i(M,{content:e.materialName,placement:"top",disabled:!e.materialName||e.materialName.length<12},{default:n((()=>[r("span",b,c(E.coverContent(e.materialName,12)),1)])),_:2},1032,["content","disabled"]),"4"===e.mediaType?(l(),s("div",f,[i(M,{placement:"top",disabled:!e.content||e.content.length<50},{content:n((()=>[r("p",{style:{"white-space":"pre-line"},innerHTML:e.content},null,8,g)])),default:n((()=>[r("span",h,c(E.coverContent(e.content,50)),1)])),_:2},1032,["disabled"])])):o("",!0),"0"===e.mediaType?(l(),s("div",w,[i(P,{src:e.materialUrl,fit:"contain",class:"imgsize"},null,8,["src"])])):o("",!0),"9"===e.mediaType?(l(),s("div",v,[e.coverUrl?(l(),d(P,{key:0,src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])):(l(),s("div",k,[i(J,{class:"icon-style",icon:"imgText"})])),i(M,{content:e.content,placement:"top",disabled:!e.content||e.content.length<50},{default:n((()=>[r("span",_,c(E.coverContent(e.content,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"11"===e.mediaType?(l(),s("div",x,[i(P,{src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])])):o("",!0),"12"===e.mediaType?(l(),s("div",T,[e.coverUrl?(l(),d(P,{key:0,src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"])):(l(),s("div",D,[i(J,{class:"icon-style",icon:"article"})])),i(M,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[r("span",C,c(E.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"2"===e.mediaType?(l(),s("div",U,[i(P,{src:e.coverUrl,fit:"contain",class:"imgsize"},null,8,["src"]),i(M,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[r("span",j,c(E.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"3"===e.mediaType?(l(),s("div",S,[e.materialUrl?(l(),s("div",I,[i(J,{class:"icon-style",icon:e.materialUrl?E.filType(e.materialUrl):""},null,8,["icon"])])):o("",!0),i(M,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[r("span",N,c(E.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0),"5"===e.mediaType?(l(),s("div",z,[i(P,{src:e.materialUrl,fit:"contain",class:"imgsize"},null,8,["src"]),i(M,{content:e.digest,placement:"top",disabled:!e.digest||e.digest.length<50},{default:n((()=>[r("span",A,c(E.coverContent(e.digest,50)),1)])),_:2},1032,["content","disabled"])])):o("",!0)])),_:1}),i(H,{prop:"mediaType",width:"50",label:"类型",align:"center"},{default:n((({row:e})=>[r("div",null,c(E.deltype(e.mediaType)),1)])),_:1}),m.isDetail?o("",!0):(l(),d(H,{key:1,prop:"height",label:"操作",align:"center"},{default:n((t=>[i(B,{text:""},{default:n((()=>[["2","5","9"].includes(t.row.mediaType)?(l(),d(B,{key:0,text:""},{default:n((()=>[r("a",{href:t.row.materialUrl,target:"_blank"},"预览",8,$)])),_:2},1024)):o("",!0),"3"==t.row.mediaType?(l(),d(B,{key:1,text:""},{default:n((()=>[r("a",{href:e.$previewFile(t.row.materialUrl),target:"_blank"},"预览",8,q)])),_:2},1024)):o("",!0),"12"==t.row.mediaType?(l(),d(B,{key:2,text:"",onClick:e=>E.preview(t.row)},{default:n((()=>[O])),_:2},1032,["onClick"])):o("",!0)])),_:2},1024),1!=t.row.moduleType?(l(),d(B,{key:0,text:"",onClick:e=>E.edit(t.row)},{default:n((()=>[p("编辑")])),_:2},1032,["onClick"])):o("",!0),i(B,{text:"",onClick:e=>E.remove(t.row.id)},{default:n((()=>[p("移除")])),_:2},1032,["onClick"])])),_:1}))])),_:1},8,["data"])])}],["__scopeId","data-v-f3b2de67"]]);export{E as default};
