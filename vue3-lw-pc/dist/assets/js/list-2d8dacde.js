import{b as e,r as t,d as i}from"./api-f4eece6a.js";import{_ as l}from"./quill-image-resize-module-c051113e.js";import{ai as o,o as a,c as s,_ as r,U as n,a as d,Y as p,Z as m,bl as u,bj as c}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const g={components:{},props:{},data:()=>({getList:e,query:{pageNum:1,pageSize:10,codeName:"",createBy:"",beginTime:"",endTime:""},dateRange:[],status:["正常","停用"],pushType:{0:"发给客户",1:"发给客户群"},queryUser:[],ids:[]}),computed:{},watch:{dateRange:{deep:!0,handler(e){e&&2===e.length?[this.query.beginTime,this.query.endTime]=e:(this.query.beginTime="",this.query.endTime="")}}},created(){this.$store.setBusininessDesc("\n        <div>指在客户通过员工活码加为好友后，员工自动推送入群引导语和群活码，客户可通过群活码扫码入群。</div>\n      ")},mounted(){},methods:{goRoute(e="aev",t){this.$router.push({path:e,query:t})},remove(e){const i=e||this.ids;this.$confirm("是否确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return t(i)})).then((()=>{this.$refs.table.getList(),this.msgSuccess("删除成功")})).catch((function(){}))},downloadBatch(){this.$confirm("确认下载所有选中活码图片吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>i(this.ids+""))).then((e=>{this.downloadBlob(e,"批量新客拉群活码.zip","zip")})).catch((function(){}))}}},h=e=>(u("data-v-2c346724"),e=e(),c(),e),f={class:"fxbw"},j=h((()=>d("div",null,"添加客户数：通过此活码添加的客户总数（去重）；",-1))),b=h((()=>d("div",null,"进群客户数：添加客户中成功进群的总数（去重）；",-1))),y=["onClick"];const v=l(g,[["render",function(e,t,i,l,u,c){const g=o("el-input"),h=o("el-form-item"),v=o("el-button"),_=o("el-table-column"),w=o("el-image"),C=o("el-popover"),x=o("TagEllipsis"),q=o("el-icon-QuestionFilled"),T=o("el-table"),k=o("RequestChartTable");return a(),s("div",null,[r(k,{ref:"table",request:e=>(Object.assign(e,u.query),u.getList(e))},{query:n((({query:e})=>[r(h,{label:"活码名称",prop:"codeName"},{default:n((()=>[r(g,{clearable:"",modelValue:e.codeName,"onUpdate:modelValue":t=>e.codeName=t,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),operation:n((()=>[d("div",f,[r(v,{type:"primary",onClick:t[0]||(t[0]=e=>c.goRoute())},{default:n((()=>[p("新建活码")])),_:1}),d("div",null,[r(v,{type:"primary",disabled:!u.ids.length,onClick:t[1]||(t[1]=e=>c.downloadBatch())},{default:n((()=>[p("批量下载")])),_:1},8,["disabled"]),r(v,{type:"primary",disabled:!u.ids.length,onClick:t[2]||(t[2]=e=>c.remove())},{default:n((()=>[p("批量删除")])),_:1},8,["disabled"])])])])),default:n((({data:i})=>[r(T,{data:i,onSelectionChange:t[3]||(t[3]=e=>u.ids=e.map((e=>e.id)))},{default:n((()=>[r(_,{type:"selection",width:"50",align:"center"}),r(_,{prop:"codeName",label:"活码名称",align:"center"}),r(_,{prop:"emplList",label:"活码",align:"center",width:"130"},{default:n((({row:e})=>[r(C,{placement:"bottom",trigger:"hover"},{reference:n((()=>[r(w,{src:e.emplCodeUrl,class:"code-image--small"},null,8,["src"])])),default:n((()=>[r(w,{src:e.emplCodeUrl,class:"code-image"},null,8,["src"])])),_:2},1024)])),_:1}),r(_,{prop:"emplNames",label:"使用员工",align:"center"},{default:n((({row:e})=>[r(x,{list:null==e?void 0:e.emplNames,emptyText:""},null,8,["list"])])),_:1}),r(_,{label:"客户标签",align:"center"},{default:n((({row:e})=>[r(x,{list:null==e?void 0:e.tagNames,emptyText:""},null,8,["list"])])),_:1}),r(_,{label:"实际群聊",align:"center"},{default:n((({row:e})=>[r(x,{list:null==e?void 0:e.groupNames,emptyText:""},null,8,["list"])])),_:1}),r(_,{label:"添加客户数/进群客户数",align:"center",prop:"cusNumber",width:"100"},{header:n((()=>[r(C,{placement:"top",trigger:"hover"},{reference:n((()=>[d("div",null,[p(" 添加客户数/进群客户数 "),r(q,{class:"el-icon-QuestionFilled"})])])),default:n((()=>[j,b])),_:1})])),default:n((({row:e})=>[d("div",{class:"g-color cp",onClick:t=>c.goRoute("detail",{id:e.id,index:1})},m(e.addCustomerNumber)+"/"+m(e.joinGroupNumber),9,y)])),_:1}),r(_,{label:"创建时间",align:"center",prop:"createTime",width:"160"}),r(_,{label:"操作",align:"center",width:"280",fixed:"right"},{default:n((({row:t})=>[r(v,{text:"",onClick:e=>c.goRoute("detail",{id:t.id})},{default:n((()=>[p("详情|统计")])),_:2},1032,["onClick"]),r(v,{text:"",onClick:e=>c.goRoute("aev",{id:t.id})},{default:n((()=>[p("编辑")])),_:2},1032,["onClick"]),r(v,{text:"",title:"下载活码",onClick:i=>e.downloadBlob(t.groupCodeUrl,t.codeName+".png","image")},{default:n((()=>[p(" 下载 ")])),_:2},1032,["onClick"]),r(v,{text:"",title:"复制二维码链接",onClick:i=>e.$copyText(t.groupCodeUrl)},{default:n((()=>[p("复制")])),_:2},1032,["onClick"]),r(v,{text:"",onClick:e=>c.remove(t.id)},{default:n((()=>[p("删除")])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])),_:1},8,["request"])])}],["__scopeId","data-v-2c346724"]]);export{v as default};
