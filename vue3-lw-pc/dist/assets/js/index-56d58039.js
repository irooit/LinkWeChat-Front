import{f as e,h as t,i as a}from"./api-afde1919.js";import{ai as l,aq as i,o,c as s,_ as r,U as n,K as p,a9 as u,T as d,Y as m,a as c,V as h,Z as y,X as f,$ as g,bl as k,bj as b}from"./@vue-e400fd81.js";import{_ as j}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const v={name:"short-link-popularize-list",data:()=>({infoType:[{name:"群发客户",key:0},{name:"群发客户群",key:1},{name:"群发朋友圈",key:2},{name:"应用消息",key:3}],statusType:[{name:"待推广",key:0},{name:"推广中",key:1},{name:"已结束",key:2}],query:{pageSize:10,pageNum:1,taskName:"",shortLinkName:"",type:"",taskStatus:""},total:0,loading:!1,list:[],selectList:[]}),methods:{gotoShortLinkDetail(e){this.$router.push({path:"/drainageCode/publicCustomer/IntelligentShortLink/detail",query:{id:e}})},setType(e){let t="";return this.infoType.forEach((a=>{a.key==e.type&&(t=a.name)})),t},setStatus(e){let t="";return this.statusType.forEach((a=>{a.key==e.taskStatus&&(t=a.name)})),t},getList(){this.loading=!0,e(this.query).then((e=>{this.total=Number(e.total),this.list=e.rows,this.loading=!1}))},handleSearch(){this.query.pageNum=1,this.getList()},resetQuery(){this.query.pageNum=1,this.$refs.queryForm.resetFields(),this.getList()},handleSelectionChange(e){this.selectList=e.map((e=>e.id))},deleteFn(e){this.$confirm("是否确认删除当前推广任务？删除后不可撤销，请谨慎操作。","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>t(e.id))).then((()=>{this.handleSearch(),this.msgSuccess("删除成功")}))},deleteMult(){if(!this.selectList.length)return void this.msgInfo("请选择要删除项！");const e=this.selectList.join(",");this.$confirm("是否确认删除当前推广任务？删除后不可撤销，请谨慎操作。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>a(e))).then((()=>{this.handleSearch(),this.msgSuccess("删除成功")})).catch((function(){}))}},created(){this.getList(),this.$store.setBusininessDesc("\n        <div>通过群发、朋友圈、应用消息等多种推广形式快捷推广智能短链，触达客户</div>\n      ")}},_=e=>(k("data-v-58808dda"),e=e(),b(),e),q={class:"g-card"},S={class:"mid-action"},w=["onClick"],C=_((()=>c("div",null,"在当前任务中短链页面访问的总次数",-1))),N=_((()=>c("div",null,"在当前任务中短链页面访问的独立IP数",-1))),L=_((()=>c("div",null,"在当前任务中小程序成功打开的总次数",-1)));const T=j(v,[["render",function(e,t,a,k,b,j){const v=l("el-input"),_=l("el-form-item"),T=l("el-option"),x=l("el-select"),V=l("el-button"),$=l("el-form"),F=l("el-table-column"),z=l("el-tag"),U=l("el-icon-QuestionFilled"),B=l("el-popover"),I=l("el-table"),Q=l("pagination"),E=i("loading");return o(),s("div",null,[r($,{ref:"queryForm",model:b.query,inline:"",class:"top-search","label-position":"left","label-width":""},{default:n((()=>[r(_,{label:"",prop:"taskName"},{default:n((()=>[r(v,{clearable:"",modelValue:b.query.taskName,"onUpdate:modelValue":t[0]||(t[0]=e=>b.query.taskName=e),placeholder:"请输入任务名称"},null,8,["modelValue"])])),_:1}),r(_,{label:"",prop:"shortLinkName"},{default:n((()=>[r(v,{clearable:"",modelValue:b.query.shortLinkName,"onUpdate:modelValue":t[1]||(t[1]=e=>b.query.shortLinkName=e),placeholder:"请输入短链名称"},null,8,["modelValue"])])),_:1}),r(_,{label:"",prop:"type"},{default:n((()=>[r(x,{"popper-append-to-body":!1,modelValue:b.query.type,"onUpdate:modelValue":t[2]||(t[2]=e=>b.query.type=e),placeholder:"请选择推广方式"},{default:n((()=>[r(T,{label:"全部推广方式",value:""}),(o(!0),s(p,null,u(b.infoType,((e,t)=>(o(),d(T,{key:t,label:e.name,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(_,{label:"",prop:"taskStatus"},{default:n((()=>[r(x,{"popper-append-to-body":!1,modelValue:b.query.taskStatus,"onUpdate:modelValue":t[3]||(t[3]=e=>b.query.taskStatus=e),placeholder:"请选择任务状态"},{default:n((()=>[r(T,{label:"全部任务状态",value:""}),(o(!0),s(p,null,u(b.statusType,((e,t)=>(o(),d(T,{key:t,label:e.name,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(_,{label:""},{default:n((()=>[r(V,{type:"primary",onClick:j.handleSearch},{default:n((()=>[m("查询")])),_:1},8,["onClick"]),r(V,{onClick:j.resetQuery},{default:n((()=>[m("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),c("div",q,[c("div",S,[r(V,{type:"primary",onClick:t[4]||(t[4]=t=>e.$router.push("./add"))},{default:n((()=>[m("新建任务")])),_:1}),c("div",null,[r(V,{type:"primary",plain:"",disabled:0==b.selectList.length,onClick:j.deleteMult},{default:n((()=>[m("批量删除")])),_:1},8,["disabled","onClick"])])]),h((o(),d(I,{data:b.list,onSelectionChange:j.handleSelectionChange},{default:n((()=>[r(F,{type:"selection",width:"55",align:"center",fixed:"left"}),r(F,{prop:"taskName",label:"任务名称",align:"center",width:"120",fixed:"left"}),r(F,{prop:"shortLinkName",label:"推广短链",align:"center",width:"180"},{default:n((({row:e})=>[c("a",{onClick:t=>j.gotoShortLinkDetail(e.shortLinkId),class:"self_a"},y(e.shortLinkName),9,w)])),_:1}),r(F,{prop:"type",label:"推广方式",align:"center",width:"100"},{default:n((({row:e})=>[m(y(j.setType(e)),1)])),_:1}),r(F,{prop:"statusType",label:"任务状态",align:"center",width:"100"},{default:n((({row:e})=>[r(z,{type:0==e.taskStatus?"info":2==e.taskStatus?"danger":""},{default:n((()=>[m(y(j.setStatus(e)),1)])),_:2},1032,["type"])])),_:1}),r(F,{prop:"taskStartTime",label:"任务开始时间",align:"center",width:"180"},{default:n((({row:e})=>[m(y(e.taskStartTime||"-"),1)])),_:1}),r(F,{prop:"taskEndTime",label:"任务结束时间",align:"center",width:"180"},{default:n((({row:e})=>[m(y(e.taskEndTime||"-"),1)])),_:1}),r(F,{prop:"pvNum",label:"访问总数",align:"center",width:"140"},{header:n((()=>[r(B,{placement:"top",trigger:"hover"},{reference:n((()=>[c("div",null,[m(" 访问总数(pv) "),r(U,{class:"el-icon-QuestionFilled"})])])),default:n((()=>[C])),_:1})])),default:n((({row:e})=>[m(y(e.pvNum||"-"),1)])),_:1}),r(F,{prop:"uvNum",label:"访问总人数",align:"center",width:"140"},{header:n((()=>[r(B,{placement:"top",trigger:"hover"},{reference:n((()=>[c("div",null,[m(" 访问总人数(uv) "),r(U,{class:"el-icon-QuestionFilled"})])])),default:n((()=>[N])),_:1})])),default:n((({row:e})=>[m(y(e.uvNum||"-"),1)])),_:1}),r(F,{prop:"openNum",label:"小程序总打开数",align:"center",width:"140"},{header:n((()=>[r(B,{placement:"top",trigger:"hover"},{reference:n((()=>[c("div",null,[m(" 小程序总打开数 "),r(U,{class:"el-icon-QuestionFilled"})])])),default:n((()=>[L])),_:1})])),default:n((({row:e})=>[m(y(e.openNum||"-"),1)])),_:1}),r(F,{prop:"createBy",label:"创建人",align:"center"}),r(F,{prop:"updateTime",label:"最近操作时间",align:"center",width:"180"}),r(F,{label:"操作",align:"center",width:"180",fixed:"right"},{default:n((({row:t})=>[r(V,{text:"",onClick:a=>e.$router.push({path:"./detail",query:{id:t.id}})},{default:n((()=>[m("详情|统计")])),_:2},1032,["onClick"]),0==t.taskStatus?(o(),d(V,{key:0,text:"",onClick:a=>e.$router.push({path:"./add",query:{id:t.id,promotion:!0}})},{default:n((()=>[m(" 推广 ")])),_:2},1032,["onClick"])):f("",!0),0==t.taskStatus?(o(),d(V,{key:1,text:"",onClick:a=>e.$router.push({path:"./add",query:{id:t.id}})},{default:n((()=>[m(" 编辑 ")])),_:2},1032,["onClick"])):f("",!0),r(V,{text:"",onClick:e=>j.deleteFn(t)},{default:n((()=>[m("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[E,b.loading]]),h(r(Q,{total:b.total,page:b.query.pageNum,"onUpdate:page":t[5]||(t[5]=e=>b.query.pageNum=e),limit:b.query.pageSize,"onUpdate:limit":t[6]||(t[6]=e=>b.query.pageSize=e),onPagination:j.getList},null,8,["total","page","limit","onPagination"]),[[g,b.total>0]])])])}],["__scopeId","data-v-58808dda"]]);export{T as default};
