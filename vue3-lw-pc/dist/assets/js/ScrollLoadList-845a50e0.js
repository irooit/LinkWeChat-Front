import{ai as e,aq as t,o as s,c as i,_ as a,U as l,aa as o,a5 as d,X as r,V as n,K as u,a9 as h,O as p,R as c,a as y,ad as m,ae as f,Z as g}from"./@vue-e400fd81.js";import{_ as q}from"./quill-image-resize-module-c051113e.js";import"./quill-c6b3d2fb.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const b={name:"",props:{request:{type:Function},params:{type:Object,default:()=>({})},isQuery:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},dealQueryFun:{type:Function,default:null},dealDataFun:{type:Function,default:null},finishedText:{type:String,default:"没有更多了"}},data:()=>({loading:!1,query:{pageNum:1,pageSize:10,keywords:""},finished:!1,error:!1,list:[]}),computed:{},watch:{},created(){},mounted(){},methods:{getList(e){this.disabled||this.error||(this.loading=!0,this.finished=!1,e&&(this.query.pageNum=e),Object.assign(this.query,this.params),this.dealQueryFun&&this.dealQueryFun(this.query),this.request(this.query).then((({rows:e,data:t,total:s=0})=>{e??(e=t||[]),1==this.query.pageNum&&(this.list=[]),this.dealDataFun&&this.dealDataFun(e),this.list.push(...e),this.loading=!1,this.list.length>=+s?(0==this.list.length&&(this.query.pageNum=1),this.finished=!0):this.query.pageNum++})).catch((()=>{this.error=!0,this.loading=!1})))}}},v={class:"ScrollLoadList"},j={key:0,class:"g-margin-b"},k=["infinite-scroll-disabled"],F={key:0,class:"ac mt10 mb10",style:{color:"var(--font-black-6)"}},w={key:0},L={key:2};const _=q(b,[["render",function(q,b,_,x,N,Q){var D;const O=e("el-button"),V=e("el-input"),S=e("Empty"),T=t("infinite-scroll");return s(),i("div",v,[_.isQuery?(s(),i("div",j,[a(V,{modelValue:N.query.keywords,"onUpdate:modelValue":b[1]||(b[1]=e=>N.query.keywords=e),placeholder:"请输入关键词",onKeyup:b[2]||(b[2]=o(d((e=>Q.getList(1)),["exact"]),["enter"]))},{append:l((()=>[a(O,{icon:"el-icon-search",onClick:b[0]||(b[0]=e=>Q.getList(1))})])),_:1},8,["modelValue"])])):r("",!0),n((s(),i("div",{ref:"scroll",style:{overflow:"auto",height:"100%"},"infinite-scroll-disabled":N.loading||N.finished},[(s(!0),i(u,null,h(N.list,((e,t)=>p(q.$slots,"item",c({key:t,ref_for:!0},{item:e}),void 0,!0))),128)),y("div",null,[p(q.$slots,"list",m(f({list:N.list})),void 0,!0)]),N.loading||N.finished?(s(),i("div",F,[N.loading?(s(),i("p",w,"正在加载...")):(null==(D=N.list)?void 0:D.length)?_.finishedText?(s(),i("p",L,g(_.finishedText),1)):r("",!0):p(q.$slots,"empty",{key:1},(()=>[a(S)]),!0)])):r("",!0)],8,k)),[[T,Q.getList.bind()]])])}],["__scopeId","data-v-8dc88552"]]);export{_ as default};
