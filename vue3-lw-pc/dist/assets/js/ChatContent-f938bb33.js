import{_ as e,E as s,B as t}from"../index-044285d2.js";import{B as a}from"./benz-amr-recorder-259e7c16.js";import{ai as i,o as n,c,_ as o,P as r,a5 as l,aU as m,K as d,Z as p,Y as g,T as y,X as h,a as v,bl as u,bj as f}from"./@vue-e400fd81.js";import{_ as k}from"./quill-image-resize-module-c051113e.js";let x,T,_;const O=k({name:"Voice",props:{amrUrl:{type:String,default:""}},data:()=>({actived:!1}),computed:{},watch:{},created(){x||document.addEventListener("click",this.stop),x=!0},mounted(){},methods:{play(){if(this.amrUrl){if(T&&this.stop(!0))return;T=new a,_=this.amrUrl,T.initWithUrl(this.amrUrl).then((()=>{this.actived=!0,T.play(),T.onEnded((()=>{this.actived=!1}))}))}else this.msgError("语音文件不存在")},stop(e){if(T&&T.isPlaying()&&(T.stop(),!e||_===this.amrUrl))return _="",!0}}},[["render",function(e,s,t,a,m,d){const p=i("el-icon-microphone");return n(),c("div",null,[o(p,{class:r(["el-icon-microphone cp",m.actived&&"actived"]),onClick:s[0]||(s[0]=l((e=>d.play("attachment")),["stop"]))},null,8,["class"])])}],["__scopeId","data-v-c08752ba"]]),w={name:"ChatContent",props:{message:{type:Object,default:()=>({})},queryChat:{type:Object,default:()=>({})}},components:{Voice:O,BaiduMap:m((()=>e((()=>import("./BaiduMap-b1208569.js")),["assets/js/BaiduMap-b1208569.js","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/js/@vue-e400fd81.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/css/BaiduMap-888872f5.css"])))},data:()=>({}),computed:{content(){let e={text:"content",image:"attachment",emotion:"attachment",file:"filename",docmsg:"title",video:"attachment",voice:"attachment",location:"address",weapp:"title"};return e[this.message.msgType]?JSON.parse(this.message.contact)[e[this.message.msgType]]:JSON.parse(this.message.contact)}},watch:{},created(){},mounted(){},methods:{setIndex:e=>s.findIndex((s=>s===e)),setDate:e=>t(e)}},S=e=>(u("data-v-39d028fc"),e=e(),f(),e),b={key:0},j=["src"],U={key:3,class:"msgtypefile"},I=["href"],J={key:5,class:"ac"},N=S((()=>v("div",{style:{"font-size":"12px"}},"语音消息",-1))),C={key:6,class:"ac"},D={key:0,style:{"font-size":"12px"}},E={key:7,id:"video",class:"video-js vjs-default-skin vjs-big-play-centered",controls:"","webkit-playsinline":"true",playsinline:"true",autoplay:!1,preload:"none",style:{height:"100%",width:"100%"}},q=["src"],B={key:8,class:"msgtypecard"},z={class:"card-content"},M={class:"card-foot"},V={key:9,class:"msgtypecard"},P={class:"card-content"},L=S((()=>v("div",{class:"card-foot"},"小程序",-1))),W={key:10,class:"msgtypecard"},A={class:"card-content"},H={style:{flex:"none"}},K=S((()=>v("div",{class:"card-foot"},"个人名片",-1))),R={key:11,class:"msgtypecard"},X=["href"],Y={class:"card-content fxbw"},Z={style:{flex:"1","margin-right":"10px"}},$={class:"card--link-title"},F={class:"card--link-desc"},G={key:12},Q={key:13},ee={key:14};const se=k(w,[["render",function(e,s,t,a,l,m){const u=i("el-image"),f=i("voice"),k=i("BaiduMap");return n(),c("div",{class:r(t.message.fromId===t.queryChat.fromId?"message-right":"message")},["text"===t.message.msgType?(n(),c(d,{key:0},[-1==m.setIndex(JSON.parse(t.message.contact).content)?(n(),c("div",b,p(m.content),1)):(n(),c("img",{key:1,src:`https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/${m.setIndex(JSON.parse(this.message.contact).content)}.gif`,alt:""},null,8,j))],64)):"revoke"===t.message.msgType?(n(),c(d,{key:1},[g("已撤回")],64)):"image,emotion".includes(t.message.msgType)?(n(),y(u,{key:2,style:{width:"100px"},src:m.content,fit:"fill","preview-src-list":[m.content]},null,8,["src","preview-src-list"])):"file".includes(t.message.msgType)?(n(),c("a",U,p(m.content),1)):"docmsg".includes(t.message.msgType)?(n(),c("a",{key:4,class:"msgtypefile",href:JSON.parse(this.message.contact).link_url,target:"_black"},p(m.content),9,I)):"voice"===t.message.msgType?(n(),c("div",J,[o(f,{amrUrl:JSON.parse(t.message.contact).attachment},null,8,["amrUrl"]),N])):"meeting_voice_call"===t.message.msgType?(n(),c("div",C,[o(f,{amrUrl:JSON.parse(t.message.contact).attachment},null,8,["amrUrl"]),JSON.parse(t.message.contact).endtime?(n(),c("span",D," 语音通话-结束时间："+p(m.setDate(JSON.parse(t.message.contact).endtime)),1)):h("",!0)])):"video"===t.message.msgType?(n(),c("video",E,[v("source",{src:m.content,type:"video/mp4"},null,8,q)])):"location"===t.message.msgType?(n(),c("div",B,[v("div",z,[o(k,{isDetail:"",isOnlyShowMap:"",mapWidth:"300px",mapHeight:"120px",initData:JSON.parse(t.message.contact)},null,8,["initData"])]),v("div",M,p(m.content),1)])):"weapp"===t.message.msgType?(n(),c("div",V,[v("div",P,p(m.content),1),L])):"card"===t.message.msgType?(n(),c("div",W,[v("div",A,[v("span",H,p(m.content.corpname)+"：",1),v("span",null,p(m.content.userid),1)]),K])):"link"===t.message.msgType?(n(),c("div",R,[v("a",{target:"_black",href:m.content.link_url},[v("div",Y,[v("div",Z,[v("div",$,p(m.content.title),1),v("div",F,p(m.content.description),1)]),o(u,{style:{width:"50px",height:"50px"},src:m.content.image_url,fit:"fill"},null,8,["src"])])],8,X)])):"agree"===t.message.msgType?(n(),c("div",G,"客户已同意会话存档")):"disagree"===t.message.msgType?(n(),c("div",Q,"客户不同意会话存档")):(n(),c("div",ee,"不支持的消息类型："+p(t.message.msgType),1))],2)}],["__scopeId","data-v-39d028fc"]]);export{se as C,O as V};
