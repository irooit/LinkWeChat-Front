import{g as e,b as t}from"./api-49257dfd.js";import{_ as a}from"./quill-image-resize-module-c051113e.js";import{ai as l,aq as i,o as r,c as s,_ as o,U as u,K as n,a9 as p,T as m,Y as d,a as c,V as h,Z as y}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const g={class:"g-card"},f={class:"mid-action"};const j=a({name:"quality",data:()=>({query:{pageSize:10,pageNum:1,name:"",userIds:"",startTime:"",endTime:"",chatType:1},total:0,dialogVisible:!1,userName:"",userArray:[],searchDate:[],list:[],loading:!1,chatTypeArray:[{key:1,value:"全部"},{key:2,value:"客户会话"},{key:3,value:"客群会话"}]}),created(){this.getList()},methods:{getSelectUser(e){this.userArray=e,this.userName=this.userArray.map((function(e,t){return e.name})).join(","),this.query.userIds=this.userArray.map((function(e,t){return e.userId})).join(",")},setDateChange(e){e&&e[0]?this.query.beginTime=e[0]:this.query.beginTime="",e&&e[1]?this.query.endTime=e[1]:this.query.endTime=""},handleSearch(){this.query.pageNum=1,this.getList()},getList(){e(this.query).then((e=>{this.total=Number(e.total),this.list=e.rows}))},resetQuery(){this.query={pageSize:10,pageNum:1,name:"",userIds:"",startTime:"",endTime:"",chatType:1},this.userName="",this.userArray=[],this.getList()},goRoute(e,t){this.$router.push({path:e,query:{id:t}})},removeFn(e){this.$confirm("是否确认删除当前质检规则？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>t(e))).then((()=>{this.handleSearch(),this.msgSuccess("删除成功")})).catch((function(){}))}}},[["render",function(e,t,a,j,b,q){const v=l("el-input"),w=l("el-form-item"),T=l("el-option"),_=l("el-select"),k=l("el-date-picker"),C=l("el-button"),V=l("el-form"),S=l("el-table-column"),U=l("TagEllipsis"),x=l("el-table"),N=l("pagination"),D=l("SelectUser"),A=i("loading");return r(),s("div",null,[o(V,{ref:"queryForm",model:b.query,inline:"",class:"top-search","label-position":"left","label-width":""},{default:u((()=>[o(w,{label:"规则名称",prop:"name"},{default:u((()=>[o(v,{clearable:"",modelValue:b.query.name,"onUpdate:modelValue":t[0]||(t[0]=e=>b.query.name=e),placeholder:"请输入规则名称"},null,8,["modelValue"])])),_:1}),o(w,{label:"适用成员",prop:"userIds"},{default:u((()=>[o(v,{"model-value":b.userName,readonly:"",onClick:t[1]||(t[1]=e=>b.dialogVisible=!0),placeholder:"请选择适用成员"},null,8,["model-value"])])),_:1}),o(w,{label:"会话类型"},{default:u((()=>[o(_,{modelValue:b.query.chatType,"onUpdate:modelValue":t[2]||(t[2]=e=>b.query.chatType=e),"popper-append-to-body":!1},{default:u((()=>[(r(!0),s(n,null,p(b.chatTypeArray,((e,t)=>(r(),m(T,{label:e.value,value:e.key,key:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(w,{label:"操作时间"},{default:u((()=>[o(k,{modelValue:b.searchDate,"onUpdate:modelValue":t[3]||(t[3]=e=>b.searchDate=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-",onChange:q.setDateChange,"start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue","onChange"])])),_:1}),o(w,{label:""},{default:u((()=>[o(C,{type:"primary",onClick:q.handleSearch},{default:u((()=>[d("查询")])),_:1},8,["onClick"]),o(C,{onClick:q.resetQuery},{default:u((()=>[d("重置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),c("div",g,[c("div",f,[o(C,{type:"primary",onClick:t[4]||(t[4]=t=>e.$router.push("./add"))},{default:u((()=>[d("新建质检规则")])),_:1}),o(C,{type:"primary",plain:"",onClick:t[5]||(t[5]=t=>e.$router.push("./records"))},{default:u((()=>[d("质检报告记录")])),_:1})]),h((r(),m(x,{data:b.list},{default:u((()=>[o(S,{label:"规则名称",align:"center","min-width":"100",prop:"name","show-overflow-tooltip":""}),o(S,{label:"适用成员范围",align:"center",prop:"qiRuleScope","min-width":"160px"},{default:u((({row:e})=>[o(U,{list:e.qiRuleScope,defaultProps:"userName"},null,8,["list"])])),_:1}),o(S,{label:"超时时间标准",align:"center","min-width":"100",prop:"timeOut","show-overflow-tooltip":""},{default:u((({row:e})=>[d(y(e.timeOut)+"分钟",1)])),_:1}),o(S,{label:"质检会话类型",align:"center",prop:"chatType","min-width":"160px"},{default:u((({row:e})=>[d(y(1==e.chatType?"全部":2==e.chatType?"客户会话":"客群会话"),1)])),_:1}),o(S,{label:"质检督导",align:"center",prop:"manageUser","min-width":"160px"},{default:u((({row:e})=>[o(U,{list:e.manageUserInfo,defaultProps:"userName"},null,8,["list"])])),_:1}),o(S,{label:"操作时间",align:"center",prop:"updateTime",width:"180"}),o(S,{label:"操作",align:"center",fixed:"right",width:"180"},{default:u((({row:e})=>[o(C,{text:"",onClick:t=>q.goRoute("statistic",e.id)},{default:u((()=>[d("统计")])),_:2},1032,["onClick"]),o(C,{text:"",onClick:t=>q.goRoute("add",e.id)},{default:u((()=>[d("编辑")])),_:2},1032,["onClick"]),o(C,{text:"",onClick:t=>q.removeFn(e.id)},{default:u((()=>[d("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[A,b.loading]]),o(N,{total:b.total,page:b.query.pageNum,"onUpdate:page":t[6]||(t[6]=e=>b.query.pageNum=e),limit:b.query.pageSize,"onUpdate:limit":t[7]||(t[7]=e=>b.query.pageSize=e),onPagination:t[8]||(t[8]=e=>q.getList())},null,8,["total","page","limit"])]),o(D,{visible:b.dialogVisible,"onUpdate:visible":t[9]||(t[9]=e=>b.dialogVisible=e),title:"组织架构",defaultValues:b.userArray,onSuccess:q.getSelectUser},null,8,["visible","defaultValues","onSuccess"])])}]]);export{j as default};
