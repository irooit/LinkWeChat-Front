import{h as e}from"./moment-8163541f.js";import{a2 as t}from"../index-044285d2.js";import{g as a}from"./store-1f3cfa19.js";import{_ as s}from"./quill-image-resize-module-c051113e.js";import{ai as i,o,c as r,a as l,_ as p,U as m,Y as d,X as n,K as h,a9 as u,T as c}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const j={name:"search-title-in-store",props:{showMore:{type:Boolean,default:!1}},data:()=>({active:1,value:[],data:{beginTime:"",endTime:"",area:"",storeCodeId:""},areaIds:[],cityTree:[],list:[],props:{label:"name",value:"id"}}),methods:{handleChange(e){let t=this.$refs.tree.getCheckedNodes();t[0]?this.data.area=t[0].pathLabels.join(""):(this.areaIds=[],this.data.area=""),this.submit()},getList(){a({pageSize:1e4,pageNum:1}).then((({rows:e,total:t})=>{this.list=e}))},submit(){this.$emit("search",this.data)},setTime(t){t?(this.data.beginTime=e(t[0]).format("YYYY-MM-DD"),this.data.endTime=e(t[1]).format("YYYY-MM-DD")):(this.data.beginTime="",this.data.endTime=""),this.submit()},setType(t){if(this.active=t,1===t){const t=e().subtract(6,"days").format("YYYY-MM-DD"),a=e().format("YYYY-MM-DD");this.data.beginTime=t,this.data.endTime=a,this.submit()}else 2===t&&(this.data.endTime=e().format("YYYY-MM-DD"),this.data.beginTime=e().subtract(29,"days").format("YYYY-MM-DD"),this.submit())}},created(){this.setType(1),this.showMore&&(t().then((e=>{200===e.code&&(this.cityTree=e.data)})),this.getList())}},y={class:"search"},f={class:"item"},b={key:0,class:"item"},g={key:1,class:"item"},Y={key:2,class:"item"};const v=s(j,[["render",function(e,t,a,s,j,v){const T=i("el-button"),M=i("el-button-group"),C=i("el-date-picker"),D=i("el-cascader"),k=i("el-option"),w=i("el-select");return o(),r("div",y,[l("div",f,[p(M,null,{default:m((()=>[p(T,{onClick:t[0]||(t[0]=e=>v.setType(1)),type:1===j.active?"primary":""},{default:m((()=>[d("近一周")])),_:1},8,["type"]),p(T,{onClick:t[1]||(t[1]=e=>v.setType(2)),type:2===j.active?"primary":""},{default:m((()=>[d("近一月")])),_:1},8,["type"]),p(T,{onClick:t[2]||(t[2]=e=>v.setType(3)),type:3===j.active?"primary":""},{default:m((()=>[d("自定义")])),_:1},8,["type"])])),_:1})]),3===j.active?(o(),r("div",b,[p(C,{style:{width:"250px"},onChange:v.setTime,clearable:"",modelValue:j.value,"onUpdate:modelValue":t[3]||(t[3]=e=>j.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["onChange","modelValue"])])):n("",!0),a.showMore?(o(),r("div",g,[p(D,{"popper-append-to-body":!1,clearable:"",placeholder:"请选择所属地区",modelValue:j.areaIds,"onUpdate:modelValue":t[4]||(t[4]=e=>j.areaIds=e),props:j.props,options:j.cityTree,ref:"tree",onChange:v.handleChange},null,8,["modelValue","props","options","onChange"])])):n("",!0),a.showMore?(o(),r("div",Y,[p(w,{transfer:!0,placeholder:"选择门店",clearable:"",modelValue:j.data.storeCodeId,"onUpdate:modelValue":t[5]||(t[5]=e=>j.data.storeCodeId=e),onChange:v.submit},{default:m((()=>[(o(!0),r(h,null,u(j.list,((e,t)=>(o(),c(k,{key:t,label:e.storeName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])):n("",!0)])}],["__scopeId","data-v-a35a1a4f"]]);export{v as default};
