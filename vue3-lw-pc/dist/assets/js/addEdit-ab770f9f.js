import{_ as e}from"../index-044285d2.js";import{a as t,u as a,b as o}from"./intelligentShortLink-f7529ad3.js";import{a as i,t as l}from"./mixin-7ecaaf69.js";import{aU as r,ai as s,aq as d,V as n,o as c,T as p,U as m,a as u,_ as f,Y as h,c as y,K as j,a9 as g,Z as b,$ as v,X as _}from"./@vue-e400fd81.js";import{_ as k}from"./quill-image-resize-module-c051113e.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const x={name:"",components:{PhonePreview:r((()=>e((()=>import("./PhonePreview-621e4bde.js")),["assets/js/PhonePreview-621e4bde.js","assets/js/mixin-7ecaaf69.js","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/js/@vue-e400fd81.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css"]))),Add:r((()=>e((()=>import("./Add-8d8555b9.js")),["assets/js/Add-8d8555b9.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css","assets/js/mixin-7ecaaf69.js","assets/js/store-1f3cfa19.js","assets/css/Add-08d9c9e4.css"])))},data:()=>({loading:!1,currentActive:0,form:{jumpType:1,extensionType:1,type:0,avatar:"",qrCode:""},typeDict:i,touchTypeDict:l,data:{}}),computed:{},watch:{},created(){},mounted(){this.$route.query.id&&this.getDetail(),this.clipboard=new this.ClipboardJS(".copy-btn")},unmounted(){this.clipboard.destroy()},methods:{getDetail(){this.loading=!0;let e=this.$route.query.id;t(e).then((({data:e})=>{this.form=e})).catch((e=>{})).finally((()=>{this.loading=!1}))},extensionTypeChange(e){let t=this.typeDict[e].touchType;this.form.type=Object.keys(t)[0]},goStep(e){this.$refs.add.$refs.form.clearValidate()},submit(){this.$refs.add.$refs.form.validate((e=>{e&&([1,0].includes(this.form.type)?this.form.touchType=this.form.type+1:delete this.form.touchType,this.loading=!0,(this.form.id?a:o)(this.form).then((e=>{this.data=e.data,this.currentActive++})).catch((e=>{})).finally((()=>{this.loading=!1})))}))},download(){let e=this.$refs.canvas||document.createElement("canvas");e.width="200",e.height="200",this.$refs.qrCode.setAttribute("crossOrigin","anonymous"),e.getContext("2d").drawImage(this.$refs.qrCode,0,0,200,200),e.toBlob((e=>{let t=URL.createObjectURL(e);const a=document.createElement("a");a.href=t,a.download="短链二维码.png",a.click(),a.remove(),URL.revokeObjectURL(t)}),"image/png")}}},w={class:"g-card fxnone"},A={class:"g-card",style:{background:"var(--bg-black-9)"}},T={class:"fxbw ais mt10",style:{overflow:"auto"}},C={class:"g-card mr10",style:{flex:"auto"}},q={class:"g-card ac"},U=u("div",{style:{}},"短链创建成功",-1),V={class:"g-card",style:{background:"var(--bg-black-9)",width:"50%",margin:"30px auto"}},$=["src"],D={class:"g-footer-sticky"};const L=k(x,[["render",function(e,t,a,o,i,l){const r=s("el-step"),k=s("el-steps"),x=s("el-radio-button"),L=s("el-tooltip"),O=s("el-radio-group"),P=s("el-form-item"),E=s("el-form"),S=s("Add"),R=s("PhonePreview"),z=s("el-icon-SuccessFilled"),I=s("el-button"),B=s("el-container"),F=d("loading");return n((c(),p(B,{direction:"vertical"},{default:m((()=>[u("div",w,[f(k,{active:i.currentActive,"align-center":"","finish-status":"success"},{default:m((()=>[f(r,{title:"短链类型"}),f(r,{title:"内容设置"}),f(r,{title:"生成短链"})])),_:1},8,["active"])]),n(f(E,{"label-suffix":"：","label-width":"",class:"g-card",style:{"padding-right":"18%"}},{default:m((()=>[f(P,{label:"跳转类型"},{default:m((()=>[f(O,{modelValue:i.form.jumpType,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.jumpType=e)},{default:m((()=>[f(x,{label:1},{default:m((()=>[h("跳入微信")])),_:1}),f(L,{effect:"light",content:"尽情期待",placement:"top"},{default:m((()=>[f(x,{label:2,disabled:""},{default:m((()=>[h("跳出微信")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),f(P,{label:"推广类型"},{default:m((()=>[f(O,{modelValue:i.form.extensionType,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.extensionType=e),onChange:l.extensionTypeChange},{default:m((()=>[(c(!0),y(j,null,g(i.typeDict,((e,t)=>(c(),p(x,{key:t,label:+t},{default:m((()=>[h(b(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),f(P,{label:"触达类型"},{default:m((()=>[f(O,{modelValue:i.form.type,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.type=e)},{default:m((()=>[(c(!0),y(j,null,g(i.typeDict,((e,t)=>n((c(),y("div",{key:t},[(c(!0),y(j,null,g(e.touchType,((e,a)=>(c(),p(x,{key:t+"-"+a,label:+a},{default:m((()=>[h(b(e.name),1)])),_:2},1032,["label"])))),128))],512)),[[v,i.form.extensionType==t]]))),128))])),_:1},8,["modelValue"])])),_:1}),u("div",A,[u("span",null,b(i.touchTypeDict[i.form.type].tip),1)])])),_:1},512),[[v,0==i.currentActive]]),n(u("div",T,[u("div",C,[f(S,{ref:"add",form:i.form,"onUpdate:form":t[3]||(t[3]=e=>i.form=e)},null,8,["form"])]),f(R,{data:i.form},null,8,["data"])],512),[[v,1==i.currentActive]]),n(u("div",q,[f(z,{class:"el-icon-SuccessFilled",style:{"font-size":"36px",color:"var(--color)",margin:"10px 0 20px"}}),U,u("div",V,[u("span",null,b(i.data.shortUrl),1)]),u("img",{ref:"qrCode",style:{width:"180px",height:"180px"},src:i.data.qrCode,fit:"fill",crossOrigin:"anonymous"},null,8,$),u("div",null,[f(I,{text:"",class:"copy-btn","data-clipboard-text":i.data.shortUrl},{default:m((()=>[h("复制链接")])),_:1},8,["data-clipboard-text"]),f(I,{text:"",onClick:t[4]||(t[4]=e=>l.download())},{default:m((()=>[h("下载二维码")])),_:1})])],512),[[v,2==i.currentActive]]),u("div",D,[0==i.currentActive?(c(),y(j,{key:0},[f(I,{plain:"",onClick:t[5]||(t[5]=t=>e.$router.back())},{default:m((()=>[h("取消")])),_:1}),f(I,{type:"primary",onClick:t[6]||(t[6]=e=>l.goStep(i.currentActive++))},{default:m((()=>[h("下一步")])),_:1})],64)):1==i.currentActive?(c(),y(j,{key:1},[f(I,{type:"primary",onClick:t[7]||(t[7]=e=>l.goStep(i.currentActive--))},{default:m((()=>[h("上一步")])),_:1}),f(I,{type:"primary",onClick:t[8]||(t[8]=e=>l.submit())},{default:m((()=>[h("生成短链")])),_:1})],64)):2==i.currentActive?(c(),p(I,{key:2,type:"primary",onClick:t[9]||(t[9]=t=>e.$router.back())},{default:m((()=>[h("完成")])),_:1})):_("",!0)])])),_:1})),[[F,i.loading]])}]]);export{L as default};
