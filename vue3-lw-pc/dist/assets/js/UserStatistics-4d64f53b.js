import{k as e,m as t}from"./smartForms-eaa9db9a.js";import o from"./SearchTitle-0bef2c19.js";import{_ as i}from"./quill-image-resize-module-c051113e.js";import{ai as a,aq as l,o as r,c as s,a as n,_ as d,V as p,T as m,U as u,Y as c,K as h,Z as g,X as j}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./moment-8163541f.js";const f={style:{"padding-bottom":"30px"}},w={class:"g-card"},b={class:"mid-action"},y={key:0},v={key:1},S={key:0},x={key:1},q={key:0},k={key:1};const L=i({props:["formId"],components:{SearchTitle:o},data:()=>({loading1:!1,total:0,baseList:"",query:{pageSize:10,pageNum:1},tableList:[],exportLoading:!1,dataSource:"默认渠道"}),methods:{exportFn(){let t=this;this.$confirm("确认导出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.exportLoading=!0;let o=this.tableSearch;o.dataSource&&(o.belongId=this.$route.query.id,e(o).then((e=>{if(null!=e){let t=new Blob([e],{type:"application/vnd.ms-excel"}),o=window.URL.createObjectURL(t);const i=document.createElement("a");i.href=o,i.download="数据报表.xlsx",i.click(),URL.revokeObjectURL(o)}})).catch((e=>{})).finally((()=>{t.exportLoading=!1})))}))},getTableChangeSize(e,o){this.loading1=!0;let i=this.tableSearch;i.dataSource?(i.pageNum=e,i.pageSize=o,this.dataSource=i.dataSource,t(i).then((e=>{this.tableList=e.rows||[],this.total=Number(e.total||0),this.loading1=!1}))):this.loading1=!1},getTableFn(e){this.loading1=!0,e.belongId=this.$route.query.id,e.dataSource?(this.tableSearch=e,this.dataSource=e.dataSource,this.getTableChangeSize(1,10)):this.loading1=!1}},mounted(){}},[["render",function(e,t,o,i,L,I){const _=a("search-title"),z=a("el-button"),T=a("el-table-column"),U=a("el-table"),C=a("pagination"),N=l("loading");return r(),s("div",f,[n("div",null,[n("div",w,[n("div",b,[d(_,{id:e.$route.query.id,showScene:!0,onSearch:I.getTableFn},null,8,["id","onSearch"]),p((r(),m(z,{type:"primary",onClick:I.exportFn},{default:u((()=>[c("导出Excel")])),_:1},8,["onClick"])),[[N,L.exportLoading]])]),L.tableList?(r(),s(h,{key:0},[p((r(),m(U,{data:L.tableList,style:{width:"100%"}},{default:u((()=>[d(T,{label:"序号",width:"50",align:"center"},{default:u((e=>[c(g(e.$index+1),1)])),_:1}),d(T,{label:"日期",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[c(g(e.createTime),1)])),_:1}),d(T,{label:"用户昵称",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[c(g(e.name),1)])),_:1}),d(T,{label:"渠道",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[c(g(e.dataSource),1)])),_:1}),d(T,{label:"openId",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[e.openId?(r(),s("div",y,g(e.openId),1)):j("",!0),e.openId?j("",!0):(r(),s("div",v,"无"))])),_:1}),d(T,{label:"unionId",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[e.unionId?(r(),s("div",S,g(e.unionId),1)):j("",!0),e.unionId?j("",!0):(r(),s("div",x,"无"))])),_:1}),d(T,{label:"是否是企业用户",align:"center","min-width":"100","show-overflow-tooltip":""},{default:u((({row:e})=>[e.isOfficeCustomer?(r(),s("div",q,"是")):j("",!0),e.isOfficeCustomer?j("",!0):(r(),s("div",k,"否"))])),_:1})])),_:1},8,["data"])),[[N,L.loading1]]),d(C,{total:L.total,page:L.query.pageNum,"onUpdate:page":t[0]||(t[0]=e=>L.query.pageNum=e),limit:L.query.pageSize,"onUpdate:limit":t[1]||(t[1]=e=>L.query.pageSize=e),onPagination:t[2]||(t[2]=e=>I.getTableChangeSize(L.query.pageNum,L.query.pageSize))},null,8,["total","page","limit"])],64)):j("",!0)])])])}],["__scopeId","data-v-fc96e6a8"]]);export{L as default};
