import{A as t,d as e}from"../index-044285d2.js";import s from"./IdentityAttachment-b9bf008d.js";import i from"./SelectCustomer-88c1f692.js";import a from"./SelectEndDate-6c9f798c.js";import o from"./SelectSendType-b1e10e8d.js";import{_ as m}from"./quill-image-resize-module-c051113e.js";import{ai as r,o as n,c as p,_ as l,U as d}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./PreviewInPhone-9ed75a0f.js";import"./index-0bf429ac.js";import"./scriptCenter-9e8c6ca2.js";import"./modleCenter-5112f339.js";import"./DragTable-b6be070d.js";import"./sortablejs-b0ad9b27.js";import"./MessageContentForm-5a22ed37.js";import"./staff-48996164.js";import"./PicTitContent-8b500b6d.js";import"./PosterAdd-51b39872.js";import"./index-618cff16.js";import"./tag-13936295.js";import"./fabric-8da0df30.js";import"./poster-241340a9.js";import"./liveCodeTable-73b404a8.js";import"./group-16414119.js";import"./pullNews-68e01d94.js";import"./TemplateLibrary-f59d0076.js";import"./welcome-6ff4c53e.js";import"./businessConver-2b86f97c.js";import"./moment-8163541f.js";const c=m({name:"step3-type-1",components:{SelectCustomerVue:i,IdentityAttachmentVue:s,SelectSendTypeVue:o,SelectEndDateVue:a},props:{data:{type:Object,default:{}},isDetail:{type:Boolean,default:!1}},watch:{data:{handler(t,e){t&&(this.form=t,this.setData())},deep:!0,immediate:!0}},data:()=>({attachmentsData:{templateInfo:"",attachments:[]},form:{type:0,client:{type:0,content:"",sex:null,trackState:null,addBeginTime:"",addEndTime:"",labelIds:"",userIds:"",sendType:0,taskSendTime:"",taskEndTime:""},attachmentsList:[],senderList:[]}}),methods:{setData(){if(this.form.attachments){let e=[];this.form.attachments.forEach((t=>{"text"!==t.msgType&&e.push(t)})),this.attachmentsData.templateInfo=this.form.client.content;let s=t(e);this.attachmentsData.attachments=s,this.$emit("preview",{previewData:JSON.parse(JSON.stringify(this.attachmentsData.attachments))}),this.$emit("previewText",{templateInfo:this.attachmentsData.templateInfo})}this.form.client||(this.form.client={type:0,sex:"",content:"",trackState:"",addBeginTime:"",addEndTime:"",labelIds:"",userIds:"",sendType:0,taskSendTime:"",taskEndTime:""}),this.form.attachments||(this.form.attachments=[])},changeInfo(t){this.form.client.content=t,this.$emit("update",this.form),this.$emit("previewText",{templateInfo:t})},getPhoneData(t){this.$emit("preview",{previewData:t})},getAttentment(t){this.form.attachments=t,this.$emit("update",this.form)},getSendType(t){this.form.client.sendType=t.sendType,this.form.client.taskSendTime=e(t.taskSendTime),this.$emit("update",this.form)},getEndDate(t){this.form.client.taskEndTime=e(t.taskEndTime),this.$emit("update",this.form)},getUpdateCustomer(t){this.form.client=t,this.$emit("update",this.form)}}},[["render",function(t,e,s,i,a,o){const m=r("SelectCustomerVue"),c=r("IdentityAttachmentVue"),h=r("SelectSendTypeVue"),j=r("SelectEndDateVue"),f=r("el-form");return n(),p("div",null,[l(f,{ref:"form",model:a.form,"label-width":"100px"},{default:d((()=>[l(m,{ref:"selectCustomer",isDetail:s.isDetail,dataObj:a.form.client,onUpdate:o.getUpdateCustomer},null,8,["isDetail","dataObj","onUpdate"]),l(c,{ref:"selectAttachment",isDetail:s.isDetail,onPhoneData:o.getPhoneData,onSuccess:o.getAttentment,onChangeInfo:o.changeInfo,baseData:a.attachmentsData},null,8,["isDetail","onPhoneData","onSuccess","onChangeInfo","baseData"]),l(h,{ref:"selectSendType",isDetail:s.isDetail,data:a.form.client,onUpdate:o.getSendType},null,8,["isDetail","data","onUpdate"]),l(j,{isDetail:s.isDetail,ref:"selectEndDate",data:a.form.client,onUpdate:o.getEndDate},null,8,["isDetail","data","onUpdate"])])),_:1},8,["model"])])}]]);export{c as default};
