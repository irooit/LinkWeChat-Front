import{a as e,u as t,b as i}from"./index-0bf429ac.js";import{g as l}from"./staff-48996164.js";import a from"./PreviewInPhone-9ed75a0f.js";import{ai as s,aq as r,o,c as d,a as m,_ as n,U as h,K as p,a9 as u,P as g,Z as c,aa as f,Y as y,V as b,O as x,$ as V,bl as L,bj as k,T as U,Q as v,X as w}from"./@vue-e400fd81.js";import{_ as N,Q as _}from"./quill-image-resize-module-c051113e.js";import C from"./PicTitContent-8b500b6d.js";import S from"./PosterAdd-51b39872.js";const T={name:"MaPage",components:{PreviewInPhone:a},props:{type:{type:String,default:"0"},selected:{type:[Array,String],default:""},isFriends:{type:Boolean,default:!1}},data(){return{mobForm:[{}],groupList:[],groupVisible:!1,groupForm:{mediaType:this.type,name:""},groupRules:{name:[{required:!0,message:"请输入分组名称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}]},groupIndex:0,delObj:{updateOrDel:1,moduleType:1,ids:[]},times:null,submitLoading:!1,audioType:["amr"],loading:!0,query:{pageNum:1,pageSize:10,materialName:"",mediaType:"0",categoryId:""},list:[],total:0,treeForm:{},treeDialogVisible:!1,group:"",groupDialogVisible:!1,groupProps:{expandTrigger:"hover",checkStrictly:!0,children:"children",label:"name",value:"id",emitPath:!1},form:{}}},watch:{},computed:{},created(){this.query.mediaType=this.type,this.getCodeCategoryListFn()},mounted(){this.mobForm[0].msgType=this.type},methods:{getCodeCategoryListFn(){let e={mediaType:this.type};this.isFriends&&(e.scene=1),l(e).then((e=>{200==e.code&&(this.groupList=e.data,this.query.categoryId=this.groupList[0].id,this.groupIndex=0,this.query.pageNum=1,this.getList())}))},switchGroup(e,t){this.groupIndex=e,this.query.categoryId=t.id,this.search()},search(){this.query.pageNum=1,this.getList()},editGroup(e){this.groupForm=JSON.parse(JSON.stringify(e)),this.groupVisible=!0},resetQuery(){this.query.materialName="",this.search()},getList(t){t&&(this.query.pageNum=t),this.loading=!0,this.isFriends&&(this.query.scene=1),e(this.query).then((({rows:e,total:t})=>{this.list=e.sort(((e,t)=>+new Date(t.updateTime)-+new Date(e.updateTime))),this.total=+t,this.loading=!1,this.$emit("listChange",this.list,this.type)})).catch((()=>{this.loading=!1}))}}},I={class:"page"},$={style:{"margin-top":"16px"}},F=(e=>(L("data-v-1501afb0"),e=e(),k(),e))((()=>m("div",{class:"title"},[m("div",{class:"title-name"},"素材分组")],-1))),q={class:"item-list"},O=["onClick"],P={class:"name"},E={class:"g-card",style:{"padding-bottom":"0"}},j={class:"pad20"};const A=N(T,[["render",function(e,t,i,l,a,L){const k=s("el-col"),U=s("el-input"),v=s("el-button"),w=s("pagination"),N=s("el-row"),_=r("loading");return o(),d("div",I,[m("div",$,[n(N,{type:"flex",justify:"space-between"},{default:h((()=>[n(k,{span:5,class:"left pad20",style:{"border-radius":"4px",background:"var(--bg-white)"}},{default:h((()=>[F,m("div",q,[(o(!0),d(p,null,u(a.groupList,((e,t)=>(o(),d("div",{class:g(["item",{active:a.groupIndex==t}]),key:e.id,onClick:i=>L.switchGroup(t,e)},[m("div",P,c(e.name+" ("+e.number+")"),1)],10,O)))),128))])])),_:1}),n(k,{span:19,style:{"margin-top":"0px"}},{default:h((()=>[m("div",E,[n(U,{modelValue:a.query.materialName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.query.materialName=e),placeholder:"请输入素材标题",clearable:"","prefix-icon":"el-icon-search",style:{width:"300px"},onKeyup:t[1]||(t[1]=f((e=>L.search()),["enter"]))},null,8,["modelValue"]),n(v,{class:"ml10",onClick:t[2]||(t[2]=e=>L.getList(1)),type:"primary"},{default:h((()=>[y("查询")])),_:1}),n(v,{onClick:L.resetQuery},{default:h((()=>[y("重置")])),_:1},8,["onClick"])]),m("div",j,[b((o(),d("div",null,[x(e.$slots,"default",{list:a.list},void 0,!0)])),[[_,a.loading]]),b(n(w,{total:a.total,page:a.query.pageNum,"onUpdate:page":t[3]||(t[3]=e=>a.query.pageNum=e),limit:a.query.pageSize,"onUpdate:limit":t[4]||(t[4]=e=>a.query.pageSize=e),onPagination:t[5]||(t[5]=e=>L.getList())},null,8,["total","page","limit"]),[[V,a.total>0]])])])),_:3})])),_:3})])])}],["__scopeId","data-v-1501afb0"]]),M={name:"",props:{choseDialog:{type:Boolean,default:!1},talkListLength:{type:Number,default:0},moduleType:{type:Number,default:null},maxlength:{type:Number,default:9},noApplets:{type:Boolean,default:!1},isFriends:{type:Boolean,default:!1}},watch:{choseDialog:{handler(e){this.dialogVisibel=e}},maxlength:{handler(e){this.maxlength2=e}}},computed:{},components:{MaPage:A,PicTitContent:C},created(){this.dealList()},mounted(){},data:()=>({dialogVisibel:!1,activeName:"text",index:0,picindex:1,paneList:[],opened:["text"],ids:[],itemArry:[],inx:0,maxlength2:9}),methods:{coverContent:(e,t)=>(e&&e.length>t&&(e=e.substr(0,t)+"..."),e),listChange(e,t){this.paneList=this.paneList.map((e=>(t===e.type&&(e.list.forEach((e=>{this.ids=this.ids.filter((t=>t.id!==e.id))})),e.list=[]),e)))},dealList(){this.paneList=[{list:[],label:"文本",name:"text",type:"4"},{list:[],label:"图片",name:"image",type:"0"},{list:[],label:"图文",name:"imageText",type:"9"},{list:[],label:"小程序",name:"applet",type:"11"},{list:[],label:"文章",name:"article",type:"12"},{list:[],label:"视频",name:"video",type:"2"},{list:[],label:"文件",name:"file",type:"3"},{list:[],label:"海报",name:"poster",type:"5"},{list:[],label:"外链",name:"outChain",type:"19"}],this.picindex=1,this.activeName="text",(this.$route.query.tplType||4===this.moduleType)&&(this.paneList.shift(),this.picindex=0,this.activeName="image"),this.noApplets&&(this.paneList=this.paneList.filter((e=>"11"!=e.type)))},clearPaneList(){this.paneList.forEach((e=>{e.list=[]}))},changeBox(e,t){e.preventDefault();let i=!0;if(this.isFriends&&(this.maxlength2=9,this.paneList.forEach(((e,t)=>{if(e.list.length>0&&0!==t)return this.$message.error("仅允许选择一种类型的素材"),void(i=!1)}))),i){if(this.ids=[],this.paneList.forEach((e=>{e.list&&e.list.length&&e.list.forEach((e=>{this.ids.push(e)}))})),(this.ids.length+this.talkListLength>this.maxlength2||this.ids.length+this.talkListLength===this.maxlength2)&&!t.isCheck)return void this.$message.error("最多新建或选择"+this.maxlength2+"个素材,已新建"+this.talkListLength+"个素材");t.isCheck=!t.isCheck,t.isCheck?this.paneList[this.picindex].list.push(t):this.paneList[this.picindex].list=this.paneList[this.picindex].list.filter((e=>e.id!==t.id)),this.ids=[],this.paneList.forEach((e=>{e.list&&e.list.length&&e.list.forEach((e=>{this.ids.push(e)}))}))}},centerCancel(){this.dialogVisibel=!1,this.$emit("update:choseDialog",this.dialogVisibel),this.$refs.multipleTable.forEach(((e,t)=>{e.clearSelection()})),this.clearPaneList(),this.ids=[]},dialogClose(){this.dialogVisibel=!1,this.$emit("update:choseDialog",this.dialogVisibel),this.$refs.multipleTable.forEach(((e,t)=>{e.clearSelection()})),this.clearPaneList(),this.ids=[]},centerSubmit(){if(this.ids.length){if(this.isFriends&&("0"===this.ids[0].mediaType?this.maxlength2=9:this.maxlength2=1),this.ids.length+this.talkListLength>this.maxlength2)return void(this.isFriends?this.$message.error("除图片素材可选9条数据,其他类型仅可选择一条数据,且只能选择一种类型"):this.$message.error("最多新建或选择"+this.maxlength2+"个素材"));this.dialogVisibel=!1,this.$emit("itemArry",this.ids,this.maxlength2),this.$emit("update:choseDialog",this.dialogVisibel),this.$refs.multipleTable.forEach((e=>{e.clearSelection()})),this.ids=[],this.clearPaneList()}else this.$message.error("请选择素材!")},handleSelect(e,t){this.isFriends&&(this.maxlength2=1,this.paneList.forEach(((e,t)=>{e.list.length>0&&t!==+this.index&&this.$message.error("仅允许选择一种类型的素材")})),this.paneList[this.index].list.length>0&&this.$message.error("除图片素材可选9条数据,其他类型仅可选择一条数据"));let i=this.paneList[this.index].list,l=!1;i.length&&i.forEach((e=>{e.id===t.id&&(l=!0)})),l?this.paneList[this.index].list=this.paneList[this.index].list.filter((e=>e.id!=t.id)):this.paneList[this.index].list.push(t),this.getIds(),this.ids.length+this.talkListLength>this.maxlength2&&(this.$nextTick((()=>{this.index&&this.$refs.multipleTable[this.inx].toggleRowSelection(t,!1)})),this.isFriends||this.$message.error("最多新建或选择"+this.maxlength2+"个素材,已新建"+this.talkListLength+"个素材"),this.paneList[this.index].list=this.paneList[this.index].list.filter((e=>e.id!=t.id)),this.getIds())},selectAll(e){this.isFriends&&(this.maxlength2=1),e.length?this.paneList[this.index].list=e:this.paneList[this.index].list=[],this.getIds(),this.ids.length+this.talkListLength>this.maxlength2&&(e.forEach((e=>{this.$refs.multipleTable[this.inx].toggleAllSelection(e,!1)})),this.isFriends||this.$message.error("最多新建或选择"+this.maxlength2+"个素材,已新建"+this.talkListLength+"个素材"),this.paneList[this.index].list=[],this.getIds())},getIds(){this.ids=[],this.paneList.forEach((e=>{e.list&&e.list.length&&e.list.forEach((e=>{this.ids.push(e)}))}))},filType(e){let t=JSON.parse(JSON.stringify(e));t=t.split(".");let i=t[t.length-1];return"pdf"===i?"pdf":["doc","docx"].includes(i)?"word":["ppt","pptx","pps","pptsx"].includes(i)?"ppt":""},tabClick(e){this.index=e.index;let t=+this.index;this.inx=0!==t?t-1:t}}},J={key:0},z={key:0},D=["onClick"],R={class:"checkboxStyle"},G={class:"title ml10"},B={key:1,class:"emptyStyle"},Q=[(e=>(L("data-v-a9c2b1e1"),e=e(),k(),e))((()=>m("span",null,"暂无数据",-1)))],K={class:"footer"},X={class:"footerColor"};const Z=N(M,[["render",function(e,t,i,l,a,r){const g=s("el-checkbox"),f=s("el-tooltip"),b=s("el-checkbox-group"),x=s("el-table-column"),V=s("PicTitContent"),L=s("el-table"),k=s("MaPage"),N=s("el-tab-pane"),_=s("el-tabs"),C=s("el-button"),S=s("el-dialog");return o(),d("div",null,[a.dialogVisibel?(o(),U(S,{key:0,title:"选择素材",modelValue:a.dialogVisibel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dialogVisibel=e),width:"80%","append-to-body":"","close-on-click-modal":!1,onClose:r.dialogClose},{footer:h((()=>[m("div",K,[m("div",null,[y(" 已选择 "),m("span",X,c(a.ids.length),1),y(" 个素材 ")]),m("div",null,[n(C,{type:"primary",onClick:r.centerSubmit},{default:h((()=>[y("确 定")])),_:1},8,["onClick"]),n(C,{onClick:r.centerCancel},{default:h((()=>[y("取 消")])),_:1},8,["onClick"])])])])),default:h((()=>[n(_,{modelValue:a.activeName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.activeName=e),onTabClick:r.tabClick},{default:h((()=>[(o(!0),d(p,null,u(a.paneList,((e,t)=>(o(),U(N,{key:t,label:e.label+"("+e.list.length+")",name:e.name},{default:h((()=>[n(k,{ref_for:!0,ref:"page",type:e.type,isFriends:i.isFriends,onListChange:r.listChange},{default:h((({list:t})=>["0"===e.type?(o(),d("div",J,[t&&t.length?(o(),d("div",z,[n(b,{modelValue:a.paneList[a.picindex].list,"onUpdate:modelValue":e=>a.paneList[a.picindex].list=e,class:"imgStyle"},{default:h((()=>[(o(!0),d(p,null,u(t,((e,t)=>(o(),d("div",{class:"imgItem",key:t,onClick:t=>r.changeBox(t,e)},[m("div",R,[n(g,{label:e,style:{width:"20px",height:"20px"},checked:e.isCheck},null,8,["label","checked"]),n(f,{content:e.materialName,placement:"top",disabled:!e.materialName||e.materialName.length<6},{default:h((()=>[m("div",G,c(r.coverContent(e.materialName,6)),1)])),_:2},1032,["content","disabled"])]),m("div",{class:"img",style:v({"background-image":"url("+e.materialUrl+")"})},null,4)],8,D)))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])):(o(),d("div",B,Q))])):(o(),U(L,{key:1,data:t,ref_for:!0,ref:"multipleTable",onSelect:r.handleSelect,onSelectAll:r.selectAll},{default:h((()=>[n(x,{type:"selection",width:"50",align:"center"}),n(x,{label:"素材",align:"left"},{default:h((({row:e})=>[n(V,{row:e,width:"500px"},null,8,["row"])])),_:1})])),_:2},1032,["data","onSelect","onSelectAll"]))])),_:2},1032,["type","isFriends","onListChange"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","onTabClick"])])),_:1},8,["modelValue","onClose"])):w("",!0)])}],["__scopeId","data-v-a9c2b1e1"]]);var Y=(e,t,i)=>{/\.html$/gi.test(t)?i():i(new Error("必须以 .html 作为后缀"))},H=(e,t,i)=>{/^https?:\/\//gi.test(t)?i():i(new Error("必须以 http://或 https://开头"))};const W={name:"message-content-form",components:{PosterAdd:S,QuillEditor:_},data:()=>({picMaxlength:9,form:{weMaterialImgAoList:[]},editForm:{},editList:{},posterId:void 0,dialogVisible:!1,isedit:!1,materialIds:[],rules:Object.freeze({content:[{required:!0,message:"不能为空",trigger:"blur"}],materialUrl:[{required:!0,message:"不能为空",trigger:"change"}],materialName:[{required:!0,message:"不能为空",trigger:"blur"}],digest:[{required:!0,message:"不能为空",trigger:"blur"}],coverUrl:[{required:!0,message:"不能为空",trigger:"blur"}],weMaterialImgAoList:[{required:!0,message:"不能为空",trigger:"blur"}],html:[{required:!0,message:"不能为空",trigger:"blur"},{validator:Y,trigger:"blur"}],http:[{required:!0,message:"不能为空",trigger:"blur"},{validator:H,trigger:"blur"}]}),submitLoading:!1}),props:{materialForm:{type:Object,default:{}},materialDialogVisible:{type:Boolean,default:!1},materialType:{type:String,default:null},editMaterialForm:{type:Object,default:{}},materialTalkList:{type:Array,default:[]},moduleType:{type:Number,default:1},maxlength:{type:Number,default:9}},watch:{materialTalkList:{handler(e){this.talkList=JSON.parse(JSON.stringify(e))},immediate:!0,deep:!0},materialForm:{handler(e){e&&Object.assign(this.form,e)},immediate:!0,deep:!0},editMaterialForm:{handler(e){e&&(this.posterId=e.id,this.type=e.mediaType,this.dialogVisible=!0,this.form=e,this.isedit=!0,this.editForm=JSON.parse(JSON.stringify(e)),this.editList=JSON.parse(JSON.stringify(this.talkList)))}},materialType:{handler(e){this.posterId="",this.type=e,this.isedit=!1,this.materialIds=[],this.talkList&&this.talkList.length&&this.talkList.forEach((e=>{this.materialIds.push(e.id)}))}},materialDialogVisible:{handler(e){this.dialogVisible=e,this.picMaxlength=this.maxlength-this.talkList.length}}},methods:{getPicUrl(e){this.form.coverUrl=e},mediaClose(){this.dialogVisible=!1,this.$emit("dialogClose",!1),this.form={}},getPosterForm(e){if(e){if(this.posterId){JSON.parse(JSON.stringify(this.talkList)).forEach(((t,i)=>{t.id===this.posterId&&(e.data.mediaType="5",this.talkList.splice(i,1,e.data))}))}else this.talkList.push(e.data);this.$emit("dialogClose",!1,this.talkList)}else null===e&&this.$emit("dialogClose",!1);this.dialogVisible=!1},submit(){this.submitLoading=!0,this.times&&clearTimeout(this.times),!this.form.id&&this.form.weMaterialImgAoList&&this.form.weMaterialImgAoList.forEach(((e,t)=>{e.materialUrl=e.url,e.materialName=e.name})),this.$refs.form.validate((e=>{e?this.times=setTimeout((()=>{let e=JSON.parse(JSON.stringify(this.form));e.mediaType=this.type,e.moduleType=this.moduleType;let l=e,a=JSON.parse(JSON.stringify(this.talkList));if("0"!==l.mediaType||1==l.moduleType||e.id)(e.id?t:i)(e).then((t=>{this.msgSuccess("操作成功"),this.dialogVisible=!1;let i=JSON.parse(JSON.stringify(t.data));"string"!=typeof i&&i.forEach((e=>{l.id=e,this.talkList.push(l)})),e.id&&this.talkList.forEach(((t,i)=>{t.id===e.id&&this.talkList.splice(i,1,e)})),this.$emit("dialogClose",!1,this.talkList),this.dialogVisible=!1,this.$refs.form.resetFields(),this.picReset(),this.submitLoading=!1})).catch((()=>{this.dialogVisible=!1,this.$emit("dialogClose",!1),this.submitLoading=!1}));else{if(l.weMaterialImgAoList.forEach(((e,t)=>{let i=JSON.parse(JSON.stringify(l));i.materialName=e.materialName,i.materialUrl=e.materialUrl,a.push(i)})),a.length>this.maxlength)return this.$message.error("创建的个数不能超过"+this.maxlength+"个"),void(this.submitLoading=!1);(e.id?t:i)(e).then((e=>{this.msgSuccess("操作成功"),this.talkList=a,this.dialogVisible=!1,this.materialIds=this.materialIds.concat(e.data),this.talkList.forEach(((e,t)=>{e.id=this.materialIds[t]})),this.dialogVisible=!1,this.$emit("dialogClose",!1,this.talkList),this.picReset(),this.$refs.form.resetFields(),this.submitLoading=!1})).catch((()=>{this.dialogVisible=!1,this.$emit("dialogClose",!1),this.submitLoading=!1}))}}),300):this.submitLoading=!1}))},picReset(){this.form={},this.mobForm=[{}],this.editList=[],this.editForm={}},cancel(){this.editForm.id&&(this.talkList=this.editList),this.$emit("dialogClose",!1),this.dialogVisible=!1,this.picReset()}}},ee=e=>(L("data-v-03d0991b"),e=e(),k(),e),te=ee((()=>m("div",{style:{display:"flex"}},[m("div",{style:{color:"var(--font-black)"}}," 小程序必须已经绑定关联到企业微信，否则将无法在欢迎语、群发、话术中正常发送。 "),m("a",{href:"https://www.yuque.com/linkwechat/help/gy4ghv",target:"_blank",style:{color:"var(--color)"}}," 如何关联绑定? ")],-1))),ie=ee((()=>m("div",{class:"tip"},"标题对客户不可见，仅用于查询场景",-1))),le=ee((()=>m("div",null,"支持jpg/jpeg/png格式，图片大小不超过20M",-1))),ae=ee((()=>m("div",null,"支持jpg/jpeg/png格式，建议200*200",-1))),se=ee((()=>m("div",{class:"sub-des"},"必须以 http://或 https://开头",-1))),re=ee((()=>m("div",{class:"sub-des"},"若下方 外链预览 项未正常显示出页面，则该链可能开启了防盗功能，请勿使用",-1))),oe=ee((()=>m("div",null,"支持jpg/jpeg/png格式，建议200*200",-1))),de=["src"],me=ee((()=>m("div",{class:"sub-des"},[m("a",{href:"https://www.yuque.com/linkwechat/help/gy4ghv#cAwOh",target:"_blank"},"如何查询小程序ID?")],-1))),ne=ee((()=>m("div",{class:"sub-des"},[m("a",{href:"https://www.yuque.com/linkwechat/help/gy4ghv#a1bXG",target:"_blank"},"如何添加小程序页面路径?")],-1))),he=ee((()=>m("div",null,"支持jpg/jpeg/png格式，建议520*416",-1))),pe=ee((()=>m("div",null,"支持mp4/mov格式，视频大小不超过100M",-1))),ue=ee((()=>m("div",null,"支持pdf/ppt/word文件，单个文件大小不超过50M",-1))),ge={class:"dialog-footer"};const ce=N(W,[["render",function(e,t,i,l,a,u){var g;const f=s("el-alert"),x=s("el-input"),V=s("el-form-item"),L=s("Upload"),k=s("QuillEditor"),v=s("PosterAdd"),N=s("el-form"),_=s("el-button"),C=s("el-dialog"),S=r("loading");return o(),d("div",null,[a.dialogVisible?(o(),U(C,{key:0,title:(a.form.id?"编辑":"新建")+(null==(g=e.$dictMaterialType[e.type])?void 0:g.name),modelValue:a.dialogVisible,"onUpdate:modelValue":t[31]||(t[31]=e=>a.dialogVisible=e),width:"90%","append-to-body":"","close-on-click-modal":!1,"before-close":u.mediaClose},{footer:h((()=>[m("div",ge,["5"!==e.type?b((o(),U(_,{key:0,type:"primary",onClick:u.submit},{default:h((()=>[y("确 定")])),_:1},8,["onClick"])),[[S,a.submitLoading]]):w("",!0),"5"!==e.type?(o(),U(_,{key:1,onClick:u.cancel},{default:h((()=>[y("取 消")])),_:1},8,["onClick"])):w("",!0)])])),default:h((()=>["11"===e.type?(o(),U(f,{key:0,type:"warning","show-icon":""},{title:h((()=>[te])),_:1})):w("",!0),n(N,{ref:"form",model:a.form,rules:a.rules,"label-width":"100px"},{default:h((()=>{var l;return["4"===e.type?(o(),U(V,{key:0,label:(null==(l=e.$dictMaterialType[e.type])?void 0:l.name)+"标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.materialName=e),placeholder:"请输入标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"]),ie])),_:1},8,["label"])):w("",!0),"4"===e.type?(o(),U(V,{key:1,label:"文本内容",prop:"content"},{default:h((()=>[n(x,{modelValue:a.form.content,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.content=e),type:"textarea",autosize:{minRows:2,maxRows:50},placeholder:"请输入内容",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])])),_:1})):"0"===e.type?(o(),d(p,{key:2},[a.isedit?(o(),U(V,{key:1,label:"图片",prop:"materialUrl"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.materialUrl,"onUpdate:fileUrl":t[3]||(t[3]=e=>a.form.materialUrl=e),fileName:a.form.materialName,"onUpdate:fileName":t[4]||(t[4]=e=>a.form.materialName=e),maxSize:20,type:"0"},{tip:h((()=>[le])),_:1},8,["fileUrl","fileName"])):w("",!0)])),_:1})):(o(),U(V,{key:0,label:"图片",prop:"weMaterialImgAoList"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileList:a.form.weMaterialImgAoList,"onUpdate:fileList":t[2]||(t[2]=e=>a.form.weMaterialImgAoList=e),maxSize:20,type:"0",multiple:!0,limit:a.picMaxlength},{tip:h((()=>[m("div",null,"支持jpg/jpeg/png格式，图片大小不超过20M，支持最多"+c(a.picMaxlength)+"张批量上传",1)])),_:1},8,["fileList","limit"])):w("",!0)])),_:1}))],64)):"9"===e.type?(o(),d(p,{key:3},[n(V,{label:"图文地址",prop:"materialUrl",rules:a.rules.http},{default:h((()=>[n(x,{modelValue:a.form.materialUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.materialUrl=e),type:"text",placeholder:"请输入图文地址，以http://或https://开头"},null,8,["modelValue"])])),_:1},8,["rules"]),n(V,{label:"图文标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[6]||(t[6]=e=>a.form.materialName=e),type:"text",maxlength:32,"show-word-limit":"",placeholder:"请输入图文标题"},null,8,["modelValue"])])),_:1}),n(V,{label:"图文描述"},{default:h((()=>[n(x,{modelValue:a.form.content,"onUpdate:modelValue":t[7]||(t[7]=e=>a.form.content=e),type:"textarea",maxlength:128,"show-word-limit":"",autosize:{minRows:3,maxRows:50},placeholder:"请输入图文描述"},null,8,["modelValue"])])),_:1}),n(V,{label:"图文封面"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.coverUrl,"onUpdate:fileUrl":t[8]||(t[8]=e=>a.form.coverUrl=e),type:"0"},{tip:h((()=>[ae])),_:1},8,["fileUrl"])):w("",!0)])),_:1})],64)):"8"===e.type?(o(),d(p,{key:4},[n(V,{label:"链接标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[9]||(t[9]=e=>a.form.materialName=e),type:"text",maxlength:64,"show-word-limit":"",placeholder:"请输入链接标题"},null,8,["modelValue"])])),_:1}),n(V,{label:"链接",prop:"materialUrl",rules:a.rules.http},{default:h((()=>[n(x,{modelValue:a.form.materialUrl,"onUpdate:modelValue":t[10]||(t[10]=e=>a.form.materialUrl=e),placeholder:"请输入链接"},null,8,["modelValue"]),se])),_:1},8,["rules"])],64)):"19"===e.type?(o(),d(p,{key:5},[n(V,{label:"外链地址",prop:"materialUrl",rules:a.rules.http},{default:h((()=>[n(x,{modelValue:a.form.materialUrl,"onUpdate:modelValue":t[11]||(t[11]=e=>a.form.materialUrl=e),type:"text",placeholder:"请输入外链地址，以http://或https://开头"},null,8,["modelValue"]),re])),_:1},8,["rules"]),n(V,{label:"外链标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[12]||(t[12]=e=>a.form.materialName=e),type:"text",maxlength:32,"show-word-limit":"",placeholder:"请输入外链标题"},null,8,["modelValue"])])),_:1}),n(V,{label:"外链描述"},{default:h((()=>[n(x,{modelValue:a.form.content,"onUpdate:modelValue":t[13]||(t[13]=e=>a.form.content=e),type:"textarea",maxlength:128,"show-word-limit":"",autosize:{minRows:3,maxRows:50},placeholder:"请输入外链描述"},null,8,["modelValue"])])),_:1}),n(V,{label:"外链封面"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.coverUrl,"onUpdate:fileUrl":t[14]||(t[14]=e=>a.form.coverUrl=e),imgSize:a.form.memorySize,"onUpdate:imgSize":t[15]||(t[15]=e=>a.form.memorySize=e),type:"0"},{tip:h((()=>[oe])),_:1},8,["fileUrl","imgSize"])):w("",!0)])),_:1}),n(V,{label:"外链预览"},{default:h((()=>[a.form.materialUrl?(o(),d("iframe",{class:"iframe",src:a.form.materialUrl,key:a.form.materialUrl},null,8,de)):w("",!0)])),_:1})],64)):"11"===e.type?(o(),d(p,{key:6},[n(V,{label:"小程序标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[16]||(t[16]=e=>a.form.materialName=e),placeholder:"请输入小程序标题",maxlength:16,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(V,{label:"小程序ID",prop:"digest"},{default:h((()=>[n(x,{modelValue:a.form.digest,"onUpdate:modelValue":t[17]||(t[17]=e=>a.form.digest=e),placeholder:"小程序AppID"},null,8,["modelValue"]),me])),_:1}),n(V,{label:"页面路径",prop:"materialUrl",rules:a.rules.html},{default:h((()=>[n(x,{modelValue:a.form.materialUrl,"onUpdate:modelValue":t[18]||(t[18]=e=>a.form.materialUrl=e),placeholder:"请输入小程序路径，必须以 .htmld 作为后缀"},null,8,["modelValue"]),ne])),_:1},8,["rules"]),n(V,{label:"封面",prop:"coverUrl"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.coverUrl,"onUpdate:fileUrl":t[19]||(t[19]=e=>a.form.coverUrl=e),type:"0"},{tip:h((()=>[he])),_:1},8,["fileUrl"])):w("",!0)])),_:1})],64)):"2"===e.type?(o(),d(p,{key:7},[n(V,{label:"视频标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[20]||(t[20]=e=>a.form.materialName=e),placeholder:"请输入视频标题",maxlength:32,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(V,{label:"视频描述"},{default:h((()=>[n(x,{modelValue:a.form.digest,"onUpdate:modelValue":t[21]||(t[21]=e=>a.form.digest=e),type:"textarea",placeholder:"请输入视频描述",rows:3,maxlength:128,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(V,{label:"上传视频",prop:"materialUrl"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.materialUrl,"onUpdate:fileUrl":t[22]||(t[22]=e=>a.form.materialUrl=e),fileName:a.form.materialName,"onUpdate:fileName":t[23]||(t[23]=e=>a.form.materialName=e),type:e.type,onGetPicUrl:u.getPicUrl},{tip:h((()=>[pe])),_:1},8,["fileUrl","fileName","type","onGetPicUrl"])):w("",!0)])),_:1})],64)):"3"===e.type?(o(),d(p,{key:8},[n(V,{label:"文件标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[24]||(t[24]=e=>a.form.materialName=e),placeholder:"请输入文件标题",maxlength:32,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(V,{label:"文件描述"},{default:h((()=>[n(x,{modelValue:a.form.digest,"onUpdate:modelValue":t[25]||(t[25]=e=>a.form.digest=e),type:"textarea",placeholder:"请输入文件描述",maxlength:100,"show-word-limit":"",autosize:{minRows:2,maxRows:10}},null,8,["modelValue"])])),_:1}),n(V,{label:"上传文件",prop:"materialUrl"},{default:h((()=>[a.dialogVisible?(o(),U(L,{key:0,fileUrl:a.form.materialUrl,"onUpdate:fileUrl":t[26]||(t[26]=e=>a.form.materialUrl=e),fileName:a.form.materialName,"onUpdate:fileName":t[27]||(t[27]=e=>a.form.materialName=e),type:e.type},{tip:h((()=>[ue])),_:1},8,["fileUrl","fileName","type"])):w("",!0)])),_:1})],64)):"12"===e.type?(o(),d(p,{key:9},[n(V,{label:"文章标题",prop:"materialName"},{default:h((()=>[n(x,{modelValue:a.form.materialName,"onUpdate:modelValue":t[28]||(t[28]=e=>a.form.materialName=e),placeholder:"请输入文章标题",maxlength:30,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(V,{label:"文章描述"},{default:h((()=>[n(x,{modelValue:a.form.digest,"onUpdate:modelValue":t[29]||(t[29]=e=>a.form.digest=e),type:"textarea",placeholder:"请输入文章描述",maxlength:100,"show-word-limit":""},null,8,["modelValue"])])),_:1}),n(k,{style:{margin:"10px 10px 0"},modelValue:a.form.content,"onUpdate:modelValue":t[30]||(t[30]=e=>a.form.content=e),ref:"myQuillEditor"},null,8,["modelValue"])],64)):"5"===e.type?(o(),d(p,{key:10},[a.dialogVisible?(o(),U(v,{key:0,moduleType:i.moduleType,onGetPosterForm:u.getPosterForm,posId:a.posterId},null,8,["moduleType","onGetPosterForm","posId"])):w("",!0)],64)):w("",!0)]})),_:1},8,["model","rules"])])),_:1},8,["title","modelValue","before-close"])):w("",!0)])}],["__scopeId","data-v-03d0991b"]]);export{Z as M,ce as a};
