import{g as e,e as t}from"./sendRecord-284280d0.js";import{ai as a,aq as l,o as i,c as s,_ as o,U as r,a as n,K as p,a9 as u,T as d,Y as m,Z as c,R as g,V as h,P as y,Q as f,$ as j}from"./@vue-e400fd81.js";import{_ as b}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const q={key:0,class:"tag-place"},S={class:"g-card"},v=["onClick"],U={class:"ml10"};const _=b({data:()=>({query:{pageNum:1,pageSize:10,userId:"",customerName:"",sendState:"",beginTime:"",endTime:""},dateRange:[],total:0,list:[],multiSelect:[],loading:!1,queryUser:[],dialogVisibleSelectUser:!1,dictStatusType:Object.freeze({0:"全部类型",1:"待领取",2:"已领取",3:"发放失败",5:"已退款"})}),watch:{},created(){this.getList()},methods:{getList(t){this.dateRange?[this.query.beginTime,this.query.endTime]=this.dateRange:(this.query.beginTime="",this.query.endTime=""),t&&(this.query.pageNum=t),this.loading=!0,e(this.query).then((({rows:e,total:t})=>{this.list=e,this.total=+t,this.loading=!1})).catch((()=>{this.loading=!1}))},resetQuery(){this.dateRange=[],this.queryUser=[],this.$refs.queryForm.resetFields(),this.getList(1)},exportData(){this.$confirm("确认导出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.loading=!0,t(this.query)))).then((e=>{this.download(e.msg)})).catch((e=>{})).finally((()=>{this.loading=!1}))},handleSelectionChange(e){this.multiSelect=e},getDisplayGroups(e){if(e.groupList){return e.groupList.map((e=>e.groupName)).join("，")}}}},[["render",function(e,t,b,_,V,w){const T=a("el-tag"),k=a("el-form-item"),x=a("el-input"),N=a("el-date-picker"),C=a("el-option"),R=a("el-select"),z=a("el-button"),L=a("el-form"),D=a("el-table-column"),I=a("el-image"),Y=a("el-icon-Avatar"),M=a("el-table"),A=a("pagination"),B=a("SelectUser"),E=l("loading");return i(),s("div",null,[o(L,{inline:"","label-position":"right",model:V.query,"label-width":"",ref:"queryForm",class:"top-search"},{default:r((()=>[o(k,{label:"发放员工",prop:"userId"},{default:r((()=>[n("div",{class:"tag-input",onClick:t[0]||(t[0]=e=>V.dialogVisibleSelectUser=!0)},[V.queryUser.length?(i(!0),s(p,{key:1},u(V.queryUser,((e,t)=>(i(),d(T,{key:t},{default:r((()=>[m(c(e.name),1)])),_:2},1024)))),128)):(i(),s("span",q,"请选择"))])])),_:1}),o(k,{label:"领取客户",prop:"customerName"},{default:r((()=>[o(x,{clearable:"",modelValue:V.query.customerName,"onUpdate:modelValue":t[1]||(t[1]=e=>V.query.customerName=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),o(k,{label:"发放时间"},{default:r((()=>[o(N,g({clearable:"",modelValue:V.dateRange,"onUpdate:modelValue":t[2]||(t[2]=e=>V.dateRange=e),"value-format":"YYYY-MM-DD",type:"daterange"},e.pickerOptions,{"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"}),null,16,["modelValue"])])),_:1}),o(k,{label:"全部类型",prop:"sendState"},{default:r((()=>[o(R,{clearable:"",modelValue:V.query.sendState,"onUpdate:modelValue":t[3]||(t[3]=e=>V.query.sendState=e),placeholder:"请选择"},{default:r((()=>[(i(!0),s(p,null,u(V.dictStatusType,((e,t)=>(i(),d(C,{key:t,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(k,{label:""},{default:r((()=>[o(z,{type:"primary",onClick:t[4]||(t[4]=e=>w.getList(1))},{default:r((()=>[m("查询")])),_:1}),o(z,{onClick:t[5]||(t[5]=e=>w.resetQuery())},{default:r((()=>[m("重置")])),_:1})])),_:1}),o(k,{style:{float:"right"}},{default:r((()=>[o(z,{type:"primary",onClick:t[6]||(t[6]=e=>w.exportData())},{default:r((()=>[m("导出Excel")])),_:1})])),_:1})])),_:1},8,["model"]),n("div",S,[h((i(),d(M,{data:V.list,onSelectionChange:w.handleSelectionChange},{default:r((()=>[o(D,{label:"发放员工",align:"center",prop:"userName","show-overflow-tooltip":!0}),o(D,{label:"领取客户",align:"center",width:"150"},{default:r((({row:t})=>[n("div",{class:"cp flex aic",onClick:a=>e.goRoute(t)},[o(I,{style:{width:"50px",height:"50px",flex:"none"},src:t.avatar,fit:"fill"},null,8,["src"]),n("div",U,[n("p",null,c(t.customerName),1),o(Y,{class:y(["el-icon-Avatar",{1:"man",2:"woman"}[t.gender]])},null,8,["class"]),n("span",{style:f({color:1==t.customerType?"#4bde03":"#f9a90b"})},c({1:"@微信",2:"@企业微信"}[t.customerType]),5)])],8,v)])),_:1}),o(D,{label:"红包金额（元）",align:"center",prop:"redEnvelopeMoney"}),o(D,{label:"发放时间",align:"center",prop:"createTime"}),o(D,{label:"发放状态",align:"center",prop:"sendState"},{default:r((({row:e})=>[m(c(V.dictStatusType[e.sendState]),1)])),_:1}),o(D,{label:"交易订单号",align:"center",prop:"orderNo"})])),_:1},8,["data","onSelectionChange"])),[[E,V.loading]]),h(o(A,{total:V.total,page:V.query.pageNum,"onUpdate:page":t[7]||(t[7]=e=>V.query.pageNum=e),limit:V.query.pageSize,"onUpdate:limit":t[8]||(t[8]=e=>V.query.pageSize=e),onPagination:t[9]||(t[9]=e=>w.getList())},null,8,["total","page","limit"]),[[j,V.total>0]])]),o(B,{visible:V.dialogVisibleSelectUser,"onUpdate:visible":t[10]||(t[10]=e=>V.dialogVisibleSelectUser=e),title:"选择添加人",defaultValues:V.queryUser,onSuccess:t[11]||(t[11]=e=>{V.queryUser=e,V.query.userId=e.map((e=>e.userId)).join()})},null,8,["visible","defaultValues"])])}],["__scopeId","data-v-c500805a"]]);export{_ as default};
