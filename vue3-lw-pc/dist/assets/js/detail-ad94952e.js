import{s as e,m as t,r as a,d as s}from"./groupMessage-f31c8fd2.js";import l from"./PreviewInPhone-9ed75a0f.js";import{ai as r,aq as o,o as m,c as i,a as u,Z as d,X as p,_ as n,U as c,Y as g,K as h,a9 as y,T as b,V as f,$ as v,bl as N,bj as j}from"./@vue-e400fd81.js";import{_ as q}from"./quill-image-resize-module-c051113e.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const C={components:{PreviewInPhone:l},props:{},data:()=>({customerState:{0:"未送达",1:"已送达",2:"非好友",3:"接收达上限"},memberState:{0:"未发送",2:"已发送"},member:{loading:!1,total:0,list:[]},customer:{loading:!1,total:0,list:[]},queryMember:{userName:"",msgTemplateId:"",pageNum:1,pageSize:10,status:""},queryCustomer:{customerName:"",msgTemplateId:"",status:"",pageNum:1,pageSize:10},form:{welcomeMsg:"",materialMsgList:[]},data:{chatType:1,alreadySendCustomerNum:0,alreadySendNum:0,toBeSendCustomerNum:0,toBeSendNum:0,refreshTime:""},activeName:"0",total1:0,total0:0,msgId:"",isTask:0,status:0}),watch:{},computed:{},created(){this.isTask=this.$route.query.isTask,this.status=this.$route.query.status,this.msgId=this.$route.query.id,this.queryMember.msgTemplateId=this.msgId,this.queryCustomer.msgTemplateId=this.msgId,this.getDetail(),this.getMemberList(),this.getCustomerList()},mounted(){},methods:{setFn(){this.$confirm("确定同步？","提示",{confirmButtonText:"确认同步",cancelButtonText:"放弃",type:"warning"}).then((()=>{e(this.msgId).then((e=>{this.getDetail(),this.getMemberList(),this.getCustomerList(),this.$message({type:"success",message:"同步成功!"})}))}),(()=>{this.$message({type:"info",message:"已取消同步！"})})).catch((()=>{}))},getMemberList(e){e&&(this.queryMember.pageNum=e),this.member.loading=!0,t(this.queryMember).then((e=>{this.member.loading=!1,this.member.total=Number(e.total),this.member.list=e.rows}))},getCustomerList(e){e&&(this.queryCustomer.pageNum=e),this.customer.loading=!0,a(this.queryCustomer).then((e=>{this.customer.loading=!1,this.customer.total=Number(e.total),this.customer.list=e.rows}))},getCustomerPage(e){this.queryCustomer.pageNum=e.page,this.getCustomerList()},getMemberPage(e){this.queryMember.pageNum=e.page,this.getMemberList()},getDetail(){s(this.msgId).then((e=>{200==e.code?(this.data=e.data,this.form.welcomeMsg=e.data.content,this.form.materialMsgList=e.data.attachments||[]):this.msgError(e.msg||"获取失败")}))}}},T={class:"flex"},M={style:{width:"calc(100% - 425px)","padding-right":"var(--card-margin)"}},w={class:"g-card"},_={class:"g-card-title fxbw"},S=(e=>(N("data-v-10b9ccd3"),e=e(),j(),e))((()=>u("div",{class:""},"群发统计",-1))),k={key:0,class:"operation"},I={key:0},L={class:"total_list fxbw"},x={class:"item"},z={style:{"font-size":"18px",color:"var(--font-black)"}},P={class:"item"},V={style:{"font-size":"18px",color:"var(--font-black)"}},B={class:"item"},U={style:{"font-size":"18px",color:"var(--font-black)"}},$={class:"item"},F={style:{"font-size":"18px",color:"var(--font-black)"}},D={class:"g-card"},E={class:"g-card-title"},K={class:"g-card"},A={class:"g-card-title"},J={class:""},O={class:"g-card",style:{width:"425px","margin-top":"0"}};const X=q(C,[["render",function(e,t,a,s,l,N){const j=r("el-button"),q=r("el-input"),C=r("el-form-item"),X=r("el-option"),Y=r("el-select"),Z=r("el-form"),G=r("el-table-column"),H=r("el-table"),Q=r("pagination"),R=r("PreviewInPhone"),W=o("loading");return m(),i("div",null,[u("div",T,[u("div",M,[u("div",w,[u("div",_,[S,1!==l.isTask?(m(),i("div",k,[l.data.refreshTime?(m(),i("span",I,"最近同步时间："+d(l.data.refreshTime),1)):p("",!0),n(j,{class:"ml10",type:"primary",onClick:N.setFn},{default:c((()=>[g("同步")])),_:1},8,["onClick"])])):p("",!0)]),u("div",L,[u("div",x,[u("div",null,"已发送"+d(1===l.data.chatType?"员工":"群主"),1),u("div",z,d(l.data.alreadySendNum?l.data.alreadySendNum:0),1)]),u("div",P,[u("div",null,"未发送"+d(1===l.data.chatType?"员工":"群主"),1),u("div",V,d(l.data.toBeSendNum?l.data.toBeSendNum:0),1)]),u("div",B,[u("div",null,"已送达"+d(1===l.data.chatType?"客户":"客户群"),1),u("div",U,d(l.data.alreadySendCustomerNum?l.data.alreadySendCustomerNum:0),1)]),u("div",$,[u("div",null,"未送达"+d(1===l.data.chatType?"客户":"客户群"),1),u("div",F,d(l.data.toBeSendCustomerNum?l.data.toBeSendCustomerNum:0),1)])])]),u("div",D,[u("div",E,d(1===l.data.chatType?"员工":"群主")+"详情",1),n(Z,{model:l.queryMember,ref:"queryMemberForm",inline:!0,"label-position":"left","label-width":""},{default:c((()=>[n(C,{label:1===l.data.chatType?"发送员工":"发送群主",prop:"userName"},{default:c((()=>[n(q,{modelValue:l.queryMember.userName,"onUpdate:modelValue":t[0]||(t[0]=e=>l.queryMember.userName=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1},8,["label"]),n(C,{label:"发送状态",prop:"status"},{default:c((()=>[n(Y,{modelValue:l.queryMember.status,"onUpdate:modelValue":t[1]||(t[1]=e=>l.queryMember.status=e),placeholder:"请选择发送状态"},{default:c((()=>[n(X,{label:"全部",value:""}),(m(!0),i(h,null,y(l.memberState,((e,t,a)=>(m(),b(X,{label:e,value:t,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(C,{"label-width":"0"},{default:c((()=>[n(j,{type:"primary",onClick:t[2]||(t[2]=e=>N.getMemberList(1))},{default:c((()=>[g("查询")])),_:1}),n(j,{onClick:t[3]||(t[3]=t=>e.$refs.queryMemberForm.resetFields())},{default:c((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"]),u("div",null,[f((m(),b(H,{data:l.member.list},{default:c((()=>[n(G,{label:1===l.data.chatType?"发送员工":"发送群主",align:"center",prop:"userName"},null,8,["label"]),n(G,{label:1===l.data.chatType?"预计发送客户":"预计发送客户群",align:"center",prop:"total"},{default:c((e=>[g(d(e.row.toBeCustomerName?e.row.toBeCustomerName:0),1)])),_:1},8,["label"]),n(G,{label:1===l.data.chatType?"实际发送客户":"实际发送客户群",align:"center",prop:"already"},{default:c((e=>[g(d(e.row.alreadyCustomerName?e.row.alreadyCustomerName:0),1)])),_:1},8,["label"]),n(G,{label:"发送状态",align:"center",prop:"status"},{default:c((e=>[g(d(l.memberState[e.row.status]),1)])),_:1})])),_:1},8,["data"])),[[W,l.member.loading]]),f(n(Q,{total:l.member.total,page:l.queryMember.pageNum,"onUpdate:page":t[4]||(t[4]=e=>l.queryMember.pageNum=e),limit:l.queryMember.pageSize,"onUpdate:limit":t[5]||(t[5]=e=>l.queryMember.pageSize=e),onPagination:N.getMemberPage},null,8,["total","page","limit","onPagination"]),[[v,l.member.total>0]])])]),u("div",K,[u("div",A,[u("div",J,d(1===l.data.chatType?"客户":"客户群")+"详情",1)]),n(Z,{model:l.queryCustomer,ref:"queryForm",inline:!0,"label-position":"left","label-width":""},{default:c((()=>[n(C,{label:1===l.data.chatType?"发送客户":"发送客户群",prop:1===l.data.chatType?"customerName":"chatName"},{default:c((()=>[n(q,{modelValue:l.queryCustomer[1===l.data.chatType?"customerName":"chatName"],"onUpdate:modelValue":t[6]||(t[6]=e=>l.queryCustomer[1===l.data.chatType?"customerName":"chatName"]=e),style:{width:"150px"},placeholder:"请输入"},null,8,["modelValue"])])),_:1},8,["label","prop"]),n(C,{label:"发送状态",prop:"status"},{default:c((()=>[n(Y,{modelValue:l.queryCustomer.status,"onUpdate:modelValue":t[7]||(t[7]=e=>l.queryCustomer.status=e),placeholder:"请选择发送状态"},{default:c((()=>[n(X,{label:"全部",value:""}),(m(!0),i(h,null,y(l.customerState,((e,t,a)=>(m(),b(X,{label:e,value:t,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(C,{"label-width":"0"},{default:c((()=>[n(j,{type:"primary",onClick:t[8]||(t[8]=e=>N.getCustomerList(1))},{default:c((()=>[g("查询")])),_:1}),n(j,{onClick:t[9]||(t[9]=t=>e.$refs.queryForm.resetFields())},{default:c((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"]),u("div",null,[f((m(),b(H,{data:l.customer.list},{default:c((()=>[n(G,{label:1===l.data.chatType?"客户":"客户群",align:"center",prop:1===l.data.chatType?"customerName":"chatName"},null,8,["label","prop"]),n(G,{label:1===l.data.chatType?"所属员工":"所属群主",align:"center",prop:"userName"},null,8,["label"]),n(G,{label:"送达时间",align:"center",prop:"sendTime",width:"180"}),n(G,{label:"送达状态",align:"center",prop:"status"},{default:c((e=>[g(d(l.customerState[e.row.status]),1)])),_:1})])),_:1},8,["data"])),[[W,l.customer.loading]]),f(n(Q,{total:l.customer.total,page:l.queryCustomer.pageNum,"onUpdate:page":t[10]||(t[10]=e=>l.queryCustomer.pageNum=e),limit:l.queryCustomer.pageSize,"onUpdate:limit":t[11]||(t[11]=e=>l.queryCustomer.pageSize=e),onPagination:N.getCustomerPage},null,8,["total","page","limit","onPagination"]),[[v,l.customer.total>0]])])])]),u("div",O,[n(R,{templateInfo:l.form.welcomeMsg,originList:l.form.materialMsgList},null,8,["templateInfo","originList"])])])])}],["__scopeId","data-v-10b9ccd3"]]);export{X as default};
