import t from"./Attachment-7a2b3bdf.js";import e from"./PreviewInPhone-9ed75a0f.js";import{_ as i}from"./quill-image-resize-module-c051113e.js";import{ai as s,o as a,c as r,a as o,_ as m,U as l}from"./@vue-e400fd81.js";import"./index-0bf429ac.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./scriptCenter-9e8c6ca2.js";import"./modleCenter-5112f339.js";import"./DragTable-97e90e96.js";import"./sortablejs-b0ad9b27.js";import"./MessageContentForm-5a22ed37.js";import"./staff-48996164.js";import"./PicTitContent-8b500b6d.js";import"./PosterAdd-51b39872.js";import"./index-618cff16.js";import"./tag-13936295.js";import"./fabric-8da0df30.js";import"./poster-241340a9.js";import"./liveCodeTable-73b404a8.js";import"./group-16414119.js";import"./pullNews-68e01d94.js";import"./TemplateLibrary-f59d0076.js";import"./welcome-6ff4c53e.js";const p={class:"flex"},n={style:{width:"calc(100% - 425px)","padding-right":"var(--card-margin)"}},d={class:"g-card",style:{width:"425px","margin-top":"0"}};const c=i({props:{initData:{type:Object,default:{}}},components:{Attachment:t,PreviewInPhone:e},data:()=>({previewData:[],templateInfo:"",attachmentsData:{templateInfo:"",attachments:[]},form:[]}),mounted(){},watch:{initData:{deep:!0,immediate:!0,handler(t,e){this.form=JSON.parse(JSON.stringify(this.initData)),this.setData()}}},methods:{changeInfo(t){this.templateInfo=t},getAttentment(t){this.form=t},getPhoneData(t){this.previewData=t},submit(){if(!this.templateInfo)return void this.msgError("欢迎语不能为空！");let t=JSON.parse(JSON.stringify(this.form));t.unshift({content:this.templateInfo,msgType:"text"}),this.$emit("submit",t),this.setData()},setData(){if(this.form){let t=[];this.form.forEach((e=>{"text"==e.msgType?this.templateInfo=e.content:t.push(e)})),this.form=t;let e=this.setAttachments(t);this.attachmentsData={templateInfo:this.templateInfo,attachments:e},this.previewData=e}},setAttachments(t){let e=[];return t&&t.length&&t.forEach((t=>{if("image"===t.msgType){let i={id:t.materialId,mediaType:"0",materialUrl:t.picUrl};e.push(i)}else if("video"===t.msgType){let i={id:t.materialId,mediaType:"2",materialUrl:t.fileUrl,coverUrl:t.picUrl,digest:t.description,materialName:t.title};e.push(i)}else if("file"===t.msgType){let i={id:t.materialId,mediaType:"3",materialUrl:t.fileUrl,digest:t.description,materialName:t.title};e.push(i)}else if("text"===t.msgType){let i={id:t.materialId,mediaType:"4",content:t.content};e.push(i)}else if("link"===t.msgType){let i={id:t.materialId,mediaType:"9",content:t.content,coverUrl:t.picUrl,materialUrl:t.linkUrl,materialName:t.title};e.push(i)}else if("miniprogram"===t.msgType){let i={id:t.materialId,mediaType:"11",digest:t.appId,materialName:t.title,coverUrl:t.picUrl,materialUrl:t.fileUrl};e.push(i)}else if("news"===t.msgType){let i={id:t.materialId,mediaType:"12",digest:t.description,materialUrl:t.fileUrl,coverUrl:t.picUrl,content:t.content,materialName:t.title};e.push(i)}else if("posters"===t.msgType){let i={id:t.materialId,mediaType:"5",materialUrl:t.fileUrl,materialName:t.title};e.push(i)}})),e}}},[["render",function(t,e,i,c,f,h){const j=s("Attachment"),u=s("el-col"),g=s("el-row"),y=s("el-form"),I=s("PreviewInPhone");return a(),r("div",null,[o("div",p,[o("div",n,[m(y,{model:f.form,rules:t.rules,ref:"form","label-width":"140px"},{default:l((()=>[m(g,{class:"g-card"},{default:l((()=>[m(u,null,{default:l((()=>[m(j,{onPhoneData:h.getPhoneData,onSuccess:h.getAttentment,onChangeInfo:h.changeInfo,baseData:f.attachmentsData,showModle:!1},null,8,["onPhoneData","onSuccess","onChangeInfo","baseData"])])),_:1})])),_:1})])),_:1},8,["model","rules"])]),o("div",d,[m(I,{list:f.previewData,templateInfo:f.templateInfo},null,8,["list","templateInfo"])])])])}],["__scopeId","data-v-95f07c6c"]]);export{c as default};
