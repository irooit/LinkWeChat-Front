import t from"./chatList-17de18bb.js";import{s as e}from"./api-49257dfd.js";import{V as a}from"./ChatContent-f938bb33.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import{F as s,B as i}from"../index-044285d2.js";import{_ as o}from"./quill-image-resize-module-c051113e.js";import{ai as r,aq as l,V as p,o as n,c as m,a as d,K as c,T as u,U as h,_ as f,Y as j,Z as g,X as y}from"./@vue-e400fd81.js";import"./benz-amr-recorder-259e7c16.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./ali-oss-912914b8.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const b={class:"chatListClassTab"},w={class:"list"},_={key:0},v={key:1};const k=o({name:"",components:{chatList:t,Voice:a},props:{queryChat:{type:Object,default:()=>({})},type:{type:String|Number,default:0}},data:()=>({loading:!1,currentPage:1,dateRange:[],list:[],total:0}),computed:{},watch:{queryChat(){this.getList(1)}},created(){this.getList(1)},mounted(){},methods:{setDate:(t,e)=>s(e,i(t)),getList(t){this.loading=!0;let a={msgType:"all"==this.type?"":this.type};t&&(a.pageNum=this.currentPage=t),Object.assign(a,this.queryChat),e(a).then((t=>{this.list=t.data,this.loading=!1})).catch((t=>{this.loading=!1}))},filterSize(t){return t?t<e(1)?t+" B":t<e(2)?(t/e(1)).toFixed(2)+" KB":t<e(3)?(t/e(2)).toFixed(2)+" MB":t<e(4)?(t/e(3)).toFixed(2)+" GB":(t/e(4)).toFixed(2)+" TB":"";function e(t){return Math.pow(1024,t)}},downloadFile(t){this.$confirm("是否确认下载该文件?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((e=>{this.downloadNet(JSON.parse(t.contact).attachment,JSON.parse(t.contact).filename)})).catch((function(){}))}}},[["render",function(t,e,a,s,i,o){const k=r("chatList"),C=r("el-table-column"),q=r("el-button"),x=r("el-table"),T=r("voice"),N=r("el-empty"),O=r("el-pagination"),S=l("loading");return p((n(),m("div",b,[d("div",w,[i.list.length?(n(),m(c,{key:0},["all,image,video,link,".includes(a.type)?(n(),u(k,{key:0,queryChat:a.queryChat,data:i.list},null,8,["queryChat","data"])):"file"==a.type?(n(),u(x,{key:1,data:i.list,stripe:"",style:{width:"100%"},"header-cell-style":{background:"#fff"}},{default:h((()=>[f(C,{label:"名称"},{default:h((({row:t})=>[j(g(JSON.parse(t.contact).filename),1)])),_:1}),f(C,{label:"大小"},{default:h((({row:t})=>[j(g(o.filterSize(JSON.parse(t.contact).filesize)),1)])),_:1}),f(C,{label:"来源"},{default:h((({row:t})=>[j(g(t.name),1)])),_:1}),f(C,{prop:"action",label:"操作"},{default:h((({row:t})=>[f(q,{text:"",onClick:e=>o.downloadFile(t)},{default:h((()=>[j("下载")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):"voice,meeting_voice_call".includes(a.type)?(n(),u(x,{key:2,data:i.list,stripe:"","header-cell-style":{background:"#fff"}},{default:h((()=>[f(C,{prop:"date",label:"发起人"},{default:h((({row:t})=>[j(g(t.name),1)])),_:1}),f(C,{prop:"name",label:"通话时间"},{default:h((({row:t})=>[j(g(t.msgTime),1)])),_:1}),f(C,{prop:"address",label:"时长","min-width":"50"},{default:h((({row:t})=>["voice"==t.msgType?(n(),m("span",_,g(JSON.parse(t.contact).play_length)+"s",1)):(n(),m("span",v,g(o.setDate(JSON.parse(t.contact).endtime,t.msgTime)),1))])),_:1}),f(C,{prop:"msgType",label:"类型"},{default:h((({row:t})=>[j(g("voice"===t.msgType?"语音消息":"语音通话"),1)])),_:1}),f(C,{prop:"address","min-width":"80",label:"操作"},{default:h((({row:t})=>[f(T,{amrUrl:JSON.parse(t.contact).attachment},null,8,["amrUrl"])])),_:1})])),_:1},8,["data"])):y("",!0)],64)):(n(),u(N,{key:1,"image-size":100}))]),i.total?(n(),u(O,{key:0,layout:"prev, pager, next","current-page":i.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>i.currentPage=t),onCurrentChange:o.getList,total:i.total},null,8,["current-page","onCurrentChange","total"])):y("",!0)])),[[S,i.loading]])}],["__scopeId","data-v-3c1d1b1f"]]);export{k as default};
