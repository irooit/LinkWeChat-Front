import t from"./ChartLine-b009fc4d.js";import e from"./SearchTitle-ceb204ee.js";import{c as a,e as i,g as o}from"./group-16414119.js";import{_ as r}from"./quill-image-resize-module-c051113e.js";import{ai as s,aq as l,o as m,c as p,_ as u,a as d,V as n,T as h,U as c,Y as j}from"./@vue-e400fd81.js";import"./echarts-8e7b9cd7.js";import"./tslib-a4e99503.js";import"./zrender-da4e2cf7.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./lodash.merge-f1a4e0c2.js";import"./moment-8163541f.js";const b={name:"group-analyse",components:{SearchTitle:e,ChartLine:t},data:()=>({id:"",state:"",exportLoading:!1,legend:["进群人数","退群人数"],xdata:[],series:[],cardData:[{title:"活码客群数",tips:"当前群活码所有群聊数量，包括自动建立的群",value:0,noArrow:!0},{title:"群总人数",tips:"当前群活码全部群的总人数(含员工及重复)",value:0,title1:"较昨日",value1:0},{title:"进群人数",tips:"通过当前群活码进群的人数(去重)",value:0,title1:"较昨日",value1:0},{title:"退群人数",tips:"通过当前群活码进群后退群的人数(去重)",value:0,title1:"较昨日",value1:0}],tableList:[],loading:!1,searchData:{},bar1:[],bar2:[]}),methods:{getCardData(){a(this.id).then((t=>{if(200===t.code){let e=t.data;this.cardData[0].value=e.chatGroupNum,this.cardData[1].value=e.chatGroupMemberTotalNum,this.cardData[2].value=e.joinChatGroupTotalMemberNum,this.cardData[3].value=e.exitChatGroupTotalMemberNum,this.cardData[1].value1=Number(e.newJoinChatGroupTotalMemberNum)-Number(e.oldJoinChatGroupTotalMemberNum),this.cardData[2].value1=Number(e.joinChatGroupTotalMemberNum)-Number(e.oldJoinChatGroupTotalMemberNum),this.cardData[3].value1=Number(e.exitChatGroupTotalMemberNum)-Number(e.oldExitChatGroupTotalMemberNum)}}))},getLineData(t){i({...t,state:this.state}).then((t=>{this.xdata=[],this.series=[];let e=[],a=[];t.data&&t.data.length&&(t.data.forEach((t=>{this.xdata.push(t.dateTime),e.push(t.joinChatGroupTotalMemberNum),a.push(t.exitChatGroupTotalMemberNum)})),this.series=[e,a])}))},getTableFn(){this.loading=!0,o(this.id).then((t=>{this.tableList=t.data,this.loading=!1}))}},created(){this.id=this.$route.query.id,this.state=this.$route.query.state,this.getCardData(),this.getTableFn()}},g={class:"g-card"},v=d("div",{class:"g-card-title"},"数据趋势",-1),f={class:"g-card"},w=d("div",{class:"g-card-title"},"活码客群",-1);const N=r(b,[["render",function(t,e,a,i,o,r){const b=s("CardGroupIndex"),N=s("search-title"),T=s("chart-line"),C=s("el-table-column"),x=s("el-button"),D=s("el-table"),G=l("loading");return m(),p("div",null,[u(b,{data:o.cardData},null,8,["data"]),d("div",g,[v,u(N,{onSearch:r.getLineData},null,8,["onSearch"]),u(T,{style:{height:"300px"},legend:o.legend,xData:o.xdata,series:o.series},null,8,["legend","xData","series"])]),d("div",f,[w,n((m(),h(D,{data:o.tableList,style:{width:"100%"}},{default:c((()=>[u(C,{label:"客群名称",align:"center","min-width":"100",prop:"groupName","show-overflow-tooltip":""}),u(C,{label:"群主",align:"center","min-width":"100",prop:"groupOwner","show-overflow-tooltip":""}),u(C,{label:"群总人数",align:"center",prop:"chatGroupMemberTotalNum","min-width":"100","show-overflow-tooltip":""}),u(C,{label:"进群人数",align:"center",prop:"joinChatGroupTotalMemberNum","min-width":"100","show-overflow-tooltip":""}),u(C,{label:"退群人数",align:"center",prop:"exitChatGroupTotalMemberNum","min-width":"100","show-overflow-tooltip":""}),u(C,{label:"操作",align:"center",width:"180"},{default:c((({row:e})=>[u(x,{text:"",onClick:a=>t.$router.push({name:t.lwConfig.GROUP_DETAIL_ROUTE_NAME,query:{chatId:e.chatId}})},{default:c((()=>[j(" 查看详情 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[G,o.loading]])])])}]]);export{N as default};
