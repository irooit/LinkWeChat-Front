import{g as e}from"./tag-13936295.js";import{_ as t}from"./quill-image-resize-module-c051113e.js";import{ai as s,aq as i,V as l,o as a,c as o,K as r,a9 as d,a as p,Z as n,T as m,U as c,Y as u,X as g,_ as h,O as y}from"./@vue-e400fd81.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const j={components:{},props:{type:{type:String,default:"1"},selected:{type:Array,default:()=>[]},isSingle:{type:Boolean,default:!1}},data:()=>({loading:!0,list:[],listOneArray:[],selectedList:[]}),watch:{selected:{handler(e=[]){this.selectedList=[...e]},immediate:!0,deep:!0}},computed:{checkedTagMap(){return new Set(this.selectedList.map((e=>e.tagId||"string"==typeof e&&e)))}},created(){this.getList()},mounted(){},methods:{getList(){this.loading=!0,e({groupTagType:this.type}).then((({rows:e})=>{this.list=e,this.listOneArray=[],this.list.forEach((e=>{e.weTags.forEach((e=>{this.listOneArray.push({tagId:e.tagId,name:e.name})}))}))})).finally((()=>{this.loading=!1}))},submit(){let e=this.listOneArray.filter((e=>this.selectedList.some((t=>t.tagId===e.tagId))));this.$emit("update:selected",e)},onSelectTag(e){if(this.isSingle)this.selectedList=[e];else{const t=this.selectedList.findIndex((t=>t.tagId===e.tagId));t>-1?this.selectedList.splice(t,1):this.selectedList.push(e)}this.submit()},isSelected(e){return this.checkedTagMap.has(e.tagId)||this.checkedTagMap.has(e.name)}}},f={class:"label-group"},b={class:"label-group-item-title"},v={key:0,class:"label-group-item-body"};const L=t({name:"SelectTag",components:{SelectTag1:t(j,[["render",function(e,t,h,y,j,L){const S=s("el-tag"),T=i("loading");return l((a(),o("section",f,[(a(!0),o(r,null,d(j.list,(e=>(a(),o("div",{key:e.groupId,class:"label-group-item"},[p("div",b,n(e.groupName),1),e.weTags?(a(),o("div",v,[(a(!0),o(r,null,d(e.weTags,(e=>(a(),m(S,{key:e.tagId,type:L.isSelected(e)?"":"info",onClick:t=>L.onSelectTag(e)},{default:c((()=>[u(n(e.name),1)])),_:2},1032,["type","onClick"])))),128))])):g("",!0)])))),128))])),[[T,j.loading]])}],["__scopeId","data-v-a3dbe0ef"]])},props:{isSingle:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},title:{type:String},type:{type:String,default:"1"},destroyOnClose:Boolean,selected:{type:Array,default:()=>[]}},data:()=>({selectedList:[]}),watch:{selected:{handler(e=[]){this.selectedList=[...e]},immediate:!0,deep:!0}},computed:{Pvisible:{get(){return this.selectedList=[...this.selected],this.visible},set(e){this.$emit("update:visible",e)}}},created(){},mounted(){},methods:{submit(){this.$emit("success",this.selectedList),this.Pvisible=!1}}},[["render",function(e,t,i,l,o,r){const d=s("SelectTag1"),n=s("el-button"),g=s("el-dialog");return a(),m(g,{title:i.title||`选择${1==i.type?"客户":"客群"}标签`,modelValue:r.Pvisible,"onUpdate:modelValue":t[2]||(t[2]=e=>r.Pvisible=e),"destroy-on-close":i.destroyOnClose},{footer:c((()=>[p("div",null,[h(n,{onClick:t[1]||(t[1]=e=>r.Pvisible=!1)},{default:c((()=>[u("取 消")])),_:1}),h(n,{type:"primary",onClick:r.submit},{default:c((()=>[u("确 定")])),_:1},8,["onClick"])])])),default:c((()=>[p("div",null,[h(d,{type:i.type,isSingle:i.isSingle,selected:o.selectedList,"onUpdate:selected":t[0]||(t[0]=e=>o.selectedList=e)},null,8,["type","isSingle","selected"]),y(e.$slots,"default")])])),_:3},8,["title","modelValue","destroy-on-close"])}]]);export{L as default};
