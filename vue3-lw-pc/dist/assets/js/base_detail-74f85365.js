import e from"./PreviewInPhone-9ed75a0f.js";import t from"./PreviewInStore-85980d06.js";import{b as o,c as s}from"./store-1f3cfa19.js";import{_ as a}from"./quill-image-resize-module-c051113e.js";import{ai as l,o as i,c as r,_ as m,U as d,a as p,Y as n,Z as c,T as u,X as f,K as h,a9 as y,bl as g,bj as j}from"./@vue-e400fd81.js";import"./quill-c6b3d2fb.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./code-ab4e587b.js";import"../index-044285d2.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";const v={name:"base-detail",data:()=>({selectedUserList:[],selectedTagList:[],form:{raidus:3,outOfRangeTip:"您所在区域暂未开设门店，可联系客服或手动搜索",codeState:1,storeCodeType:1,customerServiceName:"",customerServiceId:"",welcomeMsg:""},materialData:{welcomeMsg:"",attachments:[]}}),components:{PreviewInPhone:e,PreviewStoreClient:t},props:{codeType:{type:Number,default:1}},methods:{handleCopy(e){const t=document.createElement("input");t.style.cssText="opacity: 0;",t.type="text",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),this.$message({message:"复制成功",type:"success"})},gotoEdit(){this.$router.push({path:1===this.codeType?"guideCode":"storeCode"})},downloadUrlFn(){o({storeCodeType:this.codeType}).then((e=>{if(null!=e){let t=new Blob([e],{type:"application/image"}),o=window.URL.createObjectURL(t);const s=document.createElement("a");s.href=o,s.download=1===this.codeType?"门店导购码.jpg":"门店群活码.jpg",s.click(),URL.revokeObjectURL(o)}}))},init(){s(this.codeType).then((e=>{if(200===e.code&&e.data){if(this.form=e.data,this.form.customerServiceId){let e={name:this.form.customerServiceName,userId:this.form.customerServiceId};this.selectedUserList=[e]}if(this.form.weQrAttachments&&this.form.weQrAttachments.length&&(this.materialData={welcomeMsg:this.form.weQrAttachments?this.form.weQrAttachments[0].content:"",attachments:this.form.weQrAttachments}),this.form.tagIds){this.selectedTagList=[];let e=this.form.tagIds.split(","),t=this.form.tagNames.split(",");e.forEach(((e,o)=>{this.selectedTagList.push({tagId:e,name:t[o]})}))}}}))}},created(){this.init()}},w={class:"g-card"},b=(e=>(g("data-v-c2d54a23"),e=e(),j(),e))((()=>p("div",{class:"g-card-title",style:{display:"inline-block"}},"活码分享",-1))),T={style:{float:"right"}},k={class:"content"},x=["src"],U={class:"operation"},C={class:"g-card"},_={key:0},I={class:"g-card",style:{height:"100%",display:"flex"}};const L=a(v,[["render",function(e,t,o,s,a,g){const j=l("el-button"),v=l("el-form-item"),L=l("el-input"),R=l("el-switch"),S=l("el-tag"),V=l("el-form"),M=l("el-col"),O=l("preview-store-client"),P=l("PreviewInPhone"),z=l("el-row");return i(),r("div",null,[m(z,{gutter:10,type:"flex",style:{"margin-top":"10px"}},{default:d((()=>[m(M,null,{default:d((()=>[p("div",w,[b,p("div",T,[m(j,{type:"primary",onClick:g.gotoEdit},{default:d((()=>[n("编辑")])),_:1},8,["onClick"])]),p("div",k,[p("div",null,[p("img",{style:{height:"120px",width:"120px"},src:a.form.storeCodeConfigQr},null,8,x)]),p("div",U,[p("div",null,[m(j,{type:"primary",onClick:g.downloadUrlFn},{default:d((()=>[n("下载活码")])),_:1},8,["onClick"])]),m(j,{type:"primary",plain:"",onClick:t[0]||(t[0]=e=>g.handleCopy(a.form.storeCodeConfigUrl))},{default:d((()=>[n("复制链接")])),_:1})])])]),p("div",C,[m(V,{model:a.form,ref:"form","label-width":"120px","label-position":"right"},{default:d((()=>[m(v,{label:"门店范围：",prop:"raidus"},{default:d((()=>[n(" 距离门店半径"+c(a.form.raidus)+"公里范围内，客户可扫码添加"+c(1===o.codeType?"门店导购":"门店群"),1)])),_:1}),2===o.codeType?(i(),u(v,{key:0,label:"加群引导语：",prop:"welcomeMsg"},{default:d((()=>[m(L,{disabled:"",modelValue:a.form.welcomeMsg,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.welcomeMsg=e),type:"textarea",maxlength:"200","show-word-limit":"",placeholder:"请输入加群引导语",autosize:{minRows:5,maxRows:20},clearable:""},null,8,["modelValue"])])),_:1})):f("",!0),m(v,{label:"超出范围提示：",prop:"outOfRangeTip"},{default:d((()=>[m(L,{disabled:"",modelValue:a.form.outOfRangeTip,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.outOfRangeTip=e),type:"textarea",maxlength:"30","show-word-limit":"",placeholder:"请输入超出范围提示",autosize:{minRows:2,maxRows:20},clearable:""},null,8,["modelValue"])])),_:1}),m(v,{label:"活码员工客服："},{default:d((()=>[m(R,{disabled:"",modelValue:a.form.codeState,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.codeState=e),"active-value":0,"inactive-value":1},null,8,["modelValue"]),0===a.form.codeState?(i(),r(h,{key:0},[a.selectedUserList.length>0?(i(),r("div",_,[(i(!0),r(h,null,y(a.selectedUserList,((e,t)=>(i(),u(S,{key:t},{default:d((()=>[n(c(e.name),1)])),_:2},1024)))),128))])):f("",!0)],64)):f("",!0)])),_:1}),1===o.codeType?(i(),u(v,{key:1,label:"新客户标签"},{default:d((()=>[(i(!0),r(h,null,y(a.selectedTagList,((e,t)=>(i(),r(h,{key:t},[e.name?(i(),u(S,{key:0},{default:d((()=>[n(c(e.name),1)])),_:2},1024)):f("",!0)],64)))),128))])),_:1})):f("",!0)])),_:1},8,["model"])])])),_:1}),m(M,{style:{"min-width":"750px"}},{default:d((()=>[p("div",I,[1===o.codeType?(i(),r(h,{key:0},[m(O,{showGuide:!0,name:"专属门店导购",value:a.form},null,8,["value"]),m(P,{originList:a.materialData.attachments,templateInfo:a.materialData.welcomeMsg,liveUrl:e.liveUrl},null,8,["originList","templateInfo","liveUrl"])],64)):f("",!0),n(" . "),2===o.codeType?(i(),r(h,{key:1},[m(O,{key:"1",showStore:!0,name:"专属门店群",value:a.form},null,8,["value"]),m(O,{key:"2",showTip:!0,name:"专属门店群",value:a.form},null,8,["value"])],64)):f("",!0)])])),_:1})])),_:1})])}],["__scopeId","data-v-c2d54a23"]]);export{L as default};
