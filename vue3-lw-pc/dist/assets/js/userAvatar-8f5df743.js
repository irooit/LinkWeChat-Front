import{x as e}from"../index-044285d2.js";import{M as o}from"./vue-cropper-9080a552.js";import{u as t}from"./user-d46c9aae.js";import{_ as i}from"./quill-image-resize-module-c051113e.js";import{ai as s,o as p,c as r,a,_ as l,U as n,T as m,X as u,Q as d,Y as c,bl as f,bj as g}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const h={components:{VueCropper:o},props:{user:{type:Object}},data:()=>({open:!1,visible:!1,title:"修改头像",options:{outputType:"png",img:e().avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}),methods:{editCropper(){this.open=!0},modalOpened(){this.visible=!0},requestUpload(){},rotateLeft(){this.$refs.cropper.rotateLeft()},rotateRight(){this.$refs.cropper.rotateRight()},changeScale(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload(e){if(-1==e.type.indexOf("image/"))this.msgError("文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。");else{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>{this.options.img=o.result}}},uploadImg(){this.$refs.cropper.getCropBlob((o=>{let i=new FormData;i.append("avatarfile",o),t(i).then((o=>{200===o.code&&(this.open=!1,this.options.img=o.imgUrl,e.avatar=this.options.img,this.msgSuccess("修改成功")),this.visible=!1}))}))},realTime(e){this.previews=e}}},j=["src"],v={class:"avatar-upload-preview"},C=["src"],b=(e=>(f("data-v-2089a75a"),e=e(),g(),e))((()=>a("br",null,null,-1)));const x=i(h,[["render",function(e,o,t,i,f,g){const h=s("vue-cropper"),x=s("el-col"),y=s("el-row"),_=s("el-icon-upload"),w=s("el-button"),T=s("el-upload"),k=s("el-dialog");return p(),r("div",null,[a("img",{src:f.options.img,onClick:o[0]||(o[0]=e=>g.editCropper()),title:"点击上传头像",class:"img-circle img-lg"},null,8,j),l(k,{title:f.title,modelValue:f.open,"onUpdate:modelValue":o[6]||(o[6]=e=>f.open=e),width:"800px","append-to-body":"",onOpened:g.modalOpened},{default:n((()=>[l(y,null,{default:n((()=>[l(x,{xs:24,md:12,style:{height:"350px"}},{default:n((()=>[f.visible?(p(),m(h,{key:0,ref:"cropper",img:f.options.img,info:!0,outputType:f.options.outputType,autoCrop:f.options.autoCrop,autoCropWidth:f.options.autoCropWidth,autoCropHeight:f.options.autoCropHeight,fixedBox:f.options.fixedBox,onRealTime:g.realTime},null,8,["img","outputType","autoCrop","autoCropWidth","autoCropHeight","fixedBox","onRealTime"])):u("",!0)])),_:1}),l(x,{xs:24,md:12,style:{height:"350px"}},{default:n((()=>[a("div",v,[a("img",{src:f.previews.url,style:d(f.previews.img)},null,12,C)])])),_:1})])),_:1}),b,l(y,null,{default:n((()=>[l(x,{lg:2,md:2},{default:n((()=>[l(T,{action:"#","http-request":g.requestUpload,"show-file-list":!1,"before-upload":g.beforeUpload},{default:n((()=>[l(w,null,{default:n((()=>[c(" 上传 "),l(_,{class:"el-icon-upload el-icon--right"})])),_:1})])),_:1},8,["http-request","before-upload"])])),_:1}),l(x,{lg:{span:1,offset:2},md:2},{default:n((()=>[l(w,{icon:"el-icon-plus",onClick:o[1]||(o[1]=e=>g.changeScale(1))})])),_:1}),l(x,{lg:{span:1,offset:1},md:2},{default:n((()=>[l(w,{icon:"el-icon-minus",onClick:o[2]||(o[2]=e=>g.changeScale(-1))})])),_:1}),l(x,{lg:{span:1,offset:1},md:2},{default:n((()=>[l(w,{icon:"el-icon-refresh-left",onClick:o[3]||(o[3]=e=>g.rotateLeft())})])),_:1}),l(x,{lg:{span:1,offset:1},md:2},{default:n((()=>[l(w,{icon:"el-icon-refresh-right",onClick:o[4]||(o[4]=e=>g.rotateRight())})])),_:1}),l(x,{lg:{span:2,offset:6},md:2},{default:n((()=>[l(w,{type:"primary",onClick:o[5]||(o[5]=e=>g.uploadImg())},{default:n((()=>[c("提 交")])),_:1})])),_:1})])),_:1})])),_:1},8,["title","modelValue","onOpened"])])}],["__scopeId","data-v-2089a75a"]]);export{x as default};
