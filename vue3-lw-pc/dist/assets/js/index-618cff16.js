import"./tag-13936295.js";import{a as e}from"./index-0bf429ac.js";import{ai as t,aq as a,o as l,c as i,T as s,aa as o,X as r,V as d,U as n,_ as p,K as u,a as c,Y as h}from"./@vue-e400fd81.js";import{_ as m}from"./quill-image-resize-module-c051113e.js";const y=m({components:{list:m({components:{},props:{type:{type:[String,Number],default:"4"}},data:()=>({loading:!0,query:{pageNum:1,pageSize:10,categoryId:"",search:"",mediaType:"4"},list:[],total:0,treeData:[],treeProps:{children:"children",label:"name"},groupProps:{checkStrictly:!0,children:"children",label:"name",value:"id",emitPath:!1},radio:""}),watch:{radio(e){this.$emit("change",e)},type(e){this.query.mediaType=this.type,this.query.pageNum=1,this.list=[],this.getList()}},computed:{},created(){this.query.mediaType=this.type,this.getList()},mounted(){},methods:{getList(t){t&&(this.query.pageNum=t),this.loading=!0,e(this.query).then((({rows:e,total:t})=>{this.list=e.map((e=>(e.checked=!1,e))),this.total=+t,this.loading=!1,this.$emit("listChange",this.list)})).catch((()=>{this.loading=!1}))},onRowClick(e,t,a){if("INPUT"==a.target.nodeName.toUpperCase(0))return;const l=e.checked;l||this.list.forEach((e=>e.checked=!1)),e.checked=!l,this.$emit("change",e.checked?e:null)}}},[["render",function(e,c,h,m,y,g){const b=t("el-input"),f=t("el-radio"),k=t("el-table-column"),v=t("el-image"),C=t("el-table"),w=t("el-pagination"),V=a("loading");return l(),i("div",null,[4==h.type?(l(),s(b,{key:0,modelValue:y.query.search,"onUpdate:modelValue":c[0]||(c[0]=e=>y.query.search=e),class:"ml10 mr10 mb20",style:{width:"260px"},placeholder:"请输入文本内容",onKeyup:c[1]||(c[1]=o((e=>g.getList(1)),["enter"]))},null,8,["modelValue"])):r("",!0),d((l(),s(C,{data:y.list,onRowClick:g.onRowClick},{default:n((()=>[p(k,{width:"30"},{default:n((({row:e})=>[p(f,{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,label:!0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),4==h.type?(l(),s(k,{key:0,prop:"content",label:"文本内容"})):r("",!0),0==h.type?(l(),s(k,{key:1,label:"图片"},{default:n((({row:e})=>[(l(),i("div",{class:"ma-img flex aic",key:e.id},[p(v,{fit:"",class:"img-li",src:e.materialUrl},null,8,["src"])]))])),_:1})):r("",!0),0==h.type?(l(),s(k,{key:2,prop:"materialUrl",label:"图片地址"})):r("",!0),8==h.type?(l(),i(u,{key:3},[p(k,{prop:"materialName",label:"图文标题"}),p(k,{prop:"materialUrl",label:"图文链接"})],64)):r("",!0),9==h.type?(l(),i(u,{key:4},[p(k,{prop:"materialName",label:"小程序标题"}),p(k,{prop:"digest",label:"小程序AppID"})],64)):r("",!0),p(k,{prop:"updateTime",label:"最近更新时间"})])),_:1},8,["data","onRowClick"])),[[V,y.loading]]),p(w,{class:"fr",onCurrentChange:g.getList,"current-page":y.query.pageNum,"page-size":y.query.pageSize,layout:"prev, pager, next",total:y.total},null,8,["onCurrentChange","current-page","page-size","total"])])}],["__scopeId","data-v-72c920ff"]])},props:{visible:{type:Boolean,default:!1},type:{type:[String,Number],default:"4"},showArr:{type:Array,default:()=>[]}},data:()=>({text:{},image:{},file:{}}),watch:{},computed:{title(){return{4:"文本",0:"图片",8:"图文",9:"小程序"}[this.type]||"素材"},Pvisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},Ptype:{get(){return this.type},set(e){this.$emit("update:type",e)}}},created(){},mounted(){},methods:{submit(){this.Pvisible=!1,this.$emit("success",this.selectedData)},onChange(e){this.selectedData=e}}},[["render",function(e,a,i,o,d,u){const m=t("list"),y=t("el-tabs"),g=t("el-button"),b=t("el-dialog");return l(),s(b,{title:`选择${u.title}`,modelValue:u.Pvisible,"onUpdate:modelValue":a[2]||(a[2]=e=>u.Pvisible=e),width:"680px","append-to-body":"","destroy-on-close":""},{footer:n((()=>[c("div",null,[p(g,{onClick:a[1]||(a[1]=e=>u.Pvisible=!1)},{default:n((()=>[h("取 消")])),_:1}),p(g,{type:"primary",onClick:u.submit},{default:n((()=>[h("确 定")])),_:1},8,["onClick"])])])),default:n((()=>[c("div",null,[i.showArr.length<=1?(l(),s(m,{key:0,type:i.showArr[0]||i.type,onChange:u.onChange},null,8,["type","onChange"])):i.showArr.length>1?(l(),s(y,{key:1,modelValue:u.Ptype,"onUpdate:modelValue":a[0]||(a[0]=e=>u.Ptype=e)},null,8,["modelValue"])):r("",!0)])])),_:1},8,["title","modelValue"])}],["__scopeId","data-v-954f8e6d"]]);export{y as S};
