import{A as t,d as e}from"../index-044285d2.js";import s from"./IdentityAttachment-b9bf008d.js";import a from"./SelectGroup-82211b43.js";import i from"./SelectEndDate-6c9f798c.js";import o from"./SelectSendType-b1e10e8d.js";import{_ as r}from"./quill-image-resize-module-c051113e.js";import{ai as m,o as p,c as n,_ as l,U as d}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";import"./PreviewInPhone-9ed75a0f.js";import"./index-0bf429ac.js";import"./scriptCenter-9e8c6ca2.js";import"./modleCenter-5112f339.js";import"./DragTable-b6be070d.js";import"./sortablejs-b0ad9b27.js";import"./MessageContentForm-5a22ed37.js";import"./staff-48996164.js";import"./PicTitContent-8b500b6d.js";import"./PosterAdd-51b39872.js";import"./index-618cff16.js";import"./tag-13936295.js";import"./fabric-8da0df30.js";import"./poster-241340a9.js";import"./liveCodeTable-73b404a8.js";import"./group-16414119.js";import"./pullNews-68e01d94.js";import"./TemplateLibrary-f59d0076.js";import"./welcome-6ff4c53e.js";import"./moment-8163541f.js";const h=r({name:"step3-type-2",components:{SelectGroupVue:a,IdentityAttachmentVue:s,SelectSendTypeVue:o,SelectEndDateVue:i},props:{data:{type:Object,default:{}},isDetail:{type:Boolean,default:!1}},watch:{data:{handler(t,e){t&&(this.form=t,this.setData())},deep:!0,immediate:!0}},data:()=>({attachmentsData:{templateInfo:"",attachments:[]},previewData:[],form:{type:0,group:{content:"",type:0,userIds:"",sendType:0,taskSendTime:"",taskEndTime:""},attachmentsList:[],senderList:[]}}),methods:{setData(){if(this.form.group||(this.form.group={type:0,content:"",userIds:"",sendType:0,taskSendTime:"",taskEndTime:""}),this.form.attachments||(this.form.attachments=[]),this.form.attachments){let e=[];this.form.attachments.forEach((t=>{"text"!==t.msgType&&e.push(t)})),this.attachmentsData.templateInfo=this.form.group.content;let s=t(e);this.attachmentsData.attachments=s,this.$emit("preview",{previewData:JSON.parse(JSON.stringify(this.attachmentsData.attachments))}),this.$emit("previewText",{templateInfo:this.attachmentsData.templateInfo})}},changeInfo(t){this.form.group.content=t,this.$emit("update",this.form),this.$emit("previewText",{templateInfo:t})},getPhoneData(t){this.previewData=t,this.$emit("preview",{templateInfo:this.attachmentsData.templateInfo,previewData:JSON.parse(JSON.stringify(t))})},getAttentment(t){this.form.attachments=t,this.$emit("update",this.form)},getSendType(t){this.form.group.sendType=t.sendType,this.form.group.taskSendTime=e(t.taskSendTime),this.$emit("update",this.form)},getEndDate(t){this.form.group.taskEndTime=e(t.taskEndTime),this.$emit("update",this.form)},getUpdateCustomer(t){this.form.group=t,this.$emit("update",this.form)}}},[["render",function(t,e,s,a,i,o){const r=m("SelectGroupVue"),h=m("IdentityAttachmentVue"),f=m("SelectSendTypeVue"),j=m("SelectEndDateVue"),c=m("el-form");return p(),n("div",null,[l(c,{ref:"form",model:i.form,"label-width":"100px"},{default:d((()=>[l(r,{isDetail:s.isDetail,ref:"selectCustomer",dataObj:i.form.group,onUpdate:o.getUpdateCustomer},null,8,["isDetail","dataObj","onUpdate"]),l(h,{isDetail:s.isDetail,ref:"selectAttachment",onPhoneData:o.getPhoneData,onSuccess:o.getAttentment,onChangeInfo:o.changeInfo,baseData:i.attachmentsData},null,8,["isDetail","onPhoneData","onSuccess","onChangeInfo","baseData"]),l(f,{isDetail:s.isDetail,ref:"selectSendType",data:i.form.group,onUpdate:o.getSendType},null,8,["isDetail","data","onUpdate"]),l(j,{isDetail:s.isDetail,ref:"selectEndDate",data:i.form.group,onUpdate:o.getEndDate},null,8,["isDetail","data","onUpdate"])])),_:1},8,["model"])])}]]);export{h as default};
