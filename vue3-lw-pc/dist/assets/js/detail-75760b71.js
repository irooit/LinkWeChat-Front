import{_ as e}from"../index-044285d2.js";import l from"./PreviewInPhone-9ed75a0f.js";import{c as a}from"./staff-48996164.js";import{_ as t}from"./quill-image-resize-module-c051113e.js";import{aU as i,ai as d,o as r,T as s,U as o,_ as m,a as p,Y as u,Z as n,c as f,K as c,a9 as b,X as h,bl as y,bj as g}from"./@vue-e400fd81.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const _={name:"CodeDetail",components:{PreviewInPhone:l,statistics:i((()=>e((()=>import("./statistics-f5aed3fd.js")),["assets/js/statistics-f5aed3fd.js","assets/js/staff-48996164.js","assets/index-044285d2.js","assets/js/js-cookie-8253c38e.js","assets/js/@vue-e400fd81.js","assets/js/vue-router-f8d53be7.js","assets/js/element-plus-68ba2566.js","assets/js/lodash-es-d4f5f48c.js","assets/js/@element-plus-214e0f7b.js","assets/js/@popperjs-b78c3215.js","assets/js/@ctrl-91de2ec7.js","assets/js/dayjs-c17bc6b2.js","assets/js/@babel-efd68da6.js","assets/js/to-fast-properties-1160b370.js","assets/js/async-validator-cf877c1f.js","assets/js/memoize-one-63ab667a.js","assets/js/normalize-wheel-es-3222b0a2.js","assets/js/@floating-ui-36fbce82.js","assets/css/element-plus-3888a320.css","assets/js/quill-image-resize-module-c051113e.js","assets/js/quill-c6b3d2fb.js","assets/js/quill-delta-a1872f89.js","assets/js/fast-diff-d5a53119.js","assets/js/lodash.clonedeep-1b6eefdc.js","assets/js/lodash.isequal-e7d08617.js","assets/js/@vueup-7cf8cfdd.js","assets/css/@vueup-da05906a.css","assets/css/quill-image-resize-module-44eb40f8.css","assets/js/pinia-1b56b17e.js","assets/js/vue-demi-71ba0ef2.js","assets/js/jsencrypt-43f479c1.js","assets/js/crypto-js-d6a67473.js","assets/js/ali-oss-912914b8.js","assets/js/axios-fb5f9e0e.js","assets/js/@vueuse-4025ce01.js","assets/js/path-browserify-289407ee.js","assets/js/nprogress-a39edb90.js","assets/css/nprogress-771398e6.css","assets/js/clipboard-7a0da8dc.js","assets/css/index-b5531375.css","assets/css/normalize-9d9ae4af.css"]))),CodeLink:i((()=>e((()=>import("./CodeLink-a163edad.js")),["assets/js/CodeLink-a163edad.js","assets/js/@vue-e400fd81.js"])))},data:()=>({defaultStart:"00:00",defaultEnd:"23:59",form:{},checkList:["周一","周二","周三","周四","周五","周六","周日"],loading:!1,ids:[],list:[],dateRange:[],form:{},query:{qrId:"",beginTime:void 0,endTime:void 0},type:{1:"单人",2:"多人",3:"批量单人"},timeRange:7}),created(){let e=this.$route.query.id;this.query.qrId=e,e&&this.getDetail(e)},mounted(){},methods:{editFn(){this.$router.push({path:"add",query:{id:this.form.id}})},getDetail(e){this.loading=!0,a(e).then((e=>{this.form=e.data,this.form.qrAttachments&&this.form.qrAttachments.length&&(this.form.welcomeMsg=this.form.qrAttachments[0].content,this.form.materialMsgList=this.form.qrAttachments),this.form.qrUserInfos.forEach((e=>{e.workCycle?e.weekday=e.workCycle.split(","):e.weekday=[]})),this.loading=!1}))},setEditList(e){let l=[];return e&&e.length&&e.forEach((e=>{if(0===e.realType){let a={id:e.materialId,mediaType:"0",materialUrl:e.picUrl};l.push(a)}else if(2===e.realType){let a={id:e.materialId,mediaType:"2",materialUrl:e.fileUrl,coverUrl:e.picUrl,digest:e.description,materialName:e.title};l.push(a)}else if(3===e.realType){let a={id:e.materialId,mediaType:"3",materialUrl:e.fileUrl,digest:e.description,materialName:e.title};l.push(a)}else if(4===e.realType){let a={id:e.materialId,mediaType:"4",content:e.content};l.push(a)}else if(9===e.realType){let a={id:e.materialId,mediaType:"9",content:e.content,coverUrl:e.picUrl,materialUrl:e.linkUrl,materialName:e.title};l.push(a)}else if(8===e.realType){let a={id:e.materialId,mediaType:"8",materialName:e.title,materialUrl:e.linkUrl,materialName:e.title};l.push(a)}else if(11===e.realType){let a={id:e.materialId,mediaType:"11",digest:e.appId,materialName:e.title,coverUrl:e.picUrl,materialUrl:e.fileUrl};l.push(a)}else if(12===e.realType){let a={id:e.materialId,mediaType:"12",digest:e.description,materialUrl:e.fileUrl,coverUrl:e.picUrl,content:e.content,materialName:e.title};l.push(a)}else if(5===e.realType){let a={id:e.materialId,mediaType:"5",materialUrl:e.fileUrl,materialName:e.title};l.push(a)}})),l},getHandledValue:e=>e<10?"0"+e:e,getTime(e){const l=e?new Date(e):new Date;return l.getFullYear()+"-"+this.getHandledValue(l.getMonth()+1)+"-"+this.getHandledValue(l.getDate())}}},j=e=>(y("data-v-f8a2301f"),e=e(),g(),e),U={class:"g-card"},v={class:"g-card-title fxbw"},V={class:"g-card"},T=j((()=>p("div",{class:"g-card-title"},"活码员工",-1))),k={class:"content pad20"},w={class:"g-card overhide"},q=j((()=>p("div",{class:"g-card-title"},"欢迎语设置",-1))),I={class:"bfc-p"},L={key:0,class:"g-card",style:{flex:"1"}},x=j((()=>p("div",{class:"g-card-title"},"欢迎语预览",-1)));const E=t(_,[["render",function(e,l,a,t,i,y){const g=d("el-button"),_=d("el-form-item"),j=d("el-switch"),E=d("TagEllipsis"),N=d("el-form"),P=d("el-tag"),C=d("el-checkbox"),D=d("el-checkbox-group"),A=d("el-time-select"),O=d("el-radio"),W=d("el-radio-group"),M=d("el-col"),z=d("CodeLink"),R=d("PreviewInPhone"),F=d("el-row"),H=d("el-tab-pane"),S=d("statistics"),K=d("CacheElTabs");return r(),s(K,null,{default:o((({opened:e})=>[m(H,{label:"活码信息"},{default:o((()=>[m(F,{style:{"margin-top":"10px"},type:"flex",gutter:10},{default:o((()=>[m(M,null,{default:o((()=>[p("div",U,[p("div",v,[u(" 基本信息 "),m(g,{type:"primary",onClick:y.editFn},{default:o((()=>[u("编辑")])),_:1},8,["onClick"])]),m(N,{"label-position":"right","label-width":"100px"},{default:o((()=>[m(_,{label:"活码名称"},{default:o((()=>[u(n(i.form.name),1)])),_:1}),m(_,{label:"活码分组"},{default:o((()=>[u(n(i.form.qrGroupName),1)])),_:1}),m(_,{label:"自动通过好友"},{default:o((()=>[m(j,{value:i.form.autoAdd,"active-value":1,"inactive-value":0,disabled:""},null,8,["value"])])),_:1}),m(_,{label:"新客标签"},{default:o((()=>[m(E,{list:i.form.qrTags,limit:"10",defaultProps:"tagName",emptyText:""},null,8,["list"])])),_:1})])),_:1})]),p("div",V,[T,(r(!0),f(c,null,b(i.form.qrUserInfos,((e,a)=>(r(),f("div",{class:"pad20",key:a},[p("div",k,[m(N,{"label-position":"right","label-width":"100px"},{default:o((()=>[m(_,{label:"排班员工"},{default:o((()=>[(r(!0),f(c,null,b(e.weQrUserList,((e,l)=>(r(),s(P,{key:l},{default:o((()=>[u(n(e.userName),1)])),_:2},1024)))),128))])),_:2},1024),m(_,{label:"工作周期"},{default:o((()=>[0===e.type?(r(),s(D,{key:0,modelValue:i.checkList,"onUpdate:modelValue":l[0]||(l[0]=e=>i.checkList=e)},{default:o((()=>[m(C,{label:"周一",disabled:""}),m(C,{label:"周二",disabled:""}),m(C,{label:"周三",disabled:""}),m(C,{label:"周四",disabled:""}),m(C,{label:"周五",disabled:""}),m(C,{label:"周六",disabled:""}),m(C,{label:"周日",disabled:""})])),_:1},8,["modelValue"])):(r(),s(D,{key:1,modelValue:e.weekday,"onUpdate:modelValue":l=>e.weekday=l},{default:o((()=>[m(C,{label:"1",disabled:""},{default:o((()=>[u("周一")])),_:1}),m(C,{label:"2",disabled:""},{default:o((()=>[u("周二")])),_:1}),m(C,{label:"3",disabled:""},{default:o((()=>[u("周三")])),_:1}),m(C,{label:"4",disabled:""},{default:o((()=>[u("周四")])),_:1}),m(C,{label:"5",disabled:""},{default:o((()=>[u("周五")])),_:1}),m(C,{label:"6",disabled:""},{default:o((()=>[u("周六")])),_:1}),m(C,{label:"7",disabled:""},{default:o((()=>[u("周日")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"]))])),_:2},1024),0===e.type?(r(),s(_,{key:0,modelValue:i.checkList,"onUpdate:modelValue":l[3]||(l[3]=e=>i.checkList=e),label:"在线时间"},{default:o((()=>[m(A,{style:{width:"40%"},disabled:"",modelValue:i.defaultStart,"onUpdate:modelValue":l[1]||(l[1]=e=>i.defaultStart=e),placeholder:"任意时间点"},null,8,["modelValue"]),u(" - "),m(A,{style:{width:"40%"},modelValue:i.defaultEnd,"onUpdate:modelValue":l[2]||(l[2]=e=>i.defaultEnd=e),disabled:"",value:"23:59",placeholder:"任意时间点"},null,8,["modelValue"])])),_:1},8,["modelValue"])):(r(),s(_,{key:1,label:"在线时间"},{default:o((()=>[m(A,{style:{width:"40%"},disabled:"",modelValue:e.beginTime,"onUpdate:modelValue":l=>e.beginTime=l,placeholder:"任意时间点"},null,8,["modelValue","onUpdate:modelValue"]),u(" - "),m(A,{style:{width:"40%"},disabled:"",modelValue:e.endTime,"onUpdate:modelValue":l=>e.endTime=l,placeholder:"任意时间点"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024))])),_:2},1024)])])))),128))]),p("div",w,[q,m(N,{"label-position":"right","label-width":"100px",disabled:""},{default:o((()=>[m(_,{label:"欢迎语类型"},{default:o((()=>[m(W,{modelValue:i.form.qrWelcomeOpen,"onUpdate:modelValue":l[5]||(l[5]=e=>i.form.qrWelcomeOpen=e),onChange:l[6]||(l[6]=()=>{})},{default:o((()=>[1==i.form.qrWelcomeOpen?(r(),s(O,{key:0,label:1},{default:o((()=>[u("不发送欢迎语")])),_:1})):h("",!0),2==i.form.qrWelcomeOpen?(r(),s(O,{key:1,label:2},{default:o((()=>[u(" 活码欢迎语 "),p("div",I,[m(C,{modelValue:i.form.qrPriorityUserWelcome,"onUpdate:modelValue":l[4]||(l[4]=e=>i.form.qrPriorityUserWelcome=e),"true-label":0,"false-label":1},{default:o((()=>[u(" 如果员工有员工欢迎语，则优先发送员工欢迎语 ")])),_:1},8,["modelValue"])])])),_:1})):h("",!0)])),_:1},8,["modelValue"])])),_:1})])),_:1})])])),_:1}),m(M,{style:{"flex-basis":"auto"}},{default:o((()=>[m(z,{data:i.form},null,8,["data"]),2==i.form.qrWelcomeOpen?(r(),f("div",L,[x,m(R,{originList:i.form.materialMsgList,templateInfo:i.form.welcomeMsg},null,8,["originList","templateInfo"])])):h("",!0)])),_:1})])),_:1})])),_:1}),m(H,{label:"活码统计"},{default:o((()=>[m(S)])),_:1})])),_:1})}],["__scopeId","data-v-f8a2301f"]]);export{E as default};
