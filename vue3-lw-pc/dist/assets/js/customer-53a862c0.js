import t from"./chatListClass-6b90b481.js";import e from"./userList-5f5fa420.js";import s from"./groupList-461a49a8.js";import{s as a,a as o}from"./content-6f300c2d.js";import{G as i}from"../index-044285d2.js";import{ai as r,aq as l,o as m,c as n,_ as c,U as u,a as p,Z as d,aa as h,V as g,K as j,a9 as L,T as f,P as y,X as C,Q as v,$ as b}from"./@vue-e400fd81.js";import{_ as k}from"./quill-image-resize-module-c051113e.js";import"./chatListClassTab-8f19ff1a.js";import"./chatList-5fb10f1d.js";import"./ChatContent-f938bb33.js";import"./benz-amr-recorder-259e7c16.js";import"./@babel-efd68da6.js";import"./to-fast-properties-1160b370.js";import"./js-cookie-8253c38e.js";/* empty css                      */import"./vue-router-f8d53be7.js";import"./element-plus-68ba2566.js";import"./lodash-es-d4f5f48c.js";import"./@element-plus-214e0f7b.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c17bc6b2.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./pinia-1b56b17e.js";import"./vue-demi-71ba0ef2.js";import"./jsencrypt-43f479c1.js";import"./crypto-js-d6a67473.js";import"./ali-oss-912914b8.js";import"./axios-fb5f9e0e.js";import"./@vueuse-4025ce01.js";import"./path-browserify-289407ee.js";import"./nprogress-a39edb90.js";import"./clipboard-7a0da8dc.js";import"./quill-c6b3d2fb.js";import"./quill-delta-a1872f89.js";import"./fast-diff-d5a53119.js";import"./lodash.clonedeep-1b6eefdc.js";import"./lodash.isequal-e7d08617.js";import"./@vueup-7cf8cfdd.js";const N={class:"customer"},_={class:"ct_box"},q={class:"name pd15"},x={key:0,"infinite-scroll-distance":"1",class:"customer-wrap"},I=["src"],T={style:{"line-height":"40px"}},z={class:"ac mt10 mb15"},V={class:"ct_box"},Q={class:"name pd15"},w={class:"ct_box"};const F=k({components:{userList:e,grouplist:s,chatListClass:t},data:()=>({init:!0,customerLoading:!1,customerQuery:{pageNum:1,pageSize:10,name:"",noRepeat:!0},customerList:[],customerTotal:0,talkName:"",chatContent:"",personIndex:void 0,activeName:"0",personList:[],loading:!1,fromId:"",queryChat:{}}),created(){},methods:{chatFn(t){this.queryChat={fromId:this.fromId,receiveName:t.name,toList:t.receiver}},groupFn(t){this.queryChat={receiveName:t.name,roomId:t.receiver}},choiceCustomer(t,e){this.personIndex=e,this.talkName=t.customerName,this.fromId=t.externalUserid,this.getChatList()},getChatList(t){this.fromId&&(t&&(this.loading=!0),this.personList=[],"0"==this.activeName?a({fromId:this.fromId,contact:this.chatContent}).then((({data:t})=>{this.loading=!1,this.personList=t})).catch((t=>{this.loading=!1})):o(this.fromId).then((({data:t})=>{this.loading=!1,this.personList=t})).catch((t=>{this.loading=!1})))},getCustomerList(t){this.customerLoading||(t&&(this.init=!1,this.customerQuery.pageNum=t,this.customerList=[],this.customerTotal=0),this.customerList.length<this.customerTotal?(this.customerLoading=!0,this.customerQuery.pageNum++,i(this.customerQuery).then((t=>{this.customerList.push(...t.rows),this.customerTotal=~~t.total,this.customerLoading=!1}))):0===this.customerTotal&&(this.customerLoading=!0,this.customerQuery.pageNum=1,i(this.customerQuery).then((t=>{this.init=!0,this.customerList=t.rows,this.customerTotal=~~t.total,this.customerLoading=!1}))))}}},[["render",function(t,e,s,a,o,i){const k=r("el-button"),F=r("el-input"),U=r("el-col"),A=r("el-icon-Avatar"),K=r("el-row"),G=r("el-empty"),B=r("userList"),J=r("el-tab-pane"),D=r("grouplist"),E=r("el-tabs"),H=r("chatListClass"),M=l("infinite-scroll"),O=l("loading");return m(),n("div",N,[c(K,{type:"flex",align:"center",gutter:10},{default:u((()=>[c(U,{span:6},{default:u((()=>[p("div",_,[p("div",q,"客户列表（"+d(o.customerTotal)+"）",1),c(F,{class:"mb10",placeholder:"搜索客户名称",clearable:"",modelValue:o.customerQuery.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.customerQuery.name=t),onKeyup:e[2]||(e[2]=h((t=>i.getCustomerList(1)),["enter"]))},{append:u((()=>[c(k,{icon:"el-icon-search",onClick:e[0]||(e[0]=t=>i.getCustomerList(1))})])),_:1},8,["modelValue"]),g((m(),n("div",null,[o.init?g((m(),n("ul",x,[o.customerList.length?(m(),n(j,{key:0},[(m(!0),n(j,null,L(o.customerList,((t,e)=>(m(),f(K,{key:e,tag:"li",onClick:s=>i.choiceCustomer(t,e),class:y(["customer-li",{active:e==o.personIndex}]),gutter:20,type:"flex",align:"middle"},{default:u((()=>[c(U,{span:4},{default:u((()=>[t.avatar?(m(),n("img",{key:0,src:t.avatar,alt:"头像"},null,8,I)):C("",!0)])),_:2},1024),t?(m(),f(U,{key:0,span:10,class:"toe"},{default:u((()=>[p("span",T,d(t.customerName),1)])),_:2},1024)):C("",!0),c(U,{span:10,class:"ar"},{default:u((()=>[p("span",{style:v({color:1===t.customerType?"#4bde03":"#f9a90b"})},d({1:"@微信",2:"@企业微信"}[t.customerType]),5),c(A,{class:y(["el-icon-Avatar",{1:"man",2:"woman"}[t.gender]])},null,8,["class"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128)),p("div",z,d(o.customerList.length!==o.customerTotal?"下拉加载更多":"看到底了～"),1)],64)):(m(),f(G,{key:1,"image-size":100}))])),[[M,i.getCustomerList]]):C("",!0)])),[[O,o.customerLoading]])])])),_:1}),c(U,{span:6},{default:u((()=>[p("div",V,[o.talkName?(m(),n(j,{key:0},[p("div",Q,d(o.talkName),1),c(F,{class:"mb5",placeholder:"搜索联系人","prefix-icon":"el-icon-search",modelValue:o.chatContent,"onUpdate:modelValue":e[3]||(e[3]=t=>o.chatContent=t),onKeyup:e[4]||(e[4]=h((t=>i.getChatList()),["enter"]))},null,8,["modelValue"]),c(E,{modelValue:o.activeName,"onUpdate:modelValue":e[5]||(e[5]=t=>o.activeName=t),onTabChange:e[6]||(e[6]=t=>i.getChatList())},{default:u((()=>[c(J,{label:"单聊",name:"0"},{default:u((()=>[0==o.activeName?(m(),f(B,{key:0,personList:o.personList,loading:o.loading,onChatFn:i.chatFn},null,8,["personList","loading","onChatFn"])):C("",!0)])),_:1}),c(J,{label:"群聊",name:"2"},{default:u((()=>[2==o.activeName?(m(),f(D,{key:0,personList:o.personList,loading:o.loading,onGroupFn:i.groupFn},null,8,["personList","loading","onGroupFn"])):C("",!0)])),_:1})])),_:1},8,["modelValue"])],64)):(m(),f(G,{key:1,"image-size":100,description:"请选择客户"}))])])),_:1}),c(U,{span:12},{default:u((()=>[p("div",w,[g(c(H,{queryChat:o.queryChat},null,8,["queryChat"]),[[b,o.queryChat.receiveName]]),o.queryChat.receiveName?C("",!0):(m(),f(G,{key:0,"image-size":100,description:"请选择联系人"}))])])),_:1})])),_:1})])}],["__scopeId","data-v-ef8c4500"]]);export{F as default};
