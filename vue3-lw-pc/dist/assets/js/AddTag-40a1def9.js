import{a as e}from"./tag-13936295.js";import{ai as s,aq as t,o as a,T as i,U as l,a as o,V as r,Y as n,_ as u,c as m,K as d,a9 as p,Z as f,X as g,aa as h}from"./@vue-e400fd81.js";import{_ as c}from"./quill-image-resize-module-c051113e.js";const w={name:"AddTag",components:{},props:{visible:{type:Boolean,default:!1},form:{type:Object,default:()=>({groupName:"",weTags:[]})}},emits:["update:visible"],data:()=>({newInput:"",rules:Object.freeze({groupName:[{required:!0,message:"必填项",trigger:"blur"}],weTags:[{required:!0,message:"必填项",trigger:"blur"}]}),visibleAdd:!1}),watch:{},computed:{Pvisible:{get(){return this.visible&&this.$nextTick((()=>{this.$refs.form.clearValidate()})),this.visible},set(e){this.$emit("update:visible",e)}}},created(){},mounted(){},methods:{closeTag(e,s){this.form.weTags.splice(s,1)},showInput(){this.visibleAdd=!0,this.$nextTick((e=>{this.$refs.saveTagInput.$refs.input.focus()}))},newInputConfirm(){let e=this.newInput;if(e){if(Array.isArray(this.form.weTags)||(this.form.weTags=[]),this.form.weTags.some((s=>s.name===e)))return void this.msgError("标签名已存在，不可重复添加");this.form.weTags.push({name:e})}this.visibleAdd=!1,this.newInput=""},submit(){this.visibleAdd||this.$refs.form.validate((s=>{this.newInput="";let t=JSON.parse(JSON.stringify(this.form));t.weTags.length&&e[t.groupId?"update":"add"](t).then((()=>{this.msgSuccess("操作成功"),this.Pvisible=!1,this.$emit("success")}))}))}}},b={class:"dialog-footer"};const v=c(w,[["render",function(e,c,w,v,y,T){const I=s("el-input"),k=s("el-form-item"),_=s("el-tag"),C=s("el-button"),A=s("el-form"),V=s("el-dialog"),$=t("preventReClick");return a(),i(V,{title:(w.form.groupId?"修改":"添加")+"标签/组","model-value":T.Pvisible,"onUpdate:modelValue":c[3]||(c[3]=e=>T.Pvisible=e),width:"500px","append-to-body":"","close-on-click-modal":!1},{footer:l((()=>[o("div",b,[r((a(),i(C,{type:"primary",onClick:T.submit},{default:l((()=>[n("确 定")])),_:1},8,["onClick"])),[[$,1e3]]),u(C,{onClick:c[2]||(c[2]=e=>T.Pvisible=!1)},{default:l((()=>[n("取 消")])),_:1})])])),default:l((()=>[u(A,{ref:"form",model:w.form,rules:y.rules,"label-width":"100px"},{default:l((()=>[u(k,{label:"标签组名称",prop:"groupName"},{default:l((()=>[u(I,{modelValue:w.form.groupName,"onUpdate:modelValue":c[0]||(c[0]=e=>w.form.groupName=e),modelModifiers:{trim:!0},maxlength:"15","show-word-limit":"",placeholder:"请输入标签组名称，该名称不支持再次修改"},null,8,["modelValue"])])),_:1}),u(k,{label:"标签",prop:"weTags"},{default:l((()=>[(a(!0),m(d,null,p(w.form.weTags,((e,s)=>(a(),m(d,{key:s},[1!==e.status?(a(),i(_,{key:0,type:"primary",closable:"",onClose:t=>T.closeTag(e,s)},{default:l((()=>[n(f(e.name),1)])),_:2},1032,["onClose"])):g("",!0)],64)))),128)),o("div",null,[y.visibleAdd?(a(),i(I,{key:0,class:"input-new-tag",modelValue:y.newInput,"onUpdate:modelValue":c[1]||(c[1]=e=>y.newInput=e),modelModifiers:{trim:!0},ref:"saveTagInput",maxlength:"10","show-word-limit":"",onKeyup:h(T.newInputConfirm,["enter"]),onBlur:T.newInputConfirm},null,8,["modelValue","onKeyup","onBlur"])):(a(),i(C,{key:1,type:"primary",plain:"",class:"button-new-tag",onClick:T.showInput},{default:l((()=>[n("添加标签")])),_:1},8,["onClick"]))])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","model-value"])}],["__scopeId","data-v-029a3671"]]);export{v as A};
